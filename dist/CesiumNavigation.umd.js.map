{"version":3,"file":"CesiumNavigation.umd.js","sources":["../src/cesium/Cesium.js","../node_modules/core-js/modules/_cof.js","../node_modules/core-js/modules/_core.js","../node_modules/core-js/modules/_global.js","../node_modules/core-js/modules/_library.js","../node_modules/core-js/modules/_shared.js","../node_modules/core-js/modules/_uid.js","../node_modules/core-js/modules/_wks.js","../node_modules/core-js/modules/_classof.js","../node_modules/core-js/modules/_is-object.js","../node_modules/core-js/modules/_an-object.js","../node_modules/core-js/modules/_fails.js","../node_modules/core-js/modules/_descriptors.js","../node_modules/core-js/modules/_dom-create.js","../node_modules/core-js/modules/_ie8-dom-define.js","../node_modules/core-js/modules/_to-primitive.js","../node_modules/core-js/modules/_object-dp.js","../node_modules/core-js/modules/_property-desc.js","../node_modules/core-js/modules/_hide.js","../node_modules/core-js/modules/_has.js","../node_modules/core-js/modules/_function-to-string.js","../node_modules/core-js/modules/_redefine.js","../node_modules/core-js/modules/es6.object.to-string.js","../node_modules/core-js/modules/es6.date.to-string.js","../node_modules/core-js/modules/_flags.js","../node_modules/core-js/modules/es6.regexp.flags.js","../node_modules/core-js/modules/es6.regexp.to-string.js","../src/core/createFragmentFromTemplate.js","../src/core/loadView.js","../src/viewModels/DistanceLegendViewModel.js","../node_modules/core-js/modules/es6.function.name.js","../node_modules/core-js/modules/_a-function.js","../node_modules/core-js/modules/_ctx.js","../node_modules/core-js/modules/_export.js","../node_modules/core-js/modules/_iobject.js","../node_modules/core-js/modules/_defined.js","../node_modules/core-js/modules/_to-iobject.js","../node_modules/core-js/modules/_to-integer.js","../node_modules/core-js/modules/_to-length.js","../node_modules/core-js/modules/_to-absolute-index.js","../node_modules/core-js/modules/_array-includes.js","../node_modules/core-js/modules/_shared-key.js","../node_modules/core-js/modules/_object-keys-internal.js","../node_modules/core-js/modules/_enum-bug-keys.js","../node_modules/core-js/modules/_object-keys.js","../node_modules/core-js/modules/_object-dps.js","../node_modules/core-js/modules/_html.js","../node_modules/core-js/modules/_object-create.js","../node_modules/core-js/modules/es6.object.create.js","../src/svgPaths/svgReset.js","../node_modules/core-js/modules/es6.object.define-properties.js","../src/viewModels/UserInterfaceControl.js","../src/viewModels/NavigationControl.js","../src/viewModels/ResetViewNavigationControl.js","../src/core/Utils.js","../src/viewModels/ZoomNavigationControl.js","../src/svgPaths/svgCompassOuterRing.js","../src/svgPaths/svgCompassGyro.js","../src/svgPaths/svgCompassRotationMarker.js","../src/viewModels/NavigationViewModel.js","../src/CesiumNavigation.js"],"sourcesContent":["export default window.Cesium","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n","var core = module.exports = { version: '2.6.12' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n","module.exports = false;\n","var core = require('./_core');\nvar global = require('./_global');\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || (global[SHARED] = {});\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: core.version,\n  mode: require('./_library') ? 'pure' : 'global',\n  copyright: '© 2020 Denis Pushkarev (zloirock.ru)'\n});\n","var id = 0;\nvar px = Math.random();\nmodule.exports = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n","var store = require('./_shared')('wks');\nvar uid = require('./_uid');\nvar Symbol = require('./_global').Symbol;\nvar USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function (name) {\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n","// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = require('./_cof');\nvar TAG = require('./_wks')('toStringTag');\n// ES3 wrong here\nvar ARG = cof(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (e) { /* empty */ }\n};\n\nmodule.exports = function (it) {\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n","var isObject = require('./_is-object');\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n","var isObject = require('./_is-object');\nvar document = require('./_global').document;\n// typeof document.createElement is 'object' in old IE\nvar is = isObject(document) && isObject(document.createElement);\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};\n","module.exports = !require('./_descriptors') && !require('./_fails')(function () {\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n","var anObject = require('./_an-object');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar toPrimitive = require('./_to-primitive');\nvar dP = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","var dP = require('./_object-dp');\nvar createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n","module.exports = require('./_shared')('native-function-to-string', Function.toString);\n","var global = require('./_global');\nvar hide = require('./_hide');\nvar has = require('./_has');\nvar SRC = require('./_uid')('src');\nvar $toString = require('./_function-to-string');\nvar TO_STRING = 'toString';\nvar TPL = ('' + $toString).split(TO_STRING);\n\nrequire('./_core').inspectSource = function (it) {\n  return $toString.call(it);\n};\n\n(module.exports = function (O, key, val, safe) {\n  var isFunction = typeof val == 'function';\n  if (isFunction) has(val, 'name') || hide(val, 'name', key);\n  if (O[key] === val) return;\n  if (isFunction) has(val, SRC) || hide(val, SRC, O[key] ? '' + O[key] : TPL.join(String(key)));\n  if (O === global) {\n    O[key] = val;\n  } else if (!safe) {\n    delete O[key];\n    hide(O, key, val);\n  } else if (O[key]) {\n    O[key] = val;\n  } else {\n    hide(O, key, val);\n  }\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n})(Function.prototype, TO_STRING, function toString() {\n  return typeof this == 'function' && this[SRC] || $toString.call(this);\n});\n","'use strict';\n// 19.1.3.6 Object.prototype.toString()\nvar classof = require('./_classof');\nvar test = {};\ntest[require('./_wks')('toStringTag')] = 'z';\nif (test + '' != '[object z]') {\n  require('./_redefine')(Object.prototype, 'toString', function toString() {\n    return '[object ' + classof(this) + ']';\n  }, true);\n}\n","var DateProto = Date.prototype;\nvar INVALID_DATE = 'Invalid Date';\nvar TO_STRING = 'toString';\nvar $toString = DateProto[TO_STRING];\nvar getTime = DateProto.getTime;\nif (new Date(NaN) + '' != INVALID_DATE) {\n  require('./_redefine')(DateProto, TO_STRING, function toString() {\n    var value = getTime.call(this);\n    // eslint-disable-next-line no-self-compare\n    return value === value ? $toString.call(this) : INVALID_DATE;\n  });\n}\n","'use strict';\n// 21.2.5.3 get RegExp.prototype.flags\nvar anObject = require('./_an-object');\nmodule.exports = function () {\n  var that = anObject(this);\n  var result = '';\n  if (that.global) result += 'g';\n  if (that.ignoreCase) result += 'i';\n  if (that.multiline) result += 'm';\n  if (that.unicode) result += 'u';\n  if (that.sticky) result += 'y';\n  return result;\n};\n","// 21.2.5.3 get RegExp.prototype.flags()\nif (require('./_descriptors') && /./g.flags != 'g') require('./_object-dp').f(RegExp.prototype, 'flags', {\n  configurable: true,\n  get: require('./_flags')\n});\n","'use strict';\nrequire('./es6.regexp.flags');\nvar anObject = require('./_an-object');\nvar $flags = require('./_flags');\nvar DESCRIPTORS = require('./_descriptors');\nvar TO_STRING = 'toString';\nvar $toString = /./[TO_STRING];\n\nvar define = function (fn) {\n  require('./_redefine')(RegExp.prototype, TO_STRING, fn, true);\n};\n\n// 21.2.5.14 RegExp.prototype.toString()\nif (require('./_fails')(function () { return $toString.call({ source: 'a', flags: 'b' }) != '/a/b'; })) {\n  define(function toString() {\n    var R = anObject(this);\n    return '/'.concat(R.source, '/',\n      'flags' in R ? R.flags : !DESCRIPTORS && R instanceof RegExp ? $flags.call(R) : undefined);\n  });\n// FF44- RegExp#toString has a wrong name\n} else if ($toString.name != TO_STRING) {\n  define(function toString() {\n    return $toString.call(this);\n  });\n}\n","\r\nconst createFragmentFromTemplate = function (htmlString) {\r\n  var holder = document.createElement('div')\r\n  holder.innerHTML = htmlString\r\n  var fragment = document.createDocumentFragment()\r\n  while (holder.firstChild) {\r\n    fragment.appendChild(holder.firstChild)\r\n  }\r\n\r\n  return fragment\r\n}\r\n\r\nexport default createFragmentFromTemplate\r\n","/* eslint-disable no-unused-vars */\r\nimport Cesium from '../cesium/Cesium'\r\nimport createFragmentFromTemplate from './createFragmentFromTemplate'\r\nvar getElement = Cesium.getElement\r\nvar Knockout = Cesium.knockout\r\n\r\nvar loadView = function (htmlString, container, viewModel) {\r\n  container = getElement(container)\r\n\r\n  var fragment = createFragmentFromTemplate(htmlString)\r\n\r\n  // Sadly, fragment.childNodes doesn't have a slice function.\r\n  // This code could be replaced with Array.prototype.slice.call(fragment.childNodes)\r\n  // but that seems slightly error prone.\r\n  var nodes = []\r\n\r\n  var i\r\n  for (i = 0; i < fragment.childNodes.length; ++i) {\r\n    nodes.push(fragment.childNodes[i])\r\n  }\r\n\r\n  container.appendChild(fragment)\r\n\r\n  for (i = 0; i < nodes.length; ++i) {\r\n    var node = nodes[i]\r\n    if (node.nodeType === 1 || node.nodeType === 8) {\r\n      Knockout.applyBindings(viewModel, node)\r\n    }\r\n  }\r\n\r\n  return nodes\r\n}\r\n\r\nexport default loadView\r\n","/* eslint-disable no-unused-vars */\r\nimport Cesium from '../cesium/Cesium'\r\nimport loadView from '../core/loadView'\r\nvar defined = Cesium.defined\r\nvar DeveloperError = Cesium.DeveloperError\r\nvar EllipsoidGeodesic = Cesium.EllipsoidGeodesic\r\nvar Cartesian2 = Cesium.Cartesian2\r\nvar getTimestamp = Cesium.getTimestamp\r\nvar EventHelper = Cesium.EventHelper\r\nvar Knockout = Cesium.knockout\r\n\r\nvar DistanceLegendViewModel = function (options) {\r\n  if (!defined(options) || !defined(options.terria)) {\r\n    throw new DeveloperError('options.terria is required.')\r\n  }\r\n\r\n  this.terria = options.terria\r\n  this._removeSubscription = undefined\r\n  this._lastLegendUpdate = undefined\r\n  this.eventHelper = new EventHelper()\r\n\r\n  this.distanceLabel = undefined\r\n  this.barWidth = undefined\r\n\r\n  this.enableDistanceLegend = (defined(options.enableDistanceLegend)) ? options.enableDistanceLegend : true\r\n\r\n  Knockout.track(this, ['distanceLabel', 'barWidth'])\r\n\r\n  this.eventHelper.add(this.terria.afterWidgetChanged, function () {\r\n    if (defined(this._removeSubscription)) {\r\n      this._removeSubscription()\r\n      this._removeSubscription = undefined\r\n    }\r\n  }, this)\r\n  //        this.terria.beforeWidgetChanged.addEventListener(function () {\r\n  //            if (defined(this._removeSubscription)) {\r\n  //                this._removeSubscription();\r\n  //                this._removeSubscription = undefined;\r\n  //            }\r\n  //        }, this);\r\n\r\n  var that = this\r\n\r\n  function addUpdateSubscription () {\r\n    if (defined(that.terria)) {\r\n      var scene = that.terria.scene\r\n      that._removeSubscription = scene.postRender.addEventListener(function () {\r\n        updateDistanceLegendCesium(this, scene)\r\n      }, that)\r\n    }\r\n  }\r\n\r\n  addUpdateSubscription()\r\n  this.eventHelper.add(this.terria.afterWidgetChanged, function () {\r\n    addUpdateSubscription()\r\n  }, this)\r\n  // this.terria.afterWidgetChanged.addEventListener(function() {\r\n  //    addUpdateSubscription();\r\n  // }, this);\r\n}\r\n\r\nDistanceLegendViewModel.prototype.destroy = function () {\r\n  this.eventHelper.removeAll()\r\n}\r\n\r\nDistanceLegendViewModel.prototype.show = function (container) {\r\n  var testing\r\n  if (this.enableDistanceLegend) {\r\n    testing = '<div class=\"distance-legend\" data-bind=\"visible: distanceLabel && barWidth\">' +\r\n      '<div class=\"distance-legend-label\" data-bind=\"text: distanceLabel\"></div>' +\r\n      '<div class=\"distance-legend-scale-bar\" data-bind=\"style: { width: barWidth + \\'px\\', left: (5 + (125 - barWidth) / 2) + \\'px\\' }\"></div>' +\r\n      '</div>'\r\n  } else {\r\n    testing = '<div class=\"distance-legend\"  style=\"display: none;\" data-bind=\"visible: distanceLabel && barWidth\">' +\r\n      '<div class=\"distance-legend-label\"  data-bind=\"text: distanceLabel\"></div>' +\r\n      '<div class=\"distance-legend-scale-bar\"  data-bind=\"style: { width: barWidth + \\'px\\', left: (5 + (125 - barWidth) / 2) + \\'px\\' }\"></div>' +\r\n      '</div>'\r\n  }\r\n  loadView(testing, container, this)\r\n  // loadView(distanceLegendTemplate, container, this);\r\n  // loadView(require('fs').readFileSync(__dirname + '/../Views/DistanceLegend.html', 'utf8'), container, this);\r\n}\r\n\r\nDistanceLegendViewModel.create = function (options) {\r\n  var result = new DistanceLegendViewModel(options)\r\n  result.show(options.container)\r\n  return result\r\n}\r\n\r\nvar geodesic = new EllipsoidGeodesic()\r\n\r\nvar distances = [\r\n  1, 2, 3, 5,\r\n  10, 20, 30, 50,\r\n  100, 200, 300, 500,\r\n  1000, 2000, 3000, 5000,\r\n  10000, 20000, 30000, 50000,\r\n  100000, 200000, 300000, 500000,\r\n  1000000, 2000000, 3000000, 5000000,\r\n  10000000, 20000000, 30000000, 50000000]\r\n\r\nfunction updateDistanceLegendCesium (viewModel, scene) {\r\n  if (!viewModel.enableDistanceLegend) {\r\n    viewModel.barWidth = undefined\r\n    viewModel.distanceLabel = undefined\r\n    return\r\n  }\r\n  var now = getTimestamp()\r\n  if (now < viewModel._lastLegendUpdate + 250) {\r\n    return\r\n  }\r\n\r\n  viewModel._lastLegendUpdate = now\r\n\r\n  // Find the distance between two pixels at the bottom center of the screen.\r\n  var width = scene.canvas.clientWidth\r\n  var height = scene.canvas.clientHeight\r\n\r\n  var left = scene.camera.getPickRay(new Cartesian2((width / 2) | 0, height - 1))\r\n  var right = scene.camera.getPickRay(new Cartesian2(1 + (width / 2) | 0, height - 1))\r\n\r\n  var globe = scene.globe\r\n  var leftPosition = globe.pick(left, scene)\r\n  var rightPosition = globe.pick(right, scene)\r\n\r\n  if (!defined(leftPosition) || !defined(rightPosition)) {\r\n    viewModel.barWidth = undefined\r\n    viewModel.distanceLabel = undefined\r\n    return\r\n  }\r\n\r\n  var leftCartographic = globe.ellipsoid.cartesianToCartographic(leftPosition)\r\n  var rightCartographic = globe.ellipsoid.cartesianToCartographic(rightPosition)\r\n\r\n  geodesic.setEndPoints(leftCartographic, rightCartographic)\r\n  var pixelDistance = geodesic.surfaceDistance\r\n\r\n  // Find the first distance that makes the scale bar less than 100 pixels.\r\n  var maxBarWidth = 100\r\n  var distance\r\n  for (var i = distances.length - 1; !defined(distance) && i >= 0; --i) {\r\n    if (distances[i] / pixelDistance < maxBarWidth) {\r\n      distance = distances[i]\r\n    }\r\n  }\r\n\r\n  if (defined(distance)) {\r\n    var label\r\n    if (distance >= 1000) {\r\n      label = (distance / 1000).toString() + ' km'\r\n    } else {\r\n      label = distance.toString() + ' m'\r\n    }\r\n\r\n    viewModel.barWidth = (distance / pixelDistance) | 0\r\n    viewModel.distanceLabel = label\r\n  } else {\r\n    viewModel.barWidth = undefined\r\n    viewModel.distanceLabel = undefined\r\n  }\r\n}\r\n\r\nexport default DistanceLegendViewModel\r\n","var dP = require('./_object-dp').f;\nvar FProto = Function.prototype;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// 19.2.4.2 name\nNAME in FProto || require('./_descriptors') && dP(FProto, NAME, {\n  configurable: true,\n  get: function () {\n    try {\n      return ('' + this).match(nameRE)[1];\n    } catch (e) {\n      return '';\n    }\n  }\n});\n","module.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","var global = require('./_global');\nvar core = require('./_core');\nvar hide = require('./_hide');\nvar redefine = require('./_redefine');\nvar ctx = require('./_ctx');\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] || (global[name] = {}) : (global[name] || {})[PROTOTYPE];\n  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});\n  var expProto = exports[PROTOTYPE] || (exports[PROTOTYPE] = {});\n  var key, own, out, exp;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    // export native or passed\n    out = (own ? target : source)[key];\n    // bind timers to global for call from export context\n    exp = IS_BIND && own ? ctx(out, global) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // extend global\n    if (target) redefine(target, key, out, type & $export.U);\n    // export\n    if (exports[key] != out) hide(exports, key, exp);\n    if (IS_PROTO && expProto[key] != out) expProto[key] = out;\n  }\n};\nglobal.core = core;\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nmodule.exports = $export;\n","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\n// eslint-disable-next-line no-prototype-builtins\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject');\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return IObject(defined(it));\n};\n","// 7.1.4 ToInteger\nvar ceil = Math.ceil;\nvar floor = Math.floor;\nmodule.exports = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer');\nvar min = Math.min;\nmodule.exports = function (it) {\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n","var toInteger = require('./_to-integer');\nvar max = Math.max;\nvar min = Math.min;\nmodule.exports = function (index, length) {\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject');\nvar toLength = require('./_to-length');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nmodule.exports = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {\n      if (O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n","var shared = require('./_shared')('keys');\nvar uid = require('./_uid');\nmodule.exports = function (key) {\n  return shared[key] || (shared[key] = uid(key));\n};\n","var has = require('./_has');\nvar toIObject = require('./_to-iobject');\nvar arrayIndexOf = require('./_array-includes')(false);\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\n\nmodule.exports = function (object, names) {\n  var O = toIObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) if (key != IE_PROTO) has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n","// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys = require('./_object-keys-internal');\nvar enumBugKeys = require('./_enum-bug-keys');\n\nmodule.exports = Object.keys || function keys(O) {\n  return $keys(O, enumBugKeys);\n};\n","var dP = require('./_object-dp');\nvar anObject = require('./_an-object');\nvar getKeys = require('./_object-keys');\n\nmodule.exports = require('./_descriptors') ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = getKeys(Properties);\n  var length = keys.length;\n  var i = 0;\n  var P;\n  while (length > i) dP.f(O, P = keys[i++], Properties[P]);\n  return O;\n};\n","var document = require('./_global').document;\nmodule.exports = document && document.documentElement;\n","// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject = require('./_an-object');\nvar dPs = require('./_object-dps');\nvar enumBugKeys = require('./_enum-bug-keys');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar Empty = function () { /* empty */ };\nvar PROTOTYPE = 'prototype';\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = require('./_dom-create')('iframe');\n  var i = enumBugKeys.length;\n  var lt = '<';\n  var gt = '>';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  require('./_html').appendChild(iframe);\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while (i--) delete createDict[PROTOTYPE][enumBugKeys[i]];\n  return createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty();\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : dPs(result, Properties);\n};\n","var $export = require('./_export');\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\n$export($export.S, 'Object', { create: require('./_object-create') });\n","var svgReset = 'M 7.5,0 C 3.375,0 0,3.375 0,7.5 0,11.625 3.375,15 7.5,15 c 3.46875,0 6.375,-2.4375 7.21875,-5.625 l -1.96875,0 C 12,11.53125 9.9375,13.125 7.5,13.125 4.40625,13.125 1.875,10.59375 1.875,7.5 1.875,4.40625 4.40625,1.875 7.5,1.875 c 1.59375,0 2.90625,0.65625 3.9375,1.6875 l -3,3 6.5625,0 L 15,0 12.75,2.25 C 11.4375,0.84375 9.5625,0 7.5,0 z'\r\n\r\nexport default svgReset\r\n","var $export = require('./_export');\n// 19.1.2.3 / 15.2.3.7 Object.defineProperties(O, Properties)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', { defineProperties: require('./_object-dps') });\n","import Cesium from '../cesium/Cesium'\r\n\r\nvar defined = Cesium.defined\r\nvar defineProperties = Cesium.defineProperties\r\nvar DeveloperError = Cesium.DeveloperError\r\nvar Knockout = Cesium.knockout\r\n/**\r\n * The view-model for a control in the user interface\r\n *\r\n * @alias UserInterfaceControl\r\n * @constructor\r\n * @abstract\r\n *\r\n * @param {Terria} terria The Terria instance.\r\n */\r\nvar UserInterfaceControl = function (terria) {\r\n  if (!defined(terria)) {\r\n    throw new DeveloperError('terria is required')\r\n  }\r\n\r\n  this._terria = terria\r\n\r\n  /**\r\n   * Gets or sets the name of the control which is set as the controls title.\r\n   * This property is observable.\r\n   * @type {String}\r\n   */\r\n  this.name = 'Unnamed Control'\r\n\r\n  /**\r\n   * Gets or sets the text to be displayed in the UI control.\r\n   * This property is observable.\r\n   * @type {String}\r\n   */\r\n  this.text = undefined\r\n\r\n  /**\r\n   * Gets or sets the svg icon of the control.  This property is observable.\r\n   * @type {Object}\r\n   */\r\n  this.svgIcon = undefined\r\n\r\n  /**\r\n   * Gets or sets the height of the svg icon.  This property is observable.\r\n   * @type {Integer}\r\n   */\r\n  this.svgHeight = undefined\r\n\r\n  /**\r\n   * Gets or sets the width of the svg icon.  This property is observable.\r\n   * @type {Integer}\r\n   */\r\n  this.svgWidth = undefined\r\n\r\n  /**\r\n   * Gets or sets the CSS class of the control. This property is observable.\r\n   * @type {String}\r\n   */\r\n  this.cssClass = undefined\r\n\r\n  /**\r\n   * Gets or sets the property describing whether or not the control is in the active state.\r\n   * This property is observable.\r\n   * @type {Boolean}\r\n   */\r\n  this.isActive = false\r\n\r\n  Knockout.track(this, ['name', 'svgIcon', 'svgHeight', 'svgWidth', 'cssClass', 'isActive'])\r\n}\r\n\r\nObject.defineProperties(UserInterfaceControl.prototype, {\r\n  /**\r\n   * Gets the Terria instance.\r\n   * @memberOf UserInterfaceControl.prototype\r\n   * @type {Terria}\r\n   */\r\n   terria: {\r\n    get: function () {\r\n      return this._terria\r\n    }\r\n  },\r\n  /**\r\n   * Gets a value indicating whether this button has text associated with it.\r\n   * @type {Object}\r\n   */\r\n  hasText: {\r\n    get: function () {\r\n      return defined(this.text) && typeof this.text === 'string'\r\n    }\r\n  }\r\n\r\n})\r\n\r\n/**\r\n * When implemented in a derived class, performs an action when the user clicks\r\n * on this control.\r\n * @abstract\r\n * @protected\r\n */\r\nUserInterfaceControl.prototype.activate = function () {\r\n  throw new DeveloperError('activate must be implemented in the derived class.')\r\n}\r\n\r\nexport default UserInterfaceControl\r\n","import UserInterfaceControl from './UserInterfaceControl'\r\n/**\r\n * The view-model for a control in the navigation control tool bar\r\n *\r\n * @alias NavigationControl\r\n * @constructor\r\n * @abstract\r\n *\r\n * @param {Terria} terria The Terria instance.\r\n */\r\nvar NavigationControl = function (terria) {\r\n  UserInterfaceControl.apply(this, arguments)\r\n}\r\n\r\nNavigationControl.prototype = Object.create(UserInterfaceControl.prototype)\r\n\r\nexport default NavigationControl\r\n","\r\nimport Cesium from '../cesium/Cesium'\r\nimport svgReset from '../svgPaths/svgReset'\r\nimport NavigationControl from './NavigationControl'\r\n\r\nvar defined = Cesium.defined\r\nvar Camera = Cesium.Camera\r\nvar Rectangle = Cesium.Rectangle\r\nvar Cartographic = Cesium.Cartographic\r\n/**\r\n * The model for a zoom in control in the navigation control tool bar\r\n *\r\n * @alias ResetViewNavigationControl\r\n * @constructor\r\n * @abstract\r\n *\r\n * @param {Terria} terria The Terria instance.\r\n */\r\nvar ResetViewNavigationControl = function (terria) {\r\n  NavigationControl.apply(this, arguments)\r\n\r\n  /**\r\n   * Gets or sets the name of the control which is set as the control's title.\r\n   * This property is observable.\r\n   * @type {String}\r\n   */\r\n  this.name = '重置视图'\r\n  this.navigationLocked = false\r\n\r\n  /**\r\n   * Gets or sets the svg icon of the control.  This property is observable.\r\n   * @type {Object}\r\n   */\r\n  this.svgIcon = svgReset\r\n\r\n  /**\r\n   * Gets or sets the height of the svg icon.  This property is observable.\r\n   * @type {Integer}\r\n   */\r\n  this.svgHeight = 15\r\n\r\n  /**\r\n   * Gets or sets the width of the svg icon.  This property is observable.\r\n   * @type {Integer}\r\n   */\r\n  this.svgWidth = 15\r\n\r\n  /**\r\n   * Gets or sets the CSS class of the control. This property is observable.\r\n   * @type {String}\r\n   */\r\n  this.cssClass = 'navigation-control-icon-reset'\r\n}\r\n\r\nResetViewNavigationControl.prototype = Object.create(NavigationControl.prototype)\r\n\r\nResetViewNavigationControl.prototype.setNavigationLocked = function (locked) {\r\n  this.navigationLocked = locked\r\n}\r\n\r\nResetViewNavigationControl.prototype.resetView = function () {\r\n  // this.terria.analytics.logEvent('navigation', 'click', 'reset');\r\n  if (this.navigationLocked) {\r\n    return\r\n  }\r\n  var scene = this.terria.scene\r\n\r\n  var sscc = scene.screenSpaceCameraController\r\n  if (!sscc.enableInputs) {\r\n    return\r\n  }\r\n\r\n  this.isActive = true\r\n\r\n  var camera = scene.camera\r\n\r\n  if (defined(this.terria.trackedEntity)) {\r\n    // when tracking do not reset to default view but to default view of tracked entity\r\n    var trackedEntity = this.terria.trackedEntity\r\n    this.terria.trackedEntity = undefined\r\n    this.terria.trackedEntity = trackedEntity\r\n  } else {\r\n    // reset to a default position or view defined in the options\r\n    if (this.terria.options.defaultResetView) {\r\n      if (this.terria.options.defaultResetView && this.terria.options.defaultResetView instanceof Cartographic) {\r\n        camera.flyTo({\r\n          destination: scene.globe.ellipsoid.cartographicToCartesian(this.terria.options.defaultResetView)\r\n        })\r\n      } else if (this.terria.options.defaultResetView && this.terria.options.defaultResetView instanceof Rectangle) {\r\n        try {\r\n          Rectangle.validate(this.terria.options.defaultResetView)\r\n          camera.flyTo({\r\n            destination: this.terria.options.defaultResetView,\r\n            orientation: {\r\n              heading: Cesium.Math.toRadians(5.729578)\r\n            }\r\n          })\r\n        } catch (e) {\r\n          console.log('Cesium-navigation/ResetViewNavigationControl:   options.defaultResetView Cesium rectangle is  invalid!')\r\n        }\r\n      }\r\n    } else if (typeof camera.flyHome === 'function') {\r\n      camera.flyHome(1)\r\n    } else {\r\n      camera.flyTo({'destination': Camera.DEFAULT_VIEW_RECTANGLE, 'duration': 1})\r\n    }\r\n  }\r\n  this.isActive = false\r\n}\r\n\r\n/**\r\n * When implemented in a derived class, performs an action when the user clicks\r\n * on this control\r\n * @abstract\r\n * @protected\r\n */\r\nResetViewNavigationControl.prototype.activate = function () {\r\n  this.resetView()\r\n}\r\n\r\nexport default ResetViewNavigationControl\r\n","/* eslint-disable no-unused-vars */\r\nimport Cesium from '../cesium/Cesium'\r\n\r\nvar defined = Cesium.defined\r\nvar Ray = Cesium.Ray\r\nvar Cartesian3 = Cesium.Cartesian3\r\nvar Cartographic = Cesium.Cartographic\r\nvar ReferenceFrame = Cesium.ReferenceFrame\r\nvar SceneMode = Cesium.SceneMode\r\n\r\nvar Utils = {}\r\n\r\nvar unprojectedScratch = new Cartographic()\r\nvar rayScratch = new Ray()\r\n\r\n/**\r\n * gets the focus point of the camera\r\n * @param {Viewer|Widget} terria The terria\r\n * @param {boolean} inWorldCoordinates true to get the focus in world coordinates, otherwise get it in projection-specific map coordinates, in meters.\r\n * @param {Cartesian3} [result] The object in which the result will be stored.\r\n * @return {Cartesian3} The modified result parameter, a new instance if none was provided or undefined if there is no focus point.\r\n */\r\nUtils.getCameraFocus = function (terria, inWorldCoordinates, result) {\r\n  var scene = terria.scene\r\n  var camera = scene.camera\r\n\r\n  if (scene.mode === SceneMode.MORPHING) {\r\n    return undefined\r\n  }\r\n\r\n  if (!defined(result)) {\r\n    result = new Cartesian3()\r\n  }\r\n\r\n  // TODO bug when tracking: if entity moves the current position should be used and not only the one when starting orbiting/rotating\r\n  // TODO bug when tracking: reset should reset to default view of tracked entity\r\n\r\n  if (defined(terria.trackedEntity)) {\r\n    result = terria.trackedEntity.position.getValue(terria.clock.currentTime, result)\r\n  } else {\r\n    rayScratch.origin = camera.positionWC\r\n    rayScratch.direction = camera.directionWC\r\n    result = scene.globe.pick(rayScratch, scene, result)\r\n  }\r\n\r\n  if (!defined(result)) {\r\n    return undefined\r\n  }\r\n\r\n  if (scene.mode === SceneMode.SCENE2D || scene.mode === SceneMode.COLUMBUS_VIEW) {\r\n    result = camera.worldToCameraCoordinatesPoint(result, result)\r\n\r\n    if (inWorldCoordinates) {\r\n      result = scene.globe.ellipsoid.cartographicToCartesian(scene.mapProjection.unproject(result, unprojectedScratch), result)\r\n    }\r\n  } else {\r\n    if (!inWorldCoordinates) {\r\n      result = camera.worldToCameraCoordinatesPoint(result, result)\r\n    }\r\n  }\r\n\r\n  return result\r\n}\r\nexport default Utils\r\n","import Cesium from '../cesium/Cesium'\r\nimport NavigationControl from './NavigationControl'\r\nimport Utils from '../core/Utils'\r\nvar defined = Cesium.defined\r\nvar Ray = Cesium.Ray\r\nvar IntersectionTests = Cesium.IntersectionTests\r\nvar Cartesian3 = Cesium.Cartesian3\r\nvar SceneMode = Cesium.SceneMode\r\n\r\n/**\r\n * The model for a zoom in control in the navigation control tool bar\r\n *\r\n * @alias ZoomOutNavigationControl\r\n * @constructor\r\n * @abstract\r\n *\r\n * @param {Terria} terria The Terria instance.\r\n * @param {boolean} zoomIn is used for zooming in (true) or out (false)\r\n */\r\nvar ZoomNavigationControl = function (terria, zoomIn) {\r\n  NavigationControl.apply(this, arguments)\r\n\r\n  /**\r\n   * Gets or sets the name of the control which is set as the control's title.\r\n   * This property is observable.\r\n   * @type {String}\r\n   */\r\n  this.name = 'Zoom ' + (zoomIn ? 'In' : 'Out')\r\n\r\n  /**\r\n   * Gets or sets the text to be displayed in the nav control. Controls that\r\n   * have text do not display the svgIcon.\r\n   * This property is observable.\r\n   * @type {String}\r\n   */\r\n  this.text = zoomIn ? '+' : '-'\r\n\r\n  /**\r\n   * Gets or sets the CSS class of the control. This property is observable.\r\n   * @type {String}\r\n   */\r\n  this.cssClass = 'navigation-control-icon-zoom-' + (zoomIn ? 'in' : 'out')\r\n\r\n  this.relativeAmount = 2\r\n\r\n  if (zoomIn) {\r\n    // this ensures that zooming in is the inverse of zooming out and vice versa\r\n    // e.g. the camera position remains when zooming in and out\r\n    this.relativeAmount = 1 / this.relativeAmount\r\n  }\r\n}\r\n\r\nZoomNavigationControl.prototype.relativeAmount = 1\r\n\r\nZoomNavigationControl.prototype = Object.create(NavigationControl.prototype)\r\n\r\n/**\r\n * When implemented in a derived class, performs an action when the user clicks\r\n * on this control\r\n * @abstract\r\n * @protected\r\n */\r\nZoomNavigationControl.prototype.activate = function () {\r\n  this.zoom(this.relativeAmount)\r\n}\r\n\r\nvar cartesian3Scratch = new Cartesian3()\r\n\r\nZoomNavigationControl.prototype.zoom = function (relativeAmount) {\r\n  // this.terria.analytics.logEvent('navigation', 'click', 'zoomIn');\r\n\r\n  this.isActive = true\r\n\r\n  if (defined(this.terria)) {\r\n    var scene = this.terria.scene\r\n\r\n    var sscc = scene.screenSpaceCameraController\r\n    // do not zoom if it is disabled\r\n    if (!sscc.enableInputs || !sscc.enableZoom) {\r\n      return\r\n    }\r\n    // TODO\r\n    //            if(scene.mode == SceneMode.COLUMBUS_VIEW && !sscc.enableTranslate) {\r\n    //                return;\r\n    //            }\r\n\r\n    var camera = scene.camera\r\n    var orientation\r\n\r\n    switch (scene.mode) {\r\n      case SceneMode.MORPHING:\r\n        break\r\n      case SceneMode.SCENE2D:\r\n        camera.zoomIn(camera.positionCartographic.height * (1 - this.relativeAmount))\r\n        break\r\n      default:\r\n        var focus\r\n\r\n        if (defined(this.terria.trackedEntity)) {\r\n          focus = new Cartesian3()\r\n        } else {\r\n          focus = Utils.getCameraFocus(this.terria, false)\r\n        }\r\n\r\n        if (!defined(focus)) {\r\n          // Camera direction is not pointing at the globe, so use the ellipsoid horizon point as\r\n          // the focal point.\r\n          var ray = new Ray(camera.worldToCameraCoordinatesPoint(scene.globe.ellipsoid.cartographicToCartesian(camera.positionCartographic)), camera.directionWC)\r\n          focus = IntersectionTests.grazingAltitudeLocation(ray, scene.globe.ellipsoid)\r\n\r\n          orientation = {\r\n            heading: camera.heading,\r\n            pitch: camera.pitch,\r\n            roll: camera.roll\r\n          }\r\n        } else {\r\n          orientation = {\r\n            direction: camera.direction,\r\n            up: camera.up\r\n          }\r\n        }\r\n\r\n        var direction = Cartesian3.subtract(camera.position, focus, cartesian3Scratch)\r\n        var movementVector = Cartesian3.multiplyByScalar(direction, relativeAmount, direction)\r\n        var endPosition = Cartesian3.add(focus, movementVector, focus)\r\n\r\n        if (defined(this.terria.trackedEntity) || scene.mode === SceneMode.COLUMBUS_VIEW) {\r\n          // sometimes flyTo does not work (jumps to wrong position) so just set the position without any animation\r\n          // do not use flyTo when tracking an entity because during animatiuon the position of the entity may change\r\n          camera.position = endPosition\r\n        } else {\r\n          camera.flyTo({\r\n            destination: endPosition,\r\n            orientation: orientation,\r\n            duration: 0.5,\r\n            convert: false\r\n          })\r\n        }\r\n    }\r\n  }\r\n\r\n  // this.terria.notifyRepaintRequired();\r\n  this.isActive = false\r\n}\r\n\r\nexport default ZoomNavigationControl\r\n","\r\nvar svgCompassOuterRing = 'm 66.5625,0 0,15.15625 3.71875,0 0,-10.40625 5.5,10.40625 4.375,0 0,-15.15625 -3.71875,0 0,10.40625 L 70.9375,0 66.5625,0 z M 72.5,20.21875 c -28.867432,0 -52.28125,23.407738 -52.28125,52.28125 0,28.87351 23.413818,52.3125 52.28125,52.3125 28.86743,0 52.28125,-23.43899 52.28125,-52.3125 0,-28.873512 -23.41382,-52.28125 -52.28125,-52.28125 z m 0,1.75 c 13.842515,0 26.368948,5.558092 35.5,14.5625 l -11.03125,11 0.625,0.625 11.03125,-11 c 8.9199,9.108762 14.4375,21.579143 14.4375,35.34375 0,13.764606 -5.5176,26.22729 -14.4375,35.34375 l -11.03125,-11 -0.625,0.625 11.03125,11 c -9.130866,9.01087 -21.658601,14.59375 -35.5,14.59375 -13.801622,0 -26.321058,-5.53481 -35.4375,-14.5 l 11.125,-11.09375 c 6.277989,6.12179 14.857796,9.90625 24.3125,9.90625 19.241896,0 34.875,-15.629154 34.875,-34.875 0,-19.245847 -15.633104,-34.84375 -34.875,-34.84375 -9.454704,0 -18.034511,3.760884 -24.3125,9.875 L 37.0625,36.4375 C 46.179178,27.478444 58.696991,21.96875 72.5,21.96875 z m -0.875,0.84375 0,13.9375 1.75,0 0,-13.9375 -1.75,0 z M 36.46875,37.0625 47.5625,48.15625 C 41.429794,54.436565 37.65625,63.027539 37.65625,72.5 c 0,9.472461 3.773544,18.055746 9.90625,24.34375 L 36.46875,107.9375 c -8.96721,-9.1247 -14.5,-21.624886 -14.5,-35.4375 0,-13.812615 5.53279,-26.320526 14.5,-35.4375 z M 72.5,39.40625 c 18.297686,0 33.125,14.791695 33.125,33.09375 0,18.302054 -14.827314,33.125 -33.125,33.125 -18.297687,0 -33.09375,-14.822946 -33.09375,-33.125 0,-18.302056 14.796063,-33.09375 33.09375,-33.09375 z M 22.84375,71.625 l 0,1.75 13.96875,0 0,-1.75 -13.96875,0 z m 85.5625,0 0,1.75 14,0 0,-1.75 -14,0 z M 71.75,108.25 l 0,13.9375 1.71875,0 0,-13.9375 -1.71875,0 z'\r\n\r\nexport default svgCompassOuterRing\r\n","\r\nvar svgCompassGyro = 'm 72.71875,54.375 c -0.476702,0 -0.908208,0.245402 -1.21875,0.5625 -0.310542,0.317098 -0.551189,0.701933 -0.78125,1.1875 -0.172018,0.363062 -0.319101,0.791709 -0.46875,1.25 -6.91615,1.075544 -12.313231,6.656514 -13,13.625 -0.327516,0.117495 -0.661877,0.244642 -0.9375,0.375 -0.485434,0.22959 -0.901634,0.471239 -1.21875,0.78125 -0.317116,0.310011 -0.5625,0.742111 -0.5625,1.21875 l 0.03125,0 c 0,0.476639 0.245384,0.877489 0.5625,1.1875 0.317116,0.310011 0.702066,0.58291 1.1875,0.8125 0.35554,0.168155 0.771616,0.32165 1.21875,0.46875 1.370803,6.10004 6.420817,10.834127 12.71875,11.8125 0.146999,0.447079 0.30025,0.863113 0.46875,1.21875 0.230061,0.485567 0.470708,0.870402 0.78125,1.1875 0.310542,0.317098 0.742048,0.5625 1.21875,0.5625 0.476702,0 0.876958,-0.245402 1.1875,-0.5625 0.310542,-0.317098 0.582439,-0.701933 0.8125,-1.1875 0.172018,-0.363062 0.319101,-0.791709 0.46875,-1.25 6.249045,-1.017063 11.256351,-5.7184 12.625,-11.78125 0.447134,-0.1471 0.86321,-0.300595 1.21875,-0.46875 0.485434,-0.22959 0.901633,-0.502489 1.21875,-0.8125 0.317117,-0.310011 0.5625,-0.710861 0.5625,-1.1875 l -0.03125,0 c 0,-0.476639 -0.245383,-0.908739 -0.5625,-1.21875 C 89.901633,71.846239 89.516684,71.60459 89.03125,71.375 88.755626,71.244642 88.456123,71.117495 88.125,71 87.439949,64.078341 82.072807,58.503735 75.21875,57.375 c -0.15044,-0.461669 -0.326927,-0.884711 -0.5,-1.25 -0.230061,-0.485567 -0.501958,-0.870402 -0.8125,-1.1875 -0.310542,-0.317098 -0.710798,-0.5625 -1.1875,-0.5625 z m -0.0625,1.40625 c 0.03595,-0.01283 0.05968,0 0.0625,0 0.0056,0 0.04321,-0.02233 0.1875,0.125 0.144288,0.147334 0.34336,0.447188 0.53125,0.84375 0.06385,0.134761 0.123901,0.309578 0.1875,0.46875 -0.320353,-0.01957 -0.643524,-0.0625 -0.96875,-0.0625 -0.289073,0 -0.558569,0.04702 -0.84375,0.0625 C 71.8761,57.059578 71.936151,56.884761 72,56.75 c 0.18789,-0.396562 0.355712,-0.696416 0.5,-0.84375 0.07214,-0.07367 0.120304,-0.112167 0.15625,-0.125 z m 0,2.40625 c 0.448007,0 0.906196,0.05436 1.34375,0.09375 0.177011,0.592256 0.347655,1.271044 0.5,2.03125 0.475097,2.370753 0.807525,5.463852 0.9375,8.9375 -0.906869,-0.02852 -1.834463,-0.0625 -2.78125,-0.0625 -0.92298,0 -1.802327,0.03537 -2.6875,0.0625 0.138529,-3.473648 0.493653,-6.566747 0.96875,-8.9375 0.154684,-0.771878 0.320019,-1.463985 0.5,-2.0625 0.405568,-0.03377 0.804291,-0.0625 1.21875,-0.0625 z m -2.71875,0.28125 c -0.129732,0.498888 -0.259782,0.987558 -0.375,1.5625 -0.498513,2.487595 -0.838088,5.693299 -0.96875,9.25 -3.21363,0.15162 -6.119596,0.480068 -8.40625,0.9375 -0.682394,0.136509 -1.275579,0.279657 -1.84375,0.4375 0.799068,-6.135482 5.504716,-11.036454 11.59375,-12.1875 z M 75.5,58.5 c 6.043169,1.18408 10.705093,6.052712 11.5,12.15625 -0.569435,-0.155806 -1.200273,-0.302525 -1.875,-0.4375 -2.262525,-0.452605 -5.108535,-0.783809 -8.28125,-0.9375 -0.130662,-3.556701 -0.470237,-6.762405 -0.96875,-9.25 C 75.761959,59.467174 75.626981,58.990925 75.5,58.5 z m -2.84375,12.09375 c 0.959338,0 1.895843,0.03282 2.8125,0.0625 C 75.48165,71.267751 75.5,71.871028 75.5,72.5 c 0,1.228616 -0.01449,2.438313 -0.0625,3.59375 -0.897358,0.0284 -1.811972,0.0625 -2.75,0.0625 -0.927373,0 -1.831062,-0.03473 -2.71875,-0.0625 -0.05109,-1.155437 -0.0625,-2.365134 -0.0625,-3.59375 0,-0.628972 0.01741,-1.232249 0.03125,-1.84375 0.895269,-0.02827 1.783025,-0.0625 2.71875,-0.0625 z M 68.5625,70.6875 c -0.01243,0.60601 -0.03125,1.189946 -0.03125,1.8125 0,1.22431 0.01541,2.407837 0.0625,3.5625 -3.125243,-0.150329 -5.92077,-0.471558 -8.09375,-0.90625 -0.784983,-0.157031 -1.511491,-0.316471 -2.125,-0.5 -0.107878,-0.704096 -0.1875,-1.422089 -0.1875,-2.15625 0,-0.115714 0.02849,-0.228688 0.03125,-0.34375 0.643106,-0.20284 1.389577,-0.390377 2.25,-0.5625 2.166953,-0.433487 4.97905,-0.75541 8.09375,-0.90625 z m 8.3125,0.03125 c 3.075121,0.15271 5.824455,0.446046 7.96875,0.875 0.857478,0.171534 1.630962,0.360416 2.28125,0.5625 0.0027,0.114659 0,0.228443 0,0.34375 0,0.735827 -0.07914,1.450633 -0.1875,2.15625 -0.598568,0.180148 -1.29077,0.34562 -2.0625,0.5 -2.158064,0.431708 -4.932088,0.754666 -8.03125,0.90625 0.04709,-1.154663 0.0625,-2.33819 0.0625,-3.5625 0,-0.611824 -0.01924,-1.185379 -0.03125,-1.78125 z M 57.15625,72.5625 c 0.0023,0.572772 0.06082,1.131112 0.125,1.6875 -0.125327,-0.05123 -0.266577,-0.10497 -0.375,-0.15625 -0.396499,-0.187528 -0.665288,-0.387337 -0.8125,-0.53125 -0.147212,-0.143913 -0.15625,-0.182756 -0.15625,-0.1875 0,-0.0047 -0.02221,-0.07484 0.125,-0.21875 0.147212,-0.143913 0.447251,-0.312472 0.84375,-0.5 0.07123,-0.03369 0.171867,-0.06006 0.25,-0.09375 z m 31.03125,0 c 0.08201,0.03503 0.175941,0.05872 0.25,0.09375 0.396499,0.187528 0.665288,0.356087 0.8125,0.5 0.14725,0.14391 0.15625,0.21405 0.15625,0.21875 0,0.0047 -0.009,0.04359 -0.15625,0.1875 -0.147212,0.143913 -0.416001,0.343722 -0.8125,0.53125 -0.09755,0.04613 -0.233314,0.07889 -0.34375,0.125 0.06214,-0.546289 0.09144,-1.094215 0.09375,-1.65625 z m -29.5,3.625 c 0.479308,0.123125 0.983064,0.234089 1.53125,0.34375 2.301781,0.460458 5.229421,0.787224 8.46875,0.9375 0.167006,2.84339 0.46081,5.433176 0.875,7.5 0.115218,0.574942 0.245268,1.063612 0.375,1.5625 -5.463677,-1.028179 -9.833074,-5.091831 -11.25,-10.34375 z m 27.96875,0 C 85.247546,81.408945 80.919274,85.442932 75.5,86.5 c 0.126981,-0.490925 0.261959,-0.967174 0.375,-1.53125 0.41419,-2.066824 0.707994,-4.65661 0.875,-7.5 3.204493,-0.15162 6.088346,-0.480068 8.375,-0.9375 0.548186,-0.109661 1.051942,-0.220625 1.53125,-0.34375 z M 70.0625,77.53125 c 0.865391,0.02589 1.723666,0.03125 2.625,0.03125 0.912062,0 1.782843,-0.0048 2.65625,-0.03125 -0.165173,2.736408 -0.453252,5.207651 -0.84375,7.15625 -0.152345,0.760206 -0.322989,1.438994 -0.5,2.03125 -0.437447,0.03919 -0.895856,0.0625 -1.34375,0.0625 -0.414943,0 -0.812719,-0.02881 -1.21875,-0.0625 -0.177011,-0.592256 -0.347655,-1.271044 -0.5,-2.03125 -0.390498,-1.948599 -0.700644,-4.419842 -0.875,-7.15625 z m 1.75,10.28125 c 0.284911,0.01545 0.554954,0.03125 0.84375,0.03125 0.325029,0 0.648588,-0.01171 0.96875,-0.03125 -0.05999,0.148763 -0.127309,0.31046 -0.1875,0.4375 -0.18789,0.396562 -0.386962,0.696416 -0.53125,0.84375 -0.144288,0.147334 -0.181857,0.125 -0.1875,0.125 -0.0056,0 -0.07446,0.02233 -0.21875,-0.125 C 72.355712,88.946416 72.18789,88.646562 72,88.25 71.939809,88.12296 71.872486,87.961263 71.8125,87.8125 z'\r\n\r\nexport default svgCompassGyro\r\n","var svgCompassRotationMarker = 'M 72.46875,22.03125 C 59.505873,22.050338 46.521615,27.004287 36.6875,36.875 L 47.84375,47.96875 C 61.521556,34.240041 83.442603,34.227389 97.125,47.90625 l 11.125,-11.125 C 98.401629,26.935424 85.431627,22.012162 72.46875,22.03125 z'\r\nexport default svgCompassRotationMarker\r\n","import Cesium from '../cesium/Cesium'\r\nimport loadView from '../core/loadView'\r\nimport ResetViewNavigationControl from './ResetViewNavigationControl'\r\nimport ZoomNavigationControl from './ZoomNavigationControl'\r\nimport svgCompassOuterRing from '../svgPaths/svgCompassOuterRing'\r\nimport svgCompassGyro from '../svgPaths/svgCompassGyro'\r\nimport svgCompassRotationMarker from '../svgPaths/svgCompassRotationMarker'\r\nimport Utils from '../core/Utils'\r\nvar defined = Cesium.defined\r\nvar CesiumMath = Cesium.Math\r\nvar getTimestamp = Cesium.getTimestamp\r\nvar EventHelper = Cesium.EventHelper\r\nvar Transforms = Cesium.Transforms\r\nvar SceneMode = Cesium.SceneMode\r\nvar Cartesian2 = Cesium.Cartesian2\r\nvar Cartesian3 = Cesium.Cartesian3\r\nvar Matrix4 = Cesium.Matrix4\r\nvar BoundingSphere = Cesium.BoundingSphere\r\nvar HeadingPitchRange = Cesium.HeadingPitchRange\r\nvar Knockout = Cesium.knockout\r\n\r\nvar NavigationViewModel = function (options) {\r\n  this.terria = options.terria\r\n  this.eventHelper = new EventHelper()\r\n  this.enableZoomControls = (defined(options.enableZoomControls)) ? options.enableZoomControls : true\r\n  this.enableCompass = (defined(options.enableCompass)) ? options.enableCompass : true\r\n  this.navigationLocked = false\r\n\r\n  // if (this.showZoomControls)\r\n  //   {\r\n  this.controls = options.controls\r\n  if (!defined(this.controls)) {\r\n    this.controls = [\r\n      new ZoomNavigationControl(this.terria, true),\r\n      new ResetViewNavigationControl(this.terria),      \r\n      new ZoomNavigationControl(this.terria, false)\r\n    ]\r\n  }\r\n  // }\r\n\r\n  this.svgCompassOuterRing = svgCompassOuterRing\r\n  this.svgCompassGyro = svgCompassGyro\r\n  this.svgCompassRotationMarker = svgCompassRotationMarker\r\n\r\n  this.showCompass = defined(this.terria) && this.enableCompass\r\n  this.heading = this.showCompass ? this.terria.scene.camera.heading : 0.0\r\n\r\n  this.isOrbiting = false\r\n  this.orbitCursorAngle = 0\r\n  this.orbitCursorOpacity = 0.0\r\n  this.orbitLastTimestamp = 0\r\n  this.orbitFrame = undefined\r\n  this.orbitIsLook = false\r\n  this.orbitMouseMoveFunction = undefined\r\n  this.orbitMouseUpFunction = undefined\r\n\r\n  this.isRotating = false\r\n  this.rotateInitialCursorAngle = undefined\r\n  this.rotateFrame = undefined\r\n  this.rotateIsLook = false\r\n  this.rotateMouseMoveFunction = undefined\r\n  this.rotateMouseUpFunction = undefined\r\n\r\n  this._unsubcribeFromPostRender = undefined\r\n\r\n  Knockout.track(this, ['controls', 'showCompass', 'heading', 'isOrbiting', 'orbitCursorAngle', 'isRotating'])\r\n\r\n  var that = this\r\n\r\n  NavigationViewModel.prototype.setNavigationLocked = function (locked) {\r\n    this.navigationLocked = locked\r\n    if (this.controls && this.controls.length > 1) {\r\n      this.controls[1].setNavigationLocked(this.navigationLocked)\r\n    }\r\n  }\r\n\r\n  function widgetChange () {\r\n    if (defined(that.terria)) {\r\n      if (that._unsubcribeFromPostRender) {\r\n        that._unsubcribeFromPostRender()\r\n        that._unsubcribeFromPostRender = undefined\r\n      }\r\n\r\n      that.showCompass = true && that.enableCompass\r\n\r\n      that._unsubcribeFromPostRender = that.terria.scene.postRender.addEventListener(function () {\r\n        that.heading = that.terria.scene.camera.heading\r\n      })\r\n    } else {\r\n      if (that._unsubcribeFromPostRender) {\r\n        that._unsubcribeFromPostRender()\r\n        that._unsubcribeFromPostRender = undefined\r\n      }\r\n      that.showCompass = false\r\n    }\r\n  }\r\n\r\n  this.eventHelper.add(this.terria.afterWidgetChanged, widgetChange, this)\r\n  // this.terria.afterWidgetChanged.addEventListener(widgetChange);\r\n\r\n  widgetChange()\r\n}\r\n\r\nNavigationViewModel.prototype.destroy = function () {\r\n  this.eventHelper.removeAll()\r\n\r\n  // loadView(require('fs').readFileSync(baseURLEmpCesium + 'js-lib/terrajs/lib/Views/Navigation.html', 'utf8'), container, this);\r\n}\r\n\r\nNavigationViewModel.prototype.show = function (container) {\r\n  var testing\r\n  if (this.enableZoomControls && this.enableCompass) {\r\n    testing = '<div class=\"compass\" title=\"\" data-bind=\"visible: showCompass, event: { mousedown: handleMouseDown, dblclick: handleDoubleClick }\">' +\r\n      '<div class=\"compass-outer-ring-background\"></div>' +\r\n      ' <div class=\"compass-rotation-marker\" data-bind=\"visible: isOrbiting, style: { transform: \\'rotate(-\\' + orbitCursorAngle + \\'rad)\\', \\'-webkit-transform\\': \\'rotate(-\\' + orbitCursorAngle + \\'rad)\\', opacity: orbitCursorOpacity }, cesiumSvgPath: { path: svgCompassRotationMarker, width: 145, height: 145 }\"></div>' +\r\n      ' <div class=\"compass-outer-ring\" title=\"\" data-bind=\"style: { transform: \\'rotate(-\\' + heading + \\'rad)\\', \\'-webkit-transform\\': \\'rotate(-\\' + heading + \\'rad)\\' }, cesiumSvgPath: { path: svgCompassOuterRing, width: 145, height: 145 }\"></div>' +\r\n      ' <div class=\"compass-gyro-background\"></div>' +\r\n      ' <div class=\"compass-gyro\" data-bind=\"cesiumSvgPath: { path: svgCompassGyro, width: 145, height: 145 }, css: { \\'compass-gyro-active\\': isOrbiting }\"></div>' +\r\n      '</div>' +\r\n      '<div class=\"navigation-controls\">' +\r\n      '<!-- ko foreach: controls -->' +\r\n      '<div data-bind=\"click: activate, attr: { title: $data.name }, css: $root.isLastControl($data) ? \\'navigation-control-last\\' : \\'navigation-control\\' \">' +\r\n      '   <!-- ko if: $data.hasText -->' +\r\n      '   <div data-bind=\"text: $data.text, css: $data.isActive ?  \\'navigation-control-icon-active \\' + $data.cssClass : $data.cssClass\"></div>' +\r\n      '   <!-- /ko -->' +\r\n      '  <!-- ko ifnot: $data.hasText -->' +\r\n      '  <div data-bind=\"cesiumSvgPath: { path: $data.svgIcon, width: $data.svgWidth, height: $data.svgHeight }, css: $data.isActive ?  \\'navigation-control-icon-active \\' + $data.cssClass : $data.cssClass\"></div>' +\r\n      '  <!-- /ko -->' +\r\n      ' </div>' +\r\n      ' <!-- /ko -->' +\r\n      '</div>'\r\n  } else if (!this.enableZoomControls && this.enableCompass) {\r\n    testing = '<div class=\"compass\" title=\"\" data-bind=\"visible: showCompass, event: { mousedown: handleMouseDown, dblclick: handleDoubleClick }\">' +\r\n      '<div class=\"compass-outer-ring-background\"></div>' +\r\n      ' <div class=\"compass-rotation-marker\" data-bind=\"visible: isOrbiting, style: { transform: \\'rotate(-\\' + orbitCursorAngle + \\'rad)\\', \\'-webkit-transform\\': \\'rotate(-\\' + orbitCursorAngle + \\'rad)\\', opacity: orbitCursorOpacity }, cesiumSvgPath: { path: svgCompassRotationMarker, width: 145, height: 145 }\"></div>' +\r\n      ' <div class=\"compass-outer-ring\" title=\"\" data-bind=\"style: { transform: \\'rotate(-\\' + heading + \\'rad)\\', \\'-webkit-transform\\': \\'rotate(-\\' + heading + \\'rad)\\' }, cesiumSvgPath: { path: svgCompassOuterRing, width: 145, height: 145 }\"></div>' +\r\n      ' <div class=\"compass-gyro-background\"></div>' +\r\n      ' <div class=\"compass-gyro\" data-bind=\"cesiumSvgPath: { path: svgCompassGyro, width: 145, height: 145 }, css: { \\'compass-gyro-active\\': isOrbiting }\"></div>' +\r\n      '</div>' +\r\n      '<div class=\"navigation-controls\"  style=\"display: none;\" >' +\r\n      '<!-- ko foreach: controls -->' +\r\n      '<div data-bind=\"click: activate, attr: { title: $data.name }, css: $root.isLastControl($data) ? \\'navigation-control-last\\' : \\'navigation-control\\' \">' +\r\n      '   <!-- ko if: $data.hasText -->' +\r\n      '   <div data-bind=\"text: $data.text, css: $data.isActive ?  \\'navigation-control-icon-active \\' + $data.cssClass : $data.cssClass\"></div>' +\r\n      '   <!-- /ko -->' +\r\n      '  <!-- ko ifnot: $data.hasText -->' +\r\n      '  <div data-bind=\"cesiumSvgPath: { path: $data.svgIcon, width: $data.svgWidth, height: $data.svgHeight }, css: $data.isActive ?  \\'navigation-control-icon-active \\' + $data.cssClass : $data.cssClass\"></div>' +\r\n      '  <!-- /ko -->' +\r\n      ' </div>' +\r\n      ' <!-- /ko -->' +\r\n      '</div>'\r\n  } else if (this.enableZoomControls && !this.enableCompass) {\r\n    testing = '<div class=\"compass\"  style=\"display: none;\" title=\"\" data-bind=\"visible: showCompass, event: { mousedown: handleMouseDown, dblclick: handleDoubleClick }\">' +\r\n      '<div class=\"compass-outer-ring-background\"></div>' +\r\n      ' <div class=\"compass-rotation-marker\" data-bind=\"visible: isOrbiting, style: { transform: \\'rotate(-\\' + orbitCursorAngle + \\'rad)\\', \\'-webkit-transform\\': \\'rotate(-\\' + orbitCursorAngle + \\'rad)\\', opacity: orbitCursorOpacity }, cesiumSvgPath: { path: svgCompassRotationMarker, width: 145, height: 145 }\"></div>' +\r\n      ' <div class=\"compass-outer-ring\" title=\"\" data-bind=\"style: { transform: \\'rotate(-\\' + heading + \\'rad)\\', \\'-webkit-transform\\': \\'rotate(-\\' + heading + \\'rad)\\' }, cesiumSvgPath: { path: svgCompassOuterRing, width: 145, height: 145 }\"></div>' +\r\n      ' <div class=\"compass-gyro-background\"></div>' +\r\n      ' <div class=\"compass-gyro\" data-bind=\"cesiumSvgPath: { path: svgCompassGyro, width: 145, height: 145 }, css: { \\'compass-gyro-active\\': isOrbiting }\"></div>' +\r\n      '</div>' +\r\n      '<div class=\"navigation-controls\"    >' +\r\n      '<!-- ko foreach: controls -->' +\r\n      '<div data-bind=\"click: activate, attr: { title: $data.name }, css: $root.isLastControl($data) ? \\'navigation-control-last\\' : \\'navigation-control\\' \">' +\r\n      '   <!-- ko if: $data.hasText -->' +\r\n      '   <div data-bind=\"text: $data.text, css: $data.isActive ?  \\'navigation-control-icon-active \\' + $data.cssClass : $data.cssClass\"></div>' +\r\n      '   <!-- /ko -->' +\r\n      '  <!-- ko ifnot: $data.hasText -->' +\r\n      '  <div data-bind=\"cesiumSvgPath: { path: $data.svgIcon, width: $data.svgWidth, height: $data.svgHeight }, css: $data.isActive ?  \\'navigation-control-icon-active \\' + $data.cssClass : $data.cssClass\"></div>' +\r\n      '  <!-- /ko -->' +\r\n      ' </div>' +\r\n      ' <!-- /ko -->' +\r\n      '</div>'\r\n  } else if (!this.enableZoomControls && !this.enableCompass) {\r\n    testing = '<div class=\"compass\"  style=\"display: none;\" title=\"\" data-bind=\"visible: showCompass, event: { mousedown: handleMouseDown, dblclick: handleDoubleClick }\">' +\r\n      '<div class=\"compass-outer-ring-background\"></div>' +\r\n      ' <div class=\"compass-rotation-marker\" data-bind=\"visible: isOrbiting, style: { transform: \\'rotate(-\\' + orbitCursorAngle + \\'rad)\\', \\'-webkit-transform\\': \\'rotate(-\\' + orbitCursorAngle + \\'rad)\\', opacity: orbitCursorOpacity }, cesiumSvgPath: { path: svgCompassRotationMarker, width: 145, height: 145 }\"></div>' +\r\n      ' <div class=\"compass-outer-ring\" title=\"\" data-bind=\"style: { transform: \\'rotate(-\\' + heading + \\'rad)\\', \\'-webkit-transform\\': \\'rotate(-\\' + heading + \\'rad)\\' }, cesiumSvgPath: { path: svgCompassOuterRing, width: 145, height: 145 }\"></div>' +\r\n      ' <div class=\"compass-gyro-background\"></div>' +\r\n      ' <div class=\"compass-gyro\" data-bind=\"cesiumSvgPath: { path: svgCompassGyro, width: 145, height: 145 }, css: { \\'compass-gyro-active\\': isOrbiting }\"></div>' +\r\n      '</div>' +\r\n      '<div class=\"navigation-controls\"   style=\"display: none;\" >' +\r\n      '<!-- ko foreach: controls -->' +\r\n      '<div data-bind=\"click: activate, attr: { title: $data.name }, css: $root.isLastControl($data) ? \\'navigation-control-last\\' : \\'navigation-control\\' \">' +\r\n      '   <!-- ko if: $data.hasText -->' +\r\n      '   <div data-bind=\"text: $data.text, css: $data.isActive ?  \\'navigation-control-icon-active \\' + $data.cssClass : $data.cssClass\"></div>' +\r\n      '   <!-- /ko -->' +\r\n      '  <!-- ko ifnot: $data.hasText -->' +\r\n      '  <div data-bind=\"cesiumSvgPath: { path: $data.svgIcon, width: $data.svgWidth, height: $data.svgHeight }, css: $data.isActive ?  \\'navigation-control-icon-active \\' + $data.cssClass : $data.cssClass\"></div>' +\r\n      '  <!-- /ko -->' +\r\n      ' </div>' +\r\n      ' <!-- /ko -->' +\r\n      '</div>'\r\n  }\r\n  loadView(testing, container, this)\r\n  // loadView(navigatorTemplate, container, this);\r\n  // loadView(require('fs').readFileSync(baseURLEmpCesium + 'js-lib/terrajs/lib/Views/Navigation.html', 'utf8'), container, this);\r\n}\r\n\r\n/**\r\n * Adds a control to this toolbar.\r\n * @param {NavControl} control The control to add.\r\n */\r\nNavigationViewModel.prototype.add = function (control) {\r\n  this.controls.push(control)\r\n}\r\n\r\n/**\r\n * Removes a control from this toolbar.\r\n * @param {NavControl} control The control to remove.\r\n */\r\nNavigationViewModel.prototype.remove = function (control) {\r\n  this.controls.remove(control)\r\n}\r\n\r\n/**\r\n * Checks if the control given is the last control in the control array.\r\n * @param {NavControl} control The control to remove.\r\n */\r\nNavigationViewModel.prototype.isLastControl = function (control) {\r\n  return (control === this.controls[this.controls.length - 1])\r\n}\r\n\r\nvar vectorScratch = new Cartesian2()\r\n\r\nNavigationViewModel.prototype.handleMouseDown = function (viewModel, e) {\r\n  var scene = this.terria.scene\r\n  if (scene.mode === SceneMode.MORPHING) {\r\n    return true\r\n  }\r\n  if (viewModel.navigationLocked) {\r\n    return true\r\n  }\r\n\r\n  var compassElement = e.currentTarget\r\n  var compassRectangle = e.currentTarget.getBoundingClientRect()\r\n  var maxDistance = compassRectangle.width / 2.0\r\n  var center = new Cartesian2((compassRectangle.right - compassRectangle.left) / 2.0, (compassRectangle.bottom - compassRectangle.top) / 2.0)\r\n  var clickLocation = new Cartesian2(e.clientX - compassRectangle.left, e.clientY - compassRectangle.top)\r\n  var vector = Cartesian2.subtract(clickLocation, center, vectorScratch)\r\n  var distanceFromCenter = Cartesian2.magnitude(vector)\r\n\r\n  var distanceFraction = distanceFromCenter / maxDistance\r\n\r\n  var nominalTotalRadius = 145\r\n  var norminalGyroRadius = 50\r\n\r\n  if (distanceFraction < norminalGyroRadius / nominalTotalRadius) {\r\n    orbit(this, compassElement, vector)\r\n    //            return false;\r\n  } else if (distanceFraction < 1.0) {\r\n    rotate(this, compassElement, vector)\r\n    //            return false;\r\n  } else {\r\n    return true\r\n  }\r\n}\r\n\r\nvar oldTransformScratch = new Matrix4()\r\nvar newTransformScratch = new Matrix4()\r\nvar centerScratch = new Cartesian3()\r\n\r\nNavigationViewModel.prototype.handleDoubleClick = function (viewModel, e) {\r\n  var scene = viewModel.terria.scene\r\n  var camera = scene.camera\r\n\r\n  var sscc = scene.screenSpaceCameraController\r\n\r\n  if (scene.mode === SceneMode.MORPHING || !sscc.enableInputs) {\r\n    return true\r\n  }\r\n  if (viewModel.navigationLocked) {\r\n    return true\r\n  }\r\n  if (scene.mode === SceneMode.COLUMBUS_VIEW && !sscc.enableTranslate) {\r\n    return\r\n  }\r\n  if (scene.mode === SceneMode.SCENE3D || scene.mode === SceneMode.COLUMBUS_VIEW) {\r\n    if (!sscc.enableLook) {\r\n      return\r\n    }\r\n\r\n    if (scene.mode === SceneMode.SCENE3D) {\r\n      if (!sscc.enableRotate) {\r\n        return\r\n      }\r\n    }\r\n  }\r\n\r\n  var center = Utils.getCameraFocus(viewModel.terria, true, centerScratch)\r\n\r\n  if (!defined(center)) {\r\n    // Globe is barely visible, so reset to home view.\r\n\r\n    this.controls[1].resetView()\r\n    return\r\n  }\r\n\r\n  var cameraPosition = scene.globe.ellipsoid.cartographicToCartesian(camera.positionCartographic, new Cartesian3())\r\n\r\n  var surfaceNormal = scene.globe.ellipsoid.geodeticSurfaceNormal(center)\r\n\r\n  var focusBoundingSphere = new BoundingSphere(center, 0)\r\n\r\n  camera.flyToBoundingSphere(focusBoundingSphere, {\r\n    offset: new HeadingPitchRange(0,\r\n      // do not use camera.pitch since the pitch at the center/target is required\r\n      CesiumMath.PI_OVER_TWO - Cartesian3.angleBetween(\r\n        surfaceNormal,\r\n        camera.directionWC\r\n      ),\r\n      // distanceToBoundingSphere returns wrong values when in 2D or Columbus view so do not use\r\n      // camera.distanceToBoundingSphere(focusBoundingSphere)\r\n      // instead calculate distance manually\r\n      Cartesian3.distance(cameraPosition, center)\r\n    ),\r\n    duration: 1.5\r\n  })\r\n}\r\n\r\nNavigationViewModel.create = function (options) {\r\n  // options.enableZoomControls = this.enableZoomControls;\r\n  // options.enableCompass = this.enableCompass;\r\n  var result = new NavigationViewModel(options)\r\n  result.show(options.container)\r\n  return result\r\n}\r\n\r\nfunction orbit (viewModel, compassElement, cursorVector) {\r\n  var scene = viewModel.terria.scene\r\n\r\n  var sscc = scene.screenSpaceCameraController\r\n\r\n  // do not orbit if it is disabled\r\n  if (scene.mode === SceneMode.MORPHING || !sscc.enableInputs) {\r\n    return\r\n  }\r\n  if (viewModel.navigationLocked) {\r\n    return true\r\n  }\r\n\r\n  switch (scene.mode) {\r\n    case SceneMode.COLUMBUS_VIEW:\r\n      if (sscc.enableLook) {\r\n        break\r\n      }\r\n\r\n      if (!sscc.enableTranslate || !sscc.enableTilt) {\r\n        return\r\n      }\r\n      break\r\n    case SceneMode.SCENE3D:\r\n      if (sscc.enableLook) {\r\n        break\r\n      }\r\n\r\n      if (!sscc.enableTilt || !sscc.enableRotate) {\r\n        return\r\n      }\r\n      break\r\n    case SceneMode.SCENE2D:\r\n      if (!sscc.enableTranslate) {\r\n        return\r\n      }\r\n      break\r\n  }\r\n\r\n  // Remove existing event handlers, if any.\r\n  document.removeEventListener('mousemove', viewModel.orbitMouseMoveFunction, false)\r\n  document.removeEventListener('mouseup', viewModel.orbitMouseUpFunction, false)\r\n\r\n  if (defined(viewModel.orbitTickFunction)) {\r\n    viewModel.terria.clock.onTick.removeEventListener(viewModel.orbitTickFunction)\r\n  }\r\n\r\n  viewModel.orbitMouseMoveFunction = undefined\r\n  viewModel.orbitMouseUpFunction = undefined\r\n  viewModel.orbitTickFunction = undefined\r\n\r\n  viewModel.isOrbiting = true\r\n  viewModel.orbitLastTimestamp = getTimestamp()\r\n\r\n  var camera = scene.camera\r\n\r\n  if (defined(viewModel.terria.trackedEntity)) {\r\n    // when tracking an entity simply use that reference frame\r\n    viewModel.orbitFrame = undefined\r\n    viewModel.orbitIsLook = false\r\n  } else {\r\n    var center = Utils.getCameraFocus(viewModel.terria, true, centerScratch)\r\n\r\n    if (!defined(center)) {\r\n      viewModel.orbitFrame = Transforms.eastNorthUpToFixedFrame(camera.positionWC, scene.globe.ellipsoid, newTransformScratch)\r\n      viewModel.orbitIsLook = true\r\n    } else {\r\n      viewModel.orbitFrame = Transforms.eastNorthUpToFixedFrame(center, scene.globe.ellipsoid, newTransformScratch)\r\n      viewModel.orbitIsLook = false\r\n    }\r\n  }\r\n\r\n  viewModel.orbitTickFunction = function (e) {\r\n    var timestamp = getTimestamp()\r\n    var deltaT = timestamp - viewModel.orbitLastTimestamp\r\n    var rate = (viewModel.orbitCursorOpacity - 0.5) * 2.5 / 1000\r\n    var distance = deltaT * rate\r\n\r\n    var angle = viewModel.orbitCursorAngle + CesiumMath.PI_OVER_TWO\r\n    var x = Math.cos(angle) * distance\r\n    var y = Math.sin(angle) * distance\r\n\r\n    var oldTransform\r\n\r\n    if (viewModel.navigationLocked) {\r\n      return true\r\n    }\r\n\r\n    if (defined(viewModel.orbitFrame)) {\r\n      oldTransform = Matrix4.clone(camera.transform, oldTransformScratch)\r\n\r\n      camera.lookAtTransform(viewModel.orbitFrame)\r\n    }\r\n\r\n    // do not look up/down or rotate in 2D mode\r\n    if (scene.mode === SceneMode.SCENE2D) {\r\n      camera.move(new Cartesian3(x, y, 0), Math.max(scene.canvas.clientWidth, scene.canvas.clientHeight) / 100 * camera.positionCartographic.height * distance)\r\n    } else {\r\n      if (viewModel.orbitIsLook) {\r\n        camera.look(Cartesian3.UNIT_Z, -x)\r\n        camera.look(camera.right, -y)\r\n      } else {\r\n        camera.rotateLeft(x)\r\n        camera.rotateUp(y)\r\n      }\r\n    }\r\n\r\n    if (defined(viewModel.orbitFrame)) {\r\n      camera.lookAtTransform(oldTransform)\r\n    }\r\n\r\n    // viewModel.terria.cesium.notifyRepaintRequired();\r\n\r\n    viewModel.orbitLastTimestamp = timestamp\r\n  }\r\n\r\n  function updateAngleAndOpacity (vector, compassWidth) {\r\n    var angle = Math.atan2(-vector.y, vector.x)\r\n    viewModel.orbitCursorAngle = CesiumMath.zeroToTwoPi(angle - CesiumMath.PI_OVER_TWO)\r\n\r\n    var distance = Cartesian2.magnitude(vector)\r\n    var maxDistance = compassWidth / 2.0\r\n    var distanceFraction = Math.min(distance / maxDistance, 1.0)\r\n    var easedOpacity = 0.5 * distanceFraction * distanceFraction + 0.5\r\n    viewModel.orbitCursorOpacity = easedOpacity\r\n\r\n    // viewModel.terria.cesium.notifyRepaintRequired();\r\n  }\r\n\r\n  viewModel.orbitMouseMoveFunction = function (e) {\r\n    var compassRectangle = compassElement.getBoundingClientRect()\r\n    var center = new Cartesian2((compassRectangle.right - compassRectangle.left) / 2.0, (compassRectangle.bottom - compassRectangle.top) / 2.0)\r\n    var clickLocation = new Cartesian2(e.clientX - compassRectangle.left, e.clientY - compassRectangle.top)\r\n    var vector = Cartesian2.subtract(clickLocation, center, vectorScratch)\r\n    updateAngleAndOpacity(vector, compassRectangle.width)\r\n  }\r\n\r\n  viewModel.orbitMouseUpFunction = function (e) {\r\n    // TODO: if mouse didn't move, reset view to looking down, north is up?\r\n\r\n    viewModel.isOrbiting = false\r\n    document.removeEventListener('mousemove', viewModel.orbitMouseMoveFunction, false)\r\n    document.removeEventListener('mouseup', viewModel.orbitMouseUpFunction, false)\r\n\r\n    if (defined(viewModel.orbitTickFunction)) {\r\n      viewModel.terria.clock.onTick.removeEventListener(viewModel.orbitTickFunction)\r\n    }\r\n\r\n    viewModel.orbitMouseMoveFunction = undefined\r\n    viewModel.orbitMouseUpFunction = undefined\r\n    viewModel.orbitTickFunction = undefined\r\n  }\r\n\r\n  document.addEventListener('mousemove', viewModel.orbitMouseMoveFunction, false)\r\n  document.addEventListener('mouseup', viewModel.orbitMouseUpFunction, false)\r\n  viewModel.terria.clock.onTick.addEventListener(viewModel.orbitTickFunction)\r\n\r\n  updateAngleAndOpacity(cursorVector, compassElement.getBoundingClientRect().width)\r\n}\r\n\r\nfunction rotate (viewModel, compassElement, cursorVector) {\r\n  var scene = viewModel.terria.scene\r\n  var camera = scene.camera\r\n\r\n  var sscc = scene.screenSpaceCameraController\r\n  // do not rotate in 2D mode or if rotating is disabled\r\n  if (scene.mode === SceneMode.MORPHING || scene.mode === SceneMode.SCENE2D || !sscc.enableInputs) {\r\n    return\r\n  }\r\n  if (viewModel.navigationLocked) {\r\n    return true\r\n  }\r\n\r\n  if (!sscc.enableLook && (scene.mode === SceneMode.COLUMBUS_VIEW || (scene.mode === SceneMode.SCENE3D && !sscc.enableRotate))) {\r\n    return\r\n  }\r\n\r\n  // Remove existing event handlers, if any.\r\n  document.removeEventListener('mousemove', viewModel.rotateMouseMoveFunction, false)\r\n  document.removeEventListener('mouseup', viewModel.rotateMouseUpFunction, false)\r\n\r\n  viewModel.rotateMouseMoveFunction = undefined\r\n  viewModel.rotateMouseUpFunction = undefined\r\n\r\n  viewModel.isRotating = true\r\n  viewModel.rotateInitialCursorAngle = Math.atan2(-cursorVector.y, cursorVector.x)\r\n\r\n  if (defined(viewModel.terria.trackedEntity)) {\r\n    // when tracking an entity simply use that reference frame\r\n    viewModel.rotateFrame = undefined\r\n    viewModel.rotateIsLook = false\r\n  } else {\r\n    var viewCenter = Utils.getCameraFocus(viewModel.terria, true, centerScratch)\r\n\r\n    if (!defined(viewCenter) || (scene.mode === SceneMode.COLUMBUS_VIEW && !sscc.enableLook && !sscc.enableTranslate)) {\r\n      viewModel.rotateFrame = Transforms.eastNorthUpToFixedFrame(camera.positionWC, scene.globe.ellipsoid, newTransformScratch)\r\n      viewModel.rotateIsLook = true\r\n    } else {\r\n      viewModel.rotateFrame = Transforms.eastNorthUpToFixedFrame(viewCenter, scene.globe.ellipsoid, newTransformScratch)\r\n      viewModel.rotateIsLook = false\r\n    }\r\n  }\r\n\r\n  var oldTransform\r\n  if (defined(viewModel.rotateFrame)) {\r\n    oldTransform = Matrix4.clone(camera.transform, oldTransformScratch)\r\n    camera.lookAtTransform(viewModel.rotateFrame)\r\n  }\r\n\r\n  viewModel.rotateInitialCameraAngle = -camera.heading\r\n\r\n  if (defined(viewModel.rotateFrame)) {\r\n    camera.lookAtTransform(oldTransform)\r\n  }\r\n\r\n  viewModel.rotateMouseMoveFunction = function (e) {\r\n    var compassRectangle = compassElement.getBoundingClientRect()\r\n    var center = new Cartesian2((compassRectangle.right - compassRectangle.left) / 2.0, (compassRectangle.bottom - compassRectangle.top) / 2.0)\r\n    var clickLocation = new Cartesian2(e.clientX - compassRectangle.left, e.clientY - compassRectangle.top)\r\n    var vector = Cartesian2.subtract(clickLocation, center, vectorScratch)\r\n    var angle = Math.atan2(-vector.y, vector.x)\r\n\r\n    var angleDifference = angle - viewModel.rotateInitialCursorAngle\r\n    var newCameraAngle = CesiumMath.zeroToTwoPi(viewModel.rotateInitialCameraAngle - angleDifference)\r\n\r\n    var camera = viewModel.terria.scene.camera\r\n\r\n    var oldTransform\r\n    if (defined(viewModel.rotateFrame)) {\r\n      oldTransform = Matrix4.clone(camera.transform, oldTransformScratch)\r\n      camera.lookAtTransform(viewModel.rotateFrame)\r\n    }\r\n\r\n    var currentCameraAngle = -camera.heading\r\n    camera.rotateRight(newCameraAngle - currentCameraAngle)\r\n\r\n    if (defined(viewModel.rotateFrame)) {\r\n      camera.lookAtTransform(oldTransform)\r\n    }\r\n\r\n    // viewModel.terria.cesium.notifyRepaintRequired();\r\n  }\r\n\r\n  viewModel.rotateMouseUpFunction = function (e) {\r\n    viewModel.isRotating = false\r\n    document.removeEventListener('mousemove', viewModel.rotateMouseMoveFunction, false)\r\n    document.removeEventListener('mouseup', viewModel.rotateMouseUpFunction, false)\r\n\r\n    viewModel.rotateMouseMoveFunction = undefined\r\n    viewModel.rotateMouseUpFunction = undefined\r\n  }\r\n\r\n  document.addEventListener('mousemove', viewModel.rotateMouseMoveFunction, false)\r\n  document.addEventListener('mouseup', viewModel.rotateMouseUpFunction, false)\r\n}\r\n\r\nexport default NavigationViewModel\r\n","/* eslint-disable no-unused-vars */\r\nimport Cesium from './cesium/Cesium'\r\n// import registerKnockoutBindings from './core/registerKnockoutBindings'\r\nimport DistanceLegendViewModel from './viewModels/DistanceLegendViewModel'\r\nimport NavigationViewModel from './viewModels/NavigationViewModel'\r\n\r\nvar defined = Cesium.defined\r\nvar definedProperties = Cesium.defineProperties\r\nvar CesiumEvent = Cesium.Event\r\nvar Knockout = Cesium.knockout\r\nvar DeveloperError = Cesium.DeveloperError\r\n/**\r\n * @alias CesiumNavigation\r\n * @constructor\r\n *\r\n * @param {Viewer|CesiumWidget} viewerCesiumWidget The Viewer or CesiumWidget instance\r\n */\r\nvar CesiumNavigation = function (viewerCesiumWidget) {\r\n  initialize.apply(this, arguments)\r\n\r\n  this._onDestroyListeners = []\r\n}\r\n\r\nCesiumNavigation.prototype.distanceLegendViewModel = undefined\r\nCesiumNavigation.prototype.navigationViewModel = undefined\r\nCesiumNavigation.prototype.navigationDiv = undefined\r\nCesiumNavigation.prototype.distanceLegendDiv = undefined\r\nCesiumNavigation.prototype.terria = undefined\r\nCesiumNavigation.prototype.container = undefined\r\nCesiumNavigation.prototype._onDestroyListeners = undefined\r\nCesiumNavigation.prototype._navigationLocked = false\r\n\r\nCesiumNavigation.prototype.setNavigationLocked = function (locked) {\r\n  this._navigationLocked = locked\r\n  this.navigationViewModel.setNavigationLocked(this._navigationLocked)\r\n}\r\n\r\nCesiumNavigation.prototype.getNavigationLocked = function () {\r\n  return this._navigationLocked\r\n}\r\n\r\nCesiumNavigation.prototype.destroy = function () {\r\n  if (defined(this.navigationViewModel)) {\r\n    this.navigationViewModel.destroy()\r\n  }\r\n  if (defined(this.distanceLegendViewModel)) {\r\n    this.distanceLegendViewModel.destroy()\r\n  }\r\n\r\n  if (defined(this.navigationDiv)) {\r\n    this.navigationDiv.parentNode.removeChild(this.navigationDiv)\r\n  }\r\n  delete this.navigationDiv\r\n\r\n  if (defined(this.distanceLegendDiv)) {\r\n    this.distanceLegendDiv.parentNode.removeChild(this.distanceLegendDiv)\r\n  }\r\n  delete this.distanceLegendDiv\r\n\r\n  if (defined(this.container)) {\r\n    this.container.parentNode.removeChild(this.container)\r\n  }\r\n  delete this.container\r\n\r\n  for (var i = 0; i < this._onDestroyListeners.length; i++) {\r\n    this._onDestroyListeners[i]()\r\n  }\r\n}\r\n\r\nCesiumNavigation.prototype.addOnDestroyListener = function (callback) {\r\n  if (typeof callback === 'function') {\r\n    this._onDestroyListeners.push(callback)\r\n  }\r\n}\r\n\r\n/**\r\n * @param {Viewer|CesiumWidget} viewerCesiumWidget The Viewer or CesiumWidget instance\r\n * @param options\r\n */\r\nfunction initialize (viewerCesiumWidget, options) {\r\n  if (!defined(viewerCesiumWidget)) {\r\n    throw new DeveloperError('CesiumWidget or Viewer is required.')\r\n  }\r\n\r\n  //        options = defaultValue(options, defaultValue.EMPTY_OBJECT);\r\n\r\n  var cesiumWidget = defined(viewerCesiumWidget.cesiumWidget) ? viewerCesiumWidget.cesiumWidget : viewerCesiumWidget\r\n\r\n  var container = document.createElement('div')\r\n  container.className = 'cesium-widget-cesiumNavigationContainer'\r\n  cesiumWidget.container.appendChild(container)\r\n\r\n  this.terria = viewerCesiumWidget\r\n  this.terria.options = (defined(options)) ? options : {}\r\n  this.terria.afterWidgetChanged = new CesiumEvent()\r\n  this.terria.beforeWidgetChanged = new CesiumEvent()\r\n  this.container = container\r\n\r\n  // this.navigationDiv.setAttribute(\"id\", \"navigationDiv\");\r\n\r\n  // Register custom Knockout.js bindings.  If you're not using the TerriaJS user interface, you can remove this.\r\n  // registerKnockoutBindings()\r\n\r\n  if (!defined(this.terria.options.enableDistanceLegend) || this.terria.options.enableDistanceLegend) {\r\n    this.distanceLegendDiv = document.createElement('div')\r\n    container.appendChild(this.distanceLegendDiv)\r\n    this.distanceLegendDiv.setAttribute('id', 'distanceLegendDiv')\r\n    this.distanceLegendViewModel = DistanceLegendViewModel.create({\r\n      container: this.distanceLegendDiv,\r\n      terria: this.terria,\r\n      mapElement: container,\r\n      enableDistanceLegend: true\r\n    })\r\n  }\r\n\r\n  if ((!defined(this.terria.options.enableZoomControls) || this.terria.options.enableZoomControls) && (!defined(this.terria.options.enableCompass) || this.terria.options.enableCompass)) {\r\n    this.navigationDiv = document.createElement('div')\r\n    this.navigationDiv.setAttribute('id', 'navigationDiv')\r\n    container.appendChild(this.navigationDiv)\r\n    // Create the navigation controls.\r\n    this.navigationViewModel = NavigationViewModel.create({\r\n      container: this.navigationDiv,\r\n      terria: this.terria,\r\n      enableZoomControls: true,\r\n      enableCompass: true\r\n    })\r\n  } else if ((defined(this.terria.options.enableZoomControls) && !this.terria.options.enableZoomControls) && (!defined(this.terria.options.enableCompass) || this.terria.options.enableCompass)) {\r\n    this.navigationDiv = document.createElement('div')\r\n    this.navigationDiv.setAttribute('id', 'navigationDiv')\r\n    container.appendChild(this.navigationDiv)\r\n    // Create the navigation controls.\r\n    this.navigationViewModel = NavigationViewModel.create({\r\n      container: this.navigationDiv,\r\n      terria: this.terria,\r\n      enableZoomControls: false,\r\n      enableCompass: true\r\n    })\r\n  } else if ((!defined(this.terria.options.enableZoomControls) || this.terria.options.enableZoomControls) && (defined(this.terria.options.enableCompass) && !this.terria.options.enableCompass)) {\r\n    this.navigationDiv = document.createElement('div')\r\n    this.navigationDiv.setAttribute('id', 'navigationDiv')\r\n    container.appendChild(this.navigationDiv)\r\n    // Create the navigation controls.\r\n    this.navigationViewModel = NavigationViewModel.create({\r\n      container: this.navigationDiv,\r\n      terria: this.terria,\r\n      enableZoomControls: true,\r\n      enableCompass: false\r\n    })\r\n  } else if ((defined(this.terria.options.enableZoomControls) && !this.terria.options.enableZoomControls) && (defined(this.terria.options.enableCompass) && !this.terria.options.enableCompass)) {\r\n    // this.navigationDiv.setAttribute(\"id\", \"navigationDiv\");\r\n    // container.appendChild(this.navigationDiv);\r\n    // Create the navigation controls.\r\n    //            this.navigationViewModel = NavigationViewModel.create({\r\n    //                container: this.navigationDiv,\r\n    //                terria: this.terria,\r\n    //                enableZoomControls: false,\r\n    //                enableCompass: false\r\n    //            });\r\n  }\r\n}\r\n\r\nexport default CesiumNavigation\r\n"],"names":["window","Cesium","global","require$$0","require$$1","document","require$$2","dP","$toString","TO_STRING","DESCRIPTORS","createFragmentFromTemplate","htmlString","holder","createElement","innerHTML","fragment","createDocumentFragment","firstChild","appendChild","getElement","Knockout","knockout","loadView","container","viewModel","nodes","i","childNodes","length","push","node","nodeType","applyBindings","defined","DeveloperError","EllipsoidGeodesic","Cartesian2","getTimestamp","EventHelper","DistanceLegendViewModel","options","terria","_removeSubscription","undefined","_lastLegendUpdate","eventHelper","distanceLabel","barWidth","enableDistanceLegend","track","add","afterWidgetChanged","that","addUpdateSubscription","scene","postRender","addEventListener","updateDistanceLegendCesium","prototype","destroy","removeAll","show","testing","create","result","geodesic","distances","now","width","canvas","clientWidth","height","clientHeight","left","camera","getPickRay","right","globe","leftPosition","pick","rightPosition","leftCartographic","ellipsoid","cartesianToCartographic","rightCartographic","setEndPoints","pixelDistance","surfaceDistance","maxBarWidth","distance","label","toString","min","IE_PROTO","PROTOTYPE","dPs","$export","svgReset","defineProperties","UserInterfaceControl","_terria","name","text","svgIcon","svgHeight","svgWidth","cssClass","isActive","Object","get","hasText","activate","NavigationControl","apply","arguments","Camera","Rectangle","Cartographic","ResetViewNavigationControl","navigationLocked","setNavigationLocked","locked","resetView","sscc","screenSpaceCameraController","enableInputs","trackedEntity","defaultResetView","flyTo","destination","cartographicToCartesian","validate","orientation","heading","Math","toRadians","e","console","log","flyHome","DEFAULT_VIEW_RECTANGLE","Ray","Cartesian3","ReferenceFrame","SceneMode","Utils","unprojectedScratch","rayScratch","getCameraFocus","inWorldCoordinates","mode","MORPHING","position","getValue","clock","currentTime","origin","positionWC","direction","directionWC","SCENE2D","COLUMBUS_VIEW","worldToCameraCoordinatesPoint","mapProjection","unproject","IntersectionTests","ZoomNavigationControl","zoomIn","relativeAmount","zoom","cartesian3Scratch","enableZoom","positionCartographic","focus","ray","grazingAltitudeLocation","pitch","roll","up","subtract","movementVector","multiplyByScalar","endPosition","duration","convert","svgCompassOuterRing","svgCompassGyro","svgCompassRotationMarker","CesiumMath","Transforms","Matrix4","BoundingSphere","HeadingPitchRange","NavigationViewModel","enableZoomControls","enableCompass","controls","showCompass","isOrbiting","orbitCursorAngle","orbitCursorOpacity","orbitLastTimestamp","orbitFrame","orbitIsLook","orbitMouseMoveFunction","orbitMouseUpFunction","isRotating","rotateInitialCursorAngle","rotateFrame","rotateIsLook","rotateMouseMoveFunction","rotateMouseUpFunction","_unsubcribeFromPostRender","widgetChange","control","remove","isLastControl","vectorScratch","handleMouseDown","compassElement","currentTarget","compassRectangle","getBoundingClientRect","maxDistance","center","bottom","top","clickLocation","clientX","clientY","vector","distanceFromCenter","magnitude","distanceFraction","nominalTotalRadius","norminalGyroRadius","orbit","rotate","oldTransformScratch","newTransformScratch","centerScratch","handleDoubleClick","enableTranslate","SCENE3D","enableLook","enableRotate","cameraPosition","surfaceNormal","geodeticSurfaceNormal","focusBoundingSphere","flyToBoundingSphere","offset","PI_OVER_TWO","angleBetween","cursorVector","enableTilt","removeEventListener","orbitTickFunction","onTick","eastNorthUpToFixedFrame","timestamp","deltaT","rate","angle","x","cos","y","sin","oldTransform","clone","transform","lookAtTransform","move","max","look","UNIT_Z","rotateLeft","rotateUp","updateAngleAndOpacity","compassWidth","atan2","zeroToTwoPi","easedOpacity","viewCenter","rotateInitialCameraAngle","angleDifference","newCameraAngle","currentCameraAngle","rotateRight","definedProperties","CesiumEvent","Event","CesiumNavigation","viewerCesiumWidget","initialize","_onDestroyListeners","distanceLegendViewModel","navigationViewModel","navigationDiv","distanceLegendDiv","_navigationLocked","getNavigationLocked","parentNode","removeChild","addOnDestroyListener","callback","cesiumWidget","className","beforeWidgetChanged","setAttribute","mapElement"],"mappings":";;;;;;AAAA,eAAeA,MAAM,CAACC,MAAM;;ECA5B,IAAI,QAAQ,GAAG,EAAE,CAAC,QAAQ,CAAC;;EAE3B,QAAc,GAAG,UAAU,EAAE,EAAE;IAC7B,OAAO,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;GACvC,CAAC;;;;;;;;;;;;;ECJF,IAAI,IAAI,GAAG,cAAc,GAAG,EAAE,OAAO,EAAE,QAAQ,EAAE,CAAC;EAClD,IAAI,OAAO,GAAG,IAAI,QAAQ,EAAE,GAAG,GAAG,IAAI,CAAC;;;;;;;;;;;;ECDvC;EACA,IAAI,MAAM,GAAG,cAAc,GAAG,OAAO,MAAM,IAAI,WAAW,IAAI,MAAM,CAAC,IAAI,IAAI,IAAI;MAC7E,MAAM,GAAG,OAAO,IAAI,IAAI,WAAW,IAAI,IAAI,CAAC,IAAI,IAAI,IAAI,GAAG,IAAI;;MAE/D,QAAQ,CAAC,aAAa,CAAC,EAAE,CAAC;EAC9B,IAAI,OAAO,GAAG,IAAI,QAAQ,EAAE,GAAG,GAAG,MAAM,CAAC;;;;;;;;;ECLzC,YAAc,GAAG,KAAK,CAAC;;;;;;;;;;;;;;;ECEvB,IAAI,MAAM,GAAG,oBAAoB,CAAC;EAClC,IAAI,KAAK,GAAGC,UAAM,CAAC,MAAM,CAAC,KAAKA,UAAM,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC,CAAC;;EAEpD,CAAC,cAAc,GAAG,UAAU,GAAG,EAAE,KAAK,EAAE;IACtC,OAAO,KAAK,CAAC,GAAG,CAAC,KAAK,KAAK,CAAC,GAAG,CAAC,GAAG,KAAK,KAAK,SAAS,GAAG,KAAK,GAAG,EAAE,CAAC,CAAC;GACtE,EAAE,UAAU,EAAE,EAAE,CAAC,CAAC,IAAI,CAAC;IACtB,OAAO,EAAE,IAAI,CAAC,OAAO;IACrB,IAAI,EAAEC,YAAqB,GAAG,MAAM,GAAG,QAAQ;IAC/C,SAAS,EAAE,sCAAsC;GAClD,CAAC,CAAC;;;;;;;;;ECXH,IAAI,EAAE,GAAG,CAAC,CAAC;EACX,IAAI,EAAE,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC;EACvB,QAAc,GAAG,UAAU,GAAG,EAAE;IAC9B,OAAO,SAAS,CAAC,MAAM,CAAC,GAAG,KAAK,SAAS,GAAG,EAAE,GAAG,GAAG,EAAE,IAAI,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;GACvF,CAAC;;;;;;;;;;;;;ECJF,IAAI,KAAK,GAAGA,YAAoB,CAAC,KAAK,CAAC,CAAC;AACxC;EACA,IAAI,MAAM,GAAGC,UAAoB,CAAC,MAAM,CAAC;EACzC,IAAI,UAAU,GAAG,OAAO,MAAM,IAAI,UAAU,CAAC;;EAE7C,IAAI,QAAQ,GAAG,cAAc,GAAG,UAAU,IAAI,EAAE;IAC9C,OAAO,KAAK,CAAC,IAAI,CAAC,KAAK,KAAK,CAAC,IAAI,CAAC;MAChC,UAAU,IAAI,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,GAAG,MAAM,GAAG,GAAG,EAAE,SAAS,GAAG,IAAI,CAAC,CAAC,CAAC;GAChF,CAAC;;EAEF,QAAQ,CAAC,KAAK,GAAG,KAAK,CAAC;;;;;;;;;;;;;ECVvB;AACA;EACA,IAAI,GAAG,GAAGD,YAAiB,CAAC,aAAa,CAAC,CAAC;;EAE3C,IAAI,GAAG,GAAG,GAAG,CAAC,YAAY,EAAE,OAAO,SAAS,CAAC,EAAE,EAAE,CAAC,IAAI,WAAW,CAAC;;;EAGlE,IAAI,MAAM,GAAG,UAAU,EAAE,EAAE,GAAG,EAAE;IAC9B,IAAI;MACF,OAAO,EAAE,CAAC,GAAG,CAAC,CAAC;KAChB,CAAC,OAAO,CAAC,EAAE,eAAe;GAC5B,CAAC;;EAEF,YAAc,GAAG,UAAU,EAAE,EAAE;IAC7B,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IACZ,OAAO,EAAE,KAAK,SAAS,GAAG,WAAW,GAAG,EAAE,KAAK,IAAI,GAAG,MAAM;;QAExD,QAAQ,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC,IAAI,QAAQ,GAAG,CAAC;;QAExD,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC;;QAEZ,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,KAAK,QAAQ,IAAI,OAAO,CAAC,CAAC,MAAM,IAAI,UAAU,GAAG,WAAW,GAAG,CAAC,CAAC;GACjF,CAAC;;;;;;;;ECtBF,aAAc,GAAG,UAAU,EAAE,EAAE;IAC7B,OAAO,OAAO,EAAE,KAAK,QAAQ,GAAG,EAAE,KAAK,IAAI,GAAG,OAAO,EAAE,KAAK,UAAU,CAAC;GACxE,CAAC;;;;;;;;;;ECDF,aAAc,GAAG,UAAU,EAAE,EAAE;IAC7B,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,EAAE,MAAM,SAAS,CAAC,EAAE,GAAG,oBAAoB,CAAC,CAAC;IAC9D,OAAO,EAAE,CAAC;GACX,CAAC;;;;;;;;ECJF,UAAc,GAAG,UAAU,IAAI,EAAE;IAC/B,IAAI;MACF,OAAO,CAAC,CAAC,IAAI,EAAE,CAAC;KACjB,CAAC,OAAO,CAAC,EAAE;MACV,OAAO,IAAI,CAAC;KACb;GACF,CAAC;;;;;;;;;;ECNF;EACA,gBAAc,GAAG,CAACA,UAAmB,CAAC,YAAY;IAChD,OAAO,MAAM,CAAC,cAAc,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,YAAY,EAAE,OAAO,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;GAClF,CAAC,CAAC;;;;;;;;ECFH,IAAIE,UAAQ,GAAG,UAAoB,CAAC,QAAQ,CAAC;;EAE7C,IAAI,EAAE,GAAG,QAAQ,CAACA,UAAQ,CAAC,IAAI,QAAQ,CAACA,UAAQ,CAAC,aAAa,CAAC,CAAC;EAChE,cAAc,GAAG,UAAU,EAAE,EAAE;IAC7B,OAAO,EAAE,GAAGA,UAAQ,CAAC,aAAa,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC;GAC7C,CAAC;;;;;;;;;;;;ECNF,iBAAc,GAAG,CAACF,YAAyB,IAAI,CAACC,UAAmB,CAAC,YAAY;IAC9E,OAAO,MAAM,CAAC,cAAc,CAACE,UAAwB,CAAC,KAAK,CAAC,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,YAAY,EAAE,OAAO,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;GAC/G,CAAC,CAAC;;;;;;;;ECFH;AACA;;;EAGA,gBAAc,GAAG,UAAU,EAAE,EAAE,CAAC,EAAE;IAChC,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC;IAC7B,IAAI,EAAE,EAAE,GAAG,CAAC;IACZ,IAAI,CAAC,IAAI,QAAQ,EAAE,GAAG,EAAE,CAAC,QAAQ,CAAC,IAAI,UAAU,IAAI,CAAC,QAAQ,CAAC,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,EAAE,OAAO,GAAG,CAAC;IAC7F,IAAI,QAAQ,EAAE,GAAG,EAAE,CAAC,OAAO,CAAC,IAAI,UAAU,IAAI,CAAC,QAAQ,CAAC,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,EAAE,OAAO,GAAG,CAAC;IACvF,IAAI,CAAC,CAAC,IAAI,QAAQ,EAAE,GAAG,EAAE,CAAC,QAAQ,CAAC,IAAI,UAAU,IAAI,CAAC,QAAQ,CAAC,GAAG,GAAG,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,EAAE,OAAO,GAAG,CAAC;IAC9F,MAAM,SAAS,CAAC,yCAAyC,CAAC,CAAC;GAC5D,CAAC;;;;;;;;;;;;;;ECRF,IAAI,EAAE,GAAG,MAAM,CAAC,cAAc,CAAC;;EAE/B,KAAS,GAAGH,YAAyB,GAAG,MAAM,CAAC,cAAc,GAAG,SAAS,cAAc,CAAC,CAAC,EAAE,CAAC,EAAE,UAAU,EAAE;IACxG,QAAQ,CAAC,CAAC,CAAC,CAAC;IACZ,CAAC,GAAG,WAAW,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;IACzB,QAAQ,CAAC,UAAU,CAAC,CAAC;IACrB,IAAI,cAAc,EAAE,IAAI;MACtB,OAAO,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,UAAU,CAAC,CAAC;KAC7B,CAAC,OAAO,CAAC,EAAE,eAAe;IAC3B,IAAI,KAAK,IAAI,UAAU,IAAI,KAAK,IAAI,UAAU,EAAE,MAAM,SAAS,CAAC,0BAA0B,CAAC,CAAC;IAC5F,IAAI,OAAO,IAAI,UAAU,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,UAAU,CAAC,KAAK,CAAC;IACnD,OAAO,CAAC,CAAC;GACV,CAAC;;;;;;;;;;;;;ECfF,iBAAc,GAAG,UAAU,MAAM,EAAE,KAAK,EAAE;IACxC,OAAO;MACL,UAAU,EAAE,EAAE,MAAM,GAAG,CAAC,CAAC;MACzB,YAAY,EAAE,EAAE,MAAM,GAAG,CAAC,CAAC;MAC3B,QAAQ,EAAE,EAAE,MAAM,GAAG,CAAC,CAAC;MACvB,KAAK,EAAE,KAAK;KACb,CAAC;GACH,CAAC;;;;;;;;;;;;ECLF,SAAc,GAAGA,YAAyB,GAAG,UAAU,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE;IACzE,OAAOI,IAAE,CAAC,CAAC,CAAC,MAAM,EAAE,GAAG,EAAE,UAAU,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC;GAChD,GAAG,UAAU,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE;IAChC,MAAM,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;IACpB,OAAO,MAAM,CAAC;GACf,CAAC;;;;;;;;ECPF,IAAI,cAAc,GAAG,EAAE,CAAC,cAAc,CAAC;EACvC,QAAc,GAAG,UAAU,EAAE,EAAE,GAAG,EAAE;IAClC,OAAO,cAAc,CAAC,IAAI,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC;GACrC,CAAC;;;;;;;;ECHF,qBAAc,GAAGJ,YAAoB,CAAC,2BAA2B,EAAE,QAAQ,CAAC,QAAQ,CAAC,CAAC;;;;;;;;;;;;;;;ECGtF,IAAI,GAAG,GAAGA,GAAiB,CAAC,KAAK,CAAC,CAAC;AACnC;EACA,IAAI,SAAS,GAAG,UAAU,CAAC;EAC3B,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,SAAS,EAAE,KAAK,CAAC,SAAS,CAAC,CAAC;;AAE5CC,MAAkB,CAAC,aAAa,GAAG,UAAU,EAAE,EAAE;IAC/C,OAAO,SAAS,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;GAC3B,CAAC;;EAEF,CAAC,cAAc,GAAG,UAAU,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE;IAC7C,IAAI,UAAU,GAAG,OAAO,GAAG,IAAI,UAAU,CAAC;IAC1C,IAAI,UAAU,EAAE,GAAG,CAAC,GAAG,EAAE,MAAM,CAAC,IAAI,IAAI,CAAC,GAAG,EAAE,MAAM,EAAE,GAAG,CAAC,CAAC;IAC3D,IAAI,CAAC,CAAC,GAAG,CAAC,KAAK,GAAG,EAAE,OAAO;IAC3B,IAAI,UAAU,EAAE,GAAG,CAAC,GAAG,EAAE,GAAG,CAAC,IAAI,IAAI,CAAC,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IAC9F,IAAI,CAAC,KAAKF,UAAM,EAAE;MAChB,CAAC,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC;KACd,MAAM,IAAI,CAAC,IAAI,EAAE;MAChB,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC;MACd,IAAI,CAAC,CAAC,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;KACnB,MAAM,IAAI,CAAC,CAAC,GAAG,CAAC,EAAE;MACjB,CAAC,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC;KACd,MAAM;MACL,IAAI,CAAC,CAAC,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;KACnB;;GAEF,EAAE,QAAQ,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,QAAQ,GAAG;IACpD,OAAO,OAAO,IAAI,IAAI,UAAU,IAAI,IAAI,CAAC,GAAG,CAAC,IAAI,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;GACvE,CAAC,CAAC;;;;;;;;;;;;;;AC5BH;EACA,IAAI,IAAI,GAAG,EAAE,CAAC;EACd,IAAI,CAACC,YAAiB,CAAC,aAAa,CAAC,CAAC,GAAG,GAAG,CAAC;EAC7C,IAAI,IAAI,GAAG,EAAE,IAAI,YAAY,EAAE;IAC7BC,QAAsB,CAAC,MAAM,CAAC,SAAS,EAAE,UAAU,EAAE,SAAS,QAAQ,GAAG;MACvE,OAAO,UAAU,GAAG,OAAO,CAAC,IAAI,CAAC,GAAG,GAAG,CAAC;KACzC,EAAE,IAAI,CAAC,CAAC;GACV;;ECTD,IAAI,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;EAC/B,IAAI,YAAY,GAAG,cAAc,CAAC;EAClC,IAAI,SAAS,GAAG,UAAU,CAAC;EAC3B,IAAII,WAAS,GAAG,SAAS,CAAC,SAAS,CAAC,CAAC;EACrC,IAAI,OAAO,GAAG,SAAS,CAAC,OAAO,CAAC;EAChC,IAAI,IAAI,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,YAAY,EAAE;IACtCL,QAAsB,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,QAAQ,GAAG;MAC/D,IAAI,KAAK,GAAG,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;;MAE/B,OAAO,KAAK,KAAK,KAAK,GAAGK,WAAS,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,YAAY,CAAC;KAC9D,CAAC,CAAC;GACJ;;;ACTD;EACA,UAAc,GAAG,YAAY;IAC3B,IAAI,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC;IAC1B,IAAI,MAAM,GAAG,EAAE,CAAC;IAChB,IAAI,IAAI,CAAC,MAAM,EAAE,MAAM,IAAI,GAAG,CAAC;IAC/B,IAAI,IAAI,CAAC,UAAU,EAAE,MAAM,IAAI,GAAG,CAAC;IACnC,IAAI,IAAI,CAAC,SAAS,EAAE,MAAM,IAAI,GAAG,CAAC;IAClC,IAAI,IAAI,CAAC,OAAO,EAAE,MAAM,IAAI,GAAG,CAAC;IAChC,IAAI,IAAI,CAAC,MAAM,EAAE,MAAM,IAAI,GAAG,CAAC;IAC/B,OAAO,MAAM,CAAC;GACf,CAAC;;;;;;;;;;ECZF;EACA,IAAIL,YAAyB,IAAI,IAAI,CAAC,KAAK,IAAI,GAAG,EAAEC,IAAuB,CAAC,CAAC,CAAC,MAAM,CAAC,SAAS,EAAE,OAAO,EAAE;IACvG,YAAY,EAAE,IAAI;IAClB,GAAG,EAAEE,MAAmB;GACzB,CAAC,CAAC;;ECCH,IAAIG,WAAS,GAAG,UAAU,CAAC;EAC3B,IAAID,WAAS,GAAG,GAAG,CAACC,WAAS,CAAC,CAAC;;EAE/B,IAAI,MAAM,GAAG,UAAU,EAAE,EAAE;IACzBL,QAAsB,CAAC,MAAM,CAAC,SAAS,EAAEK,WAAS,EAAE,EAAE,EAAE,IAAI,CAAC,CAAC;GAC/D,CAAC;;;EAGF,IAAI,UAAmB,CAAC,YAAY,EAAE,OAAOD,WAAS,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE,GAAG,EAAE,CAAC,IAAI,MAAM,CAAC,EAAE,CAAC,EAAE;IACtG,MAAM,CAAC,SAAS,QAAQ,GAAG;MACzB,IAAI,CAAC,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC;MACvB,OAAO,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,MAAM,EAAE,GAAG;QAC7B,OAAO,IAAI,CAAC,GAAG,CAAC,CAAC,KAAK,GAAG,CAACE,YAAW,IAAI,CAAC,YAAY,MAAM,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC;KAC9F,CAAC,CAAC;;GAEJ,MAAM,IAAIF,WAAS,CAAC,IAAI,IAAIC,WAAS,EAAE;IACtC,MAAM,CAAC,SAAS,QAAQ,GAAG;MACzB,OAAOD,WAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;KAC7B,CAAC,CAAC;GACJ;;ECvBD,IAAMG,0BAA0B,GAAG,SAA7BA,0BAA0B,CAAaC,UAAU,EAAE;IACvD,IAAIC,MAAM,GAAGR,QAAQ,CAACS,aAAa,CAAC,KAAK,CAAC;IAC1CD,MAAM,CAACE,SAAS,GAAGH,UAAU;IAC7B,IAAII,QAAQ,GAAGX,QAAQ,CAACY,sBAAsB,EAAE;IAChD,OAAOJ,MAAM,CAACK,UAAU,EAAE;MACxBF,QAAQ,CAACG,WAAW,CAACN,MAAM,CAACK,UAAU,CAAC;;IAGzC,OAAOF,QAAQ;EACjB,CAAC;;ECVD;AACA,EAEA,IAAII,UAAU,GAAGnB,MAAM,CAACmB,UAAU;EAClC,IAAIC,QAAQ,GAAGpB,MAAM,CAACqB,QAAQ;EAE9B,IAAIC,QAAQ,GAAG,SAAXA,QAAQ,CAAaX,UAAU,EAAEY,SAAS,EAAEC,SAAS,EAAE;IACzDD,SAAS,GAAGJ,UAAU,CAACI,SAAS,CAAC;IAEjC,IAAIR,QAAQ,GAAGL,0BAA0B,CAACC,UAAU,CAAC;;;;;IAKrD,IAAIc,KAAK,GAAG,EAAE;IAEd,IAAIC,CAAC;IACL,KAAKA,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGX,QAAQ,CAACY,UAAU,CAACC,MAAM,EAAE,EAAEF,CAAC,EAAE;MAC/CD,KAAK,CAACI,IAAI,CAACd,QAAQ,CAACY,UAAU,CAACD,CAAC,CAAC,CAAC;;IAGpCH,SAAS,CAACL,WAAW,CAACH,QAAQ,CAAC;IAE/B,KAAKW,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,KAAK,CAACG,MAAM,EAAE,EAAEF,CAAC,EAAE;MACjC,IAAII,IAAI,GAAGL,KAAK,CAACC,CAAC,CAAC;MACnB,IAAII,IAAI,CAACC,QAAQ,KAAK,CAAC,IAAID,IAAI,CAACC,QAAQ,KAAK,CAAC,EAAE;QAC9CX,QAAQ,CAACY,aAAa,CAACR,SAAS,EAAEM,IAAI,CAAC;;;IAI3C,OAAOL,KAAK;EACd,CAAC;;EC5BD,IAAIQ,OAAO,GAAGjC,MAAM,CAACiC,OAAO;EAC5B,IAAIC,cAAc,GAAGlC,MAAM,CAACkC,cAAc;EAC1C,IAAIC,iBAAiB,GAAGnC,MAAM,CAACmC,iBAAiB;EAChD,IAAIC,UAAU,GAAGpC,MAAM,CAACoC,UAAU;EAClC,IAAIC,YAAY,GAAGrC,MAAM,CAACqC,YAAY;EACtC,IAAIC,WAAW,GAAGtC,MAAM,CAACsC,WAAW;EACpC,IAAIlB,UAAQ,GAAGpB,MAAM,CAACqB,QAAQ;EAE9B,IAAIkB,uBAAuB,GAAG,SAA1BA,uBAAuB,CAAaC,OAAO,EAAE;IAC/C,IAAI,CAACP,OAAO,CAACO,OAAO,CAAC,IAAI,CAACP,OAAO,CAACO,OAAO,CAACC,MAAM,CAAC,EAAE;MACjD,MAAM,IAAIP,cAAc,CAAC,6BAA6B,CAAC;;IAGzD,IAAI,CAACO,MAAM,GAAGD,OAAO,CAACC,MAAM;IAC5B,IAAI,CAACC,mBAAmB,GAAGC,SAAS;IACpC,IAAI,CAACC,iBAAiB,GAAGD,SAAS;IAClC,IAAI,CAACE,WAAW,GAAG,IAAIP,WAAW,EAAE;IAEpC,IAAI,CAACQ,aAAa,GAAGH,SAAS;IAC9B,IAAI,CAACI,QAAQ,GAAGJ,SAAS;IAEzB,IAAI,CAACK,oBAAoB,GAAIf,OAAO,CAACO,OAAO,CAACQ,oBAAoB,CAAC,GAAIR,OAAO,CAACQ,oBAAoB,GAAG,IAAI;IAEzG5B,UAAQ,CAAC6B,KAAK,CAAC,IAAI,EAAE,CAAC,eAAe,EAAE,UAAU,CAAC,CAAC;IAEnD,IAAI,CAACJ,WAAW,CAACK,GAAG,CAAC,IAAI,CAACT,MAAM,CAACU,kBAAkB,EAAE,YAAY;MAC/D,IAAIlB,OAAO,CAAC,IAAI,CAACS,mBAAmB,CAAC,EAAE;QACrC,IAAI,CAACA,mBAAmB,EAAE;QAC1B,IAAI,CAACA,mBAAmB,GAAGC,SAAS;;KAEvC,EAAE,IAAI,CAAC;;;;;;;;IAQR,IAAIS,IAAI,GAAG,IAAI;IAEf,SAASC,qBAAqB,GAAI;MAChC,IAAIpB,OAAO,CAACmB,IAAI,CAACX,MAAM,CAAC,EAAE;QACxB,IAAIa,KAAK,GAAGF,IAAI,CAACX,MAAM,CAACa,KAAK;QAC7BF,IAAI,CAACV,mBAAmB,GAAGY,KAAK,CAACC,UAAU,CAACC,gBAAgB,CAAC,YAAY;UACvEC,0BAA0B,CAAC,IAAI,EAAEH,KAAK,CAAC;SACxC,EAAEF,IAAI,CAAC;;;IAIZC,qBAAqB,EAAE;IACvB,IAAI,CAACR,WAAW,CAACK,GAAG,CAAC,IAAI,CAACT,MAAM,CAACU,kBAAkB,EAAE,YAAY;MAC/DE,qBAAqB,EAAE;KACxB,EAAE,IAAI,CAAC;;;;EAIV,CAAC;;EAEDd,uBAAuB,CAACmB,SAAS,CAACC,OAAO,GAAG,YAAY;IACtD,IAAI,CAACd,WAAW,CAACe,SAAS,EAAE;EAC9B,CAAC;EAEDrB,uBAAuB,CAACmB,SAAS,CAACG,IAAI,GAAG,UAAUtC,SAAS,EAAE;IAC5D,IAAIuC,OAAO;IACX,IAAI,IAAI,CAACd,oBAAoB,EAAE;MAC7Bc,OAAO,GAAG,8EAA8E,GACtF,2EAA2E,GAC3E,0IAA0I,GAC1I,QAAQ;KACX,MAAM;MACLA,OAAO,GAAG,sGAAsG,GAC9G,4EAA4E,GAC5E,2IAA2I,GAC3I,QAAQ;;IAEZxC,QAAQ,CAACwC,OAAO,EAAEvC,SAAS,EAAE,IAAI,CAAC;;;EAGpC,CAAC;;EAEDgB,uBAAuB,CAACwB,MAAM,GAAG,UAAUvB,OAAO,EAAE;IAClD,IAAIwB,MAAM,GAAG,IAAIzB,uBAAuB,CAACC,OAAO,CAAC;IACjDwB,MAAM,CAACH,IAAI,CAACrB,OAAO,CAACjB,SAAS,CAAC;IAC9B,OAAOyC,MAAM;EACf,CAAC;EAED,IAAIC,QAAQ,GAAG,IAAI9B,iBAAiB,EAAE;EAEtC,IAAI+B,SAAS,GAAG,CACd,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EACV,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EACd,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAClB,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EACtB,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAC1B,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAC9B,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAClC,QAAQ,EAAE,QAAQ,EAAE,QAAQ,EAAE,QAAQ,CAAC;EAEzC,SAAST,0BAA0B,CAAEjC,SAAS,EAAE8B,KAAK,EAAE;IACrD,IAAI,CAAC9B,SAAS,CAACwB,oBAAoB,EAAE;MACnCxB,SAAS,CAACuB,QAAQ,GAAGJ,SAAS;MAC9BnB,SAAS,CAACsB,aAAa,GAAGH,SAAS;MACnC;;IAEF,IAAIwB,GAAG,GAAG9B,YAAY,EAAE;IACxB,IAAI8B,GAAG,GAAG3C,SAAS,CAACoB,iBAAiB,GAAG,GAAG,EAAE;MAC3C;;IAGFpB,SAAS,CAACoB,iBAAiB,GAAGuB,GAAG;;;IAGjC,IAAIC,KAAK,GAAGd,KAAK,CAACe,MAAM,CAACC,WAAW;IACpC,IAAIC,MAAM,GAAGjB,KAAK,CAACe,MAAM,CAACG,YAAY;IAEtC,IAAIC,IAAI,GAAGnB,KAAK,CAACoB,MAAM,CAACC,UAAU,CAAC,IAAIvC,UAAU,CAAEgC,KAAK,GAAG,CAAC,GAAI,CAAC,EAAEG,MAAM,GAAG,CAAC,CAAC,CAAC;IAC/E,IAAIK,KAAK,GAAGtB,KAAK,CAACoB,MAAM,CAACC,UAAU,CAAC,IAAIvC,UAAU,CAAC,CAAC,GAAIgC,KAAK,GAAG,CAAE,GAAG,CAAC,EAAEG,MAAM,GAAG,CAAC,CAAC,CAAC;IAEpF,IAAIM,KAAK,GAAGvB,KAAK,CAACuB,KAAK;IACvB,IAAIC,YAAY,GAAGD,KAAK,CAACE,IAAI,CAACN,IAAI,EAAEnB,KAAK,CAAC;IAC1C,IAAI0B,aAAa,GAAGH,KAAK,CAACE,IAAI,CAACH,KAAK,EAAEtB,KAAK,CAAC;IAE5C,IAAI,CAACrB,OAAO,CAAC6C,YAAY,CAAC,IAAI,CAAC7C,OAAO,CAAC+C,aAAa,CAAC,EAAE;MACrDxD,SAAS,CAACuB,QAAQ,GAAGJ,SAAS;MAC9BnB,SAAS,CAACsB,aAAa,GAAGH,SAAS;MACnC;;IAGF,IAAIsC,gBAAgB,GAAGJ,KAAK,CAACK,SAAS,CAACC,uBAAuB,CAACL,YAAY,CAAC;IAC5E,IAAIM,iBAAiB,GAAGP,KAAK,CAACK,SAAS,CAACC,uBAAuB,CAACH,aAAa,CAAC;IAE9Ef,QAAQ,CAACoB,YAAY,CAACJ,gBAAgB,EAAEG,iBAAiB,CAAC;IAC1D,IAAIE,aAAa,GAAGrB,QAAQ,CAACsB,eAAe;;;IAG5C,IAAIC,WAAW,GAAG,GAAG;IACrB,IAAIC,QAAQ;IACZ,KAAK,IAAI/D,CAAC,GAAGwC,SAAS,CAACtC,MAAM,GAAG,CAAC,EAAE,CAACK,OAAO,CAACwD,QAAQ,CAAC,IAAI/D,CAAC,IAAI,CAAC,EAAE,EAAEA,CAAC,EAAE;MACpE,IAAIwC,SAAS,CAACxC,CAAC,CAAC,GAAG4D,aAAa,GAAGE,WAAW,EAAE;QAC9CC,QAAQ,GAAGvB,SAAS,CAACxC,CAAC,CAAC;;;IAI3B,IAAIO,OAAO,CAACwD,QAAQ,CAAC,EAAE;MACrB,IAAIC,KAAK;MACT,IAAID,QAAQ,IAAI,IAAI,EAAE;QACpBC,KAAK,GAAG,CAACD,QAAQ,GAAG,IAAI,EAAEE,QAAQ,EAAE,GAAG,KAAK;OAC7C,MAAM;QACLD,KAAK,GAAGD,QAAQ,CAACE,QAAQ,EAAE,GAAG,IAAI;;MAGpCnE,SAAS,CAACuB,QAAQ,GAAI0C,QAAQ,GAAGH,aAAa,GAAI,CAAC;MACnD9D,SAAS,CAACsB,aAAa,GAAG4C,KAAK;KAChC,MAAM;MACLlE,SAAS,CAACuB,QAAQ,GAAGJ,SAAS;MAC9BnB,SAAS,CAACsB,aAAa,GAAGH,SAAS;;EAEvC;;EChKA,IAAIrC,IAAE,GAAGJ,IAAuB,CAAC,CAAC,CAAC;EACnC,IAAI,MAAM,GAAG,QAAQ,CAAC,SAAS,CAAC;EAChC,IAAI,MAAM,GAAG,uBAAuB,CAAC;EACrC,IAAI,IAAI,GAAG,MAAM,CAAC;;;EAGlB,IAAI,IAAI,MAAM,IAAIC,YAAyB,IAAIG,IAAE,CAAC,MAAM,EAAE,IAAI,EAAE;IAC9D,YAAY,EAAE,IAAI;IAClB,GAAG,EAAE,YAAY;MACf,IAAI;QACF,OAAO,CAAC,EAAE,GAAG,IAAI,EAAE,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;OACrC,CAAC,OAAO,CAAC,EAAE;QACV,OAAO,EAAE,CAAC;OACX;KACF;GACF,CAAC,CAAC;;ECfH,cAAc,GAAG,UAAU,EAAE,EAAE;IAC7B,IAAI,OAAO,EAAE,IAAI,UAAU,EAAE,MAAM,SAAS,CAAC,EAAE,GAAG,qBAAqB,CAAC,CAAC;IACzE,OAAO,EAAE,CAAC;GACX,CAAC;;;;;;;;;;ECHF;AACA;EACA,QAAc,GAAG,UAAU,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE;IAC3C,SAAS,CAAC,EAAE,CAAC,CAAC;IACd,IAAI,IAAI,KAAK,SAAS,EAAE,OAAO,EAAE,CAAC;IAClC,QAAQ,MAAM;MACZ,KAAK,CAAC,EAAE,OAAO,UAAU,CAAC,EAAE;QAC1B,OAAO,EAAE,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;OACzB,CAAC;MACF,KAAK,CAAC,EAAE,OAAO,UAAU,CAAC,EAAE,CAAC,EAAE;QAC7B,OAAO,EAAE,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;OAC5B,CAAC;MACF,KAAK,CAAC,EAAE,OAAO,UAAU,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;QAChC,OAAO,EAAE,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;OAC/B,CAAC;KACH;IACD,OAAO,yBAAyB;MAC9B,OAAO,EAAE,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;KAClC,CAAC;GACH,CAAC;;;;;;;;;;ECdF,IAAI,SAAS,GAAG,WAAW,CAAC;;EAE5B,IAAI,OAAO,GAAG,UAAU,IAAI,EAAE,IAAI,EAAE,MAAM,EAAE;IAC1C,IAAI,SAAS,GAAG,IAAI,GAAG,OAAO,CAAC,CAAC,CAAC;IACjC,IAAI,SAAS,GAAG,IAAI,GAAG,OAAO,CAAC,CAAC,CAAC;IACjC,IAAI,SAAS,GAAG,IAAI,GAAG,OAAO,CAAC,CAAC,CAAC;IACjC,IAAI,QAAQ,GAAG,IAAI,GAAG,OAAO,CAAC,CAAC,CAAC;IAChC,IAAI,OAAO,GAAG,IAAI,GAAG,OAAO,CAAC,CAAC,CAAC;IAC/B,IAAI,MAAM,GAAG,SAAS,GAAGL,UAAM,GAAG,SAAS,GAAGA,UAAM,CAAC,IAAI,CAAC,KAAKA,UAAM,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,GAAG,CAACA,UAAM,CAAC,IAAI,CAAC,IAAI,EAAE,EAAE,SAAS,CAAC,CAAC;IACpH,IAAI,OAAO,GAAG,SAAS,GAAG,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC;IACjE,IAAI,QAAQ,GAAG,OAAO,CAAC,SAAS,CAAC,KAAK,OAAO,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,CAAC;IAC/D,IAAI,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;IACvB,IAAI,SAAS,EAAE,MAAM,GAAG,IAAI,CAAC;IAC7B,KAAK,GAAG,IAAI,MAAM,EAAE;;MAElB,GAAG,GAAG,CAAC,SAAS,IAAI,MAAM,IAAI,MAAM,CAAC,GAAG,CAAC,KAAK,SAAS,CAAC;;MAExD,GAAG,GAAG,CAAC,GAAG,GAAG,MAAM,GAAG,MAAM,EAAE,GAAG,CAAC,CAAC;;MAEnC,GAAG,GAAG,OAAO,IAAI,GAAG,GAAG,GAAG,CAAC,GAAG,EAAEA,UAAM,CAAC,GAAG,QAAQ,IAAI,OAAO,GAAG,IAAI,UAAU,GAAG,GAAG,CAAC,QAAQ,CAAC,IAAI,EAAE,GAAG,CAAC,GAAG,GAAG,CAAC;;MAE/G,IAAI,MAAM,EAAE,QAAQ,CAAC,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;;MAEzD,IAAI,OAAO,CAAC,GAAG,CAAC,IAAI,GAAG,EAAE,IAAI,CAAC,OAAO,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;MACjD,IAAI,QAAQ,IAAI,QAAQ,CAAC,GAAG,CAAC,IAAI,GAAG,EAAE,QAAQ,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC;KAC3D;GACF,CAAC;AACFA,YAAM,CAAC,IAAI,GAAG,IAAI,CAAC;;EAEnB,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC;EACd,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC;EACd,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC;EACd,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC;EACd,OAAO,CAAC,CAAC,GAAG,EAAE,CAAC;EACf,OAAO,CAAC,CAAC,GAAG,EAAE,CAAC;EACf,OAAO,CAAC,CAAC,GAAG,EAAE,CAAC;EACf,OAAO,CAAC,CAAC,GAAG,GAAG,CAAC;EAChB,WAAc,GAAG,OAAO,CAAC;;;;;;;;EC1CzB;AACA;;EAEA,YAAc,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC,oBAAoB,CAAC,CAAC,CAAC,GAAG,MAAM,GAAG,UAAU,EAAE,EAAE;IAC5E,OAAO,GAAG,CAAC,EAAE,CAAC,IAAI,QAAQ,GAAG,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,EAAE,CAAC,CAAC;GACxD,CAAC;;;;;;;;ECLF;EACA,YAAc,GAAG,UAAU,EAAE,EAAE;IAC7B,IAAI,EAAE,IAAI,SAAS,EAAE,MAAM,SAAS,CAAC,wBAAwB,GAAG,EAAE,CAAC,CAAC;IACpE,OAAO,EAAE,CAAC;GACX,CAAC;;;;;;;;;;;;ECJF;AACA;AACA;EACA,cAAc,GAAG,UAAU,EAAE,EAAE;IAC7B,OAAO,OAAO,CAACgC,SAAO,CAAC,EAAE,CAAC,CAAC,CAAC;GAC7B,CAAC;;;;;;;;ECLF;EACA,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;EACrB,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;EACvB,cAAc,GAAG,UAAU,EAAE,EAAE;IAC7B,OAAO,KAAK,CAAC,EAAE,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,GAAG,KAAK,GAAG,IAAI,EAAE,EAAE,CAAC,CAAC;GAC1D,CAAC;;;;;;;;;;ECLF;AACA;EACA,IAAI,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC;EACnB,aAAc,GAAG,UAAU,EAAE,EAAE;IAC7B,OAAO,EAAE,GAAG,CAAC,GAAG,GAAG,CAAC,SAAS,CAAC,EAAE,CAAC,EAAE,gBAAgB,CAAC,GAAG,CAAC,CAAC;GAC1D,CAAC;;;;;;;;ECJF,IAAI,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC;EACnB,IAAI2D,KAAG,GAAG,IAAI,CAAC,GAAG,CAAC;EACnB,oBAAc,GAAG,UAAU,KAAK,EAAE,MAAM,EAAE;IACxC,KAAK,GAAG,SAAS,CAAC,KAAK,CAAC,CAAC;IACzB,OAAO,KAAK,GAAG,CAAC,GAAG,GAAG,CAAC,KAAK,GAAG,MAAM,EAAE,CAAC,CAAC,GAAGA,KAAG,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;GAChE,CAAC;;;;;;;;;;;;;;ECNF;;AAEA;AACA;AACA;EACA,kBAAc,GAAG,UAAU,WAAW,EAAE;IACtC,OAAO,UAAU,KAAK,EAAE,EAAE,EAAE,SAAS,EAAE;MACrC,IAAI,CAAC,GAAG,SAAS,CAAC,KAAK,CAAC,CAAC;MACzB,IAAI,MAAM,GAAG,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;MAChC,IAAI,KAAK,GAAG,eAAe,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;MAC/C,IAAI,KAAK,CAAC;;;MAGV,IAAI,WAAW,IAAI,EAAE,IAAI,EAAE,EAAE,OAAO,MAAM,GAAG,KAAK,EAAE;QAClD,KAAK,GAAG,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC;;QAEnB,IAAI,KAAK,IAAI,KAAK,EAAE,OAAO,IAAI,CAAC;;OAEjC,MAAM,MAAM,MAAM,GAAG,KAAK,EAAE,KAAK,EAAE,EAAE,IAAI,WAAW,IAAI,KAAK,IAAI,CAAC,EAAE;QACnE,IAAI,CAAC,CAAC,KAAK,CAAC,KAAK,EAAE,EAAE,OAAO,WAAW,IAAI,KAAK,IAAI,CAAC,CAAC;OACvD,CAAC,OAAO,CAAC,WAAW,IAAI,CAAC,CAAC,CAAC;KAC7B,CAAC;GACH,CAAC;;;;;;;;ECtBF,IAAI,MAAM,GAAG1F,YAAoB,CAAC,MAAM,CAAC,CAAC;AAC1C;EACA,cAAc,GAAG,UAAU,GAAG,EAAE;IAC9B,OAAO,MAAM,CAAC,GAAG,CAAC,KAAK,MAAM,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;GAChD,CAAC;;;;;;;;;;;;ECFF,IAAI,YAAY,GAAGA,YAA4B,CAAC,KAAK,CAAC,CAAC;EACvD,IAAI,QAAQ,GAAGC,YAAwB,CAAC,UAAU,CAAC,CAAC;;EAEpD,uBAAc,GAAG,UAAU,MAAM,EAAE,KAAK,EAAE;IACxC,IAAI,CAAC,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC;IAC1B,IAAI,CAAC,GAAG,CAAC,CAAC;IACV,IAAI,MAAM,GAAG,EAAE,CAAC;IAChB,IAAI,GAAG,CAAC;IACR,KAAK,GAAG,IAAI,CAAC,EAAE,IAAI,GAAG,IAAI,QAAQ,EAAE,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,IAAI,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;;IAEpE,OAAO,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE,IAAI,GAAG,CAAC,CAAC,EAAE,GAAG,GAAG,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE;MACrD,CAAC,YAAY,CAAC,MAAM,EAAE,GAAG,CAAC,IAAI,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;KAChD;IACD,OAAO,MAAM,CAAC;GACf,CAAC;;;;;;;;EChBF;EACA,gBAAc,GAAG;IACf,+FAA+F;IAC/F,KAAK,CAAC,GAAG,CAAC,CAAC;;;;;;;;;;;;ECHb;AACA;AACA;;EAEA,eAAc,GAAG,MAAM,CAAC,IAAI,IAAI,SAAS,IAAI,CAAC,CAAC,EAAE;IAC/C,OAAO,KAAK,CAAC,CAAC,EAAE,WAAW,CAAC,CAAC;GAC9B,CAAC;;;;;;;;;;ECFF,cAAc,GAAGD,YAAyB,GAAG,MAAM,CAAC,gBAAgB,GAAG,SAAS,gBAAgB,CAAC,CAAC,EAAE,UAAU,EAAE;IAC9G,QAAQ,CAAC,CAAC,CAAC,CAAC;IACZ,IAAI,IAAI,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;IAC/B,IAAI,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;IACzB,IAAI,CAAC,GAAG,CAAC,CAAC;IACV,IAAI,CAAC,CAAC;IACN,OAAO,MAAM,GAAG,CAAC,EAAEI,IAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;IACzD,OAAO,CAAC,CAAC;GACV,CAAC;;;;;;;;ECZF,IAAIF,UAAQ,GAAG,UAAoB,CAAC,QAAQ,CAAC;EAC7C,SAAc,GAAGA,UAAQ,IAAIA,UAAQ,CAAC,eAAe,CAAC;;;;;;;;;;;;ECDtD;AACA;AACA;AACA;EACA,IAAIyF,UAAQ,GAAG3F,YAAwB,CAAC,UAAU,CAAC,CAAC;EACpD,IAAI,KAAK,GAAG,YAAY,eAAe,CAAC;EACxC,IAAI4F,WAAS,GAAG,WAAW,CAAC;;;EAG5B,IAAI,UAAU,GAAG,YAAY;;IAE3B,IAAI,MAAM,GAAG,UAAwB,CAAC,QAAQ,CAAC,CAAC;IAChD,IAAI,CAAC,GAAG,WAAW,CAAC,MAAM,CAAC;IAC3B,IAAI,EAAE,GAAG,GAAG,CAAC;IACb,IAAI,EAAE,GAAG,GAAG,CAAC;IACb,IAAI,cAAc,CAAC;IACnB,MAAM,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;IAC9BzF,YAAkB,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;IACvC,MAAM,CAAC,GAAG,GAAG,aAAa,CAAC;;;IAG3B,cAAc,GAAG,MAAM,CAAC,aAAa,CAAC,QAAQ,CAAC;IAC/C,cAAc,CAAC,IAAI,EAAE,CAAC;IACtB,cAAc,CAAC,KAAK,CAAC,EAAE,GAAG,QAAQ,GAAG,EAAE,GAAG,mBAAmB,GAAG,EAAE,GAAG,SAAS,GAAG,EAAE,CAAC,CAAC;IACrF,cAAc,CAAC,KAAK,EAAE,CAAC;IACvB,UAAU,GAAG,cAAc,CAAC,CAAC,CAAC;IAC9B,OAAO,CAAC,EAAE,EAAE,OAAO,UAAU,CAACyF,WAAS,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC;IACzD,OAAO,UAAU,EAAE,CAAC;GACrB,CAAC;;EAEF,iBAAc,GAAG,MAAM,CAAC,MAAM,IAAI,SAAS,MAAM,CAAC,CAAC,EAAE,UAAU,EAAE;IAC/D,IAAI,MAAM,CAAC;IACX,IAAI,CAAC,KAAK,IAAI,EAAE;MACd,KAAK,CAACA,WAAS,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;MAC/B,MAAM,GAAG,IAAI,KAAK,EAAE,CAAC;MACrB,KAAK,CAACA,WAAS,CAAC,GAAG,IAAI,CAAC;;MAExB,MAAM,CAACD,UAAQ,CAAC,GAAG,CAAC,CAAC;KACtB,MAAM,MAAM,GAAG,UAAU,EAAE,CAAC;IAC7B,OAAO,UAAU,KAAK,SAAS,GAAG,MAAM,GAAGE,YAAG,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC;GACpE,CAAC;;;;;;;;;;;;ECvCF;AACAC,WAAO,CAACA,SAAO,CAAC,CAAC,EAAE,QAAQ,EAAE,EAAE,MAAM,EAAE9F,YAA2B,EAAE,CAAC,CAAC;;ECFtE,IAAI+F,QAAQ,GAAG,oVAAoV;;ECCnW;AACAD,WAAO,CAACA,SAAO,CAAC,CAAC,GAAGA,SAAO,CAAC,CAAC,GAAG,CAAC9F,YAAyB,EAAE,QAAQ,EAAE,EAAE,gBAAgB,EAAEC,YAAwB,EAAE,CAAC,CAAC;;ECAtH,IAAI8B,SAAO,GAAGjC,MAAM,CAACiC,OAAO;EAC5B,IAAIiE,gBAAgB,GAAGlG,MAAM,CAACkG,gBAAgB;EAC9C,IAAIhE,gBAAc,GAAGlC,MAAM,CAACkC,cAAc;EAC1C,IAAId,UAAQ,GAAGpB,MAAM,CAACqB,QAAQ;EAC9B;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA,IAAI8E,oBAAoB,GAAG,SAAvBA,oBAAoB,CAAa1D,MAAM,EAAE;IAC3C,IAAI,CAACR,SAAO,CAACQ,MAAM,CAAC,EAAE;MACpB,MAAM,IAAIP,gBAAc,CAAC,oBAAoB,CAAC;;IAGhD,IAAI,CAACkE,OAAO,GAAG3D,MAAM;;;EAGvB;EACA;EACA;EACA;IACE,IAAI,CAAC4D,IAAI,GAAG,iBAAiB;;;EAG/B;EACA;EACA;EACA;IACE,IAAI,CAACC,IAAI,GAAG3D,SAAS;;;EAGvB;EACA;EACA;IACE,IAAI,CAAC4D,OAAO,GAAG5D,SAAS;;;EAG1B;EACA;EACA;IACE,IAAI,CAAC6D,SAAS,GAAG7D,SAAS;;;EAG5B;EACA;EACA;IACE,IAAI,CAAC8D,QAAQ,GAAG9D,SAAS;;;EAG3B;EACA;EACA;IACE,IAAI,CAAC+D,QAAQ,GAAG/D,SAAS;;;EAG3B;EACA;EACA;EACA;IACE,IAAI,CAACgE,QAAQ,GAAG,KAAK;IAErBvF,UAAQ,CAAC6B,KAAK,CAAC,IAAI,EAAE,CAAC,MAAM,EAAE,SAAS,EAAE,WAAW,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,CAAC,CAAC;EAC5F,CAAC;EAED2D,MAAM,CAACV,gBAAgB,CAACC,oBAAoB,CAACzC,SAAS,EAAE;;EAExD;EACA;EACA;EACA;IACGjB,MAAM,EAAE;MACPoE,GAAG,EAAE,eAAY;QACf,OAAO,IAAI,CAACT,OAAO;;KAEtB;;EAEH;EACA;EACA;IACEU,OAAO,EAAE;MACPD,GAAG,EAAE,eAAY;QACf,OAAO5E,SAAO,CAAC,IAAI,CAACqE,IAAI,CAAC,IAAI,OAAO,IAAI,CAACA,IAAI,KAAK,QAAQ;;;EAIhE,CAAC,CAAC;;EAEF;EACA;EACA;EACA;EACA;EACA;EACAH,oBAAoB,CAACzC,SAAS,CAACqD,QAAQ,GAAG,YAAY;IACpD,MAAM,IAAI7E,gBAAc,CAAC,oDAAoD,CAAC;EAChF,CAAC;;ECpGD;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA,IAAI8E,iBAAiB,GAAG,SAApBA,iBAAiB,CAAavE,MAAM,EAAE;IACxC0D,oBAAoB,CAACc,KAAK,CAAC,IAAI,EAAEC,SAAS,CAAC;EAC7C,CAAC;EAEDF,iBAAiB,CAACtD,SAAS,GAAGkD,MAAM,CAAC7C,MAAM,CAACoC,oBAAoB,CAACzC,SAAS,CAAC;;ECT3E,IAAIzB,SAAO,GAAGjC,MAAM,CAACiC,OAAO;EAC5B,IAAIkF,MAAM,GAAGnH,MAAM,CAACmH,MAAM;EAC1B,IAAIC,SAAS,GAAGpH,MAAM,CAACoH,SAAS;EAChC,IAAIC,YAAY,GAAGrH,MAAM,CAACqH,YAAY;EACtC;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA,IAAIC,0BAA0B,GAAG,SAA7BA,0BAA0B,CAAa7E,MAAM,EAAE;IACjDuE,iBAAiB,CAACC,KAAK,CAAC,IAAI,EAAEC,SAAS,CAAC;;;EAG1C;EACA;EACA;EACA;IACE,IAAI,CAACb,IAAI,GAAG,MAAM;IAClB,IAAI,CAACkB,gBAAgB,GAAG,KAAK;;;EAG/B;EACA;EACA;IACE,IAAI,CAAChB,OAAO,GAAGN,QAAQ;;;EAGzB;EACA;EACA;IACE,IAAI,CAACO,SAAS,GAAG,EAAE;;;EAGrB;EACA;EACA;IACE,IAAI,CAACC,QAAQ,GAAG,EAAE;;;EAGpB;EACA;EACA;IACE,IAAI,CAACC,QAAQ,GAAG,+BAA+B;EACjD,CAAC;EAEDY,0BAA0B,CAAC5D,SAAS,GAAGkD,MAAM,CAAC7C,MAAM,CAACiD,iBAAiB,CAACtD,SAAS,CAAC;EAEjF4D,0BAA0B,CAAC5D,SAAS,CAAC8D,mBAAmB,GAAG,UAAUC,MAAM,EAAE;IAC3E,IAAI,CAACF,gBAAgB,GAAGE,MAAM;EAChC,CAAC;EAEDH,0BAA0B,CAAC5D,SAAS,CAACgE,SAAS,GAAG,YAAY;;IAE3D,IAAI,IAAI,CAACH,gBAAgB,EAAE;MACzB;;IAEF,IAAIjE,KAAK,GAAG,IAAI,CAACb,MAAM,CAACa,KAAK;IAE7B,IAAIqE,IAAI,GAAGrE,KAAK,CAACsE,2BAA2B;IAC5C,IAAI,CAACD,IAAI,CAACE,YAAY,EAAE;MACtB;;IAGF,IAAI,CAAClB,QAAQ,GAAG,IAAI;IAEpB,IAAIjC,MAAM,GAAGpB,KAAK,CAACoB,MAAM;IAEzB,IAAIzC,SAAO,CAAC,IAAI,CAACQ,MAAM,CAACqF,aAAa,CAAC,EAAE;;MAEtC,IAAIA,aAAa,GAAG,IAAI,CAACrF,MAAM,CAACqF,aAAa;MAC7C,IAAI,CAACrF,MAAM,CAACqF,aAAa,GAAGnF,SAAS;MACrC,IAAI,CAACF,MAAM,CAACqF,aAAa,GAAGA,aAAa;KAC1C,MAAM;;MAEL,IAAI,IAAI,CAACrF,MAAM,CAACD,OAAO,CAACuF,gBAAgB,EAAE;QACxC,IAAI,IAAI,CAACtF,MAAM,CAACD,OAAO,CAACuF,gBAAgB,IAAI,IAAI,CAACtF,MAAM,CAACD,OAAO,CAACuF,gBAAgB,YAAYV,YAAY,EAAE;UACxG3C,MAAM,CAACsD,KAAK,CAAC;YACXC,WAAW,EAAE3E,KAAK,CAACuB,KAAK,CAACK,SAAS,CAACgD,uBAAuB,CAAC,IAAI,CAACzF,MAAM,CAACD,OAAO,CAACuF,gBAAgB;WAChG,CAAC;SACH,MAAM,IAAI,IAAI,CAACtF,MAAM,CAACD,OAAO,CAACuF,gBAAgB,IAAI,IAAI,CAACtF,MAAM,CAACD,OAAO,CAACuF,gBAAgB,YAAYX,SAAS,EAAE;UAC5G,IAAI;YACFA,SAAS,CAACe,QAAQ,CAAC,IAAI,CAAC1F,MAAM,CAACD,OAAO,CAACuF,gBAAgB,CAAC;YACxDrD,MAAM,CAACsD,KAAK,CAAC;cACXC,WAAW,EAAE,IAAI,CAACxF,MAAM,CAACD,OAAO,CAACuF,gBAAgB;cACjDK,WAAW,EAAE;gBACXC,OAAO,EAAErI,MAAM,CAACsI,IAAI,CAACC,SAAS,CAAC,QAAQ;;aAE1C,CAAC;WACH,CAAC,OAAOC,CAAC,EAAE;YACVC,OAAO,CAACC,GAAG,CAAC,wGAAwG,CAAC;;;OAG1H,MAAM,IAAI,OAAOhE,MAAM,CAACiE,OAAO,KAAK,UAAU,EAAE;QAC/CjE,MAAM,CAACiE,OAAO,CAAC,CAAC,CAAC;OAClB,MAAM;QACLjE,MAAM,CAACsD,KAAK,CAAC;UAAC,aAAa,EAAEb,MAAM,CAACyB,sBAAsB;UAAE,UAAU,EAAE;SAAE,CAAC;;;IAG/E,IAAI,CAACjC,QAAQ,GAAG,KAAK;EACvB,CAAC;;EAED;EACA;EACA;EACA;EACA;EACA;EACAW,0BAA0B,CAAC5D,SAAS,CAACqD,QAAQ,GAAG,YAAY;IAC1D,IAAI,CAACW,SAAS,EAAE;EAClB,CAAC;;ECtHD;AACA,EAEA,IAAIzF,SAAO,GAAGjC,MAAM,CAACiC,OAAO;EAC5B,IAAI4G,GAAG,GAAG7I,MAAM,CAAC6I,GAAG;EACpB,IAAIC,UAAU,GAAG9I,MAAM,CAAC8I,UAAU;EAClC,IAAIzB,cAAY,GAAGrH,MAAM,CAACqH,YAAY;EACtC,IAAI0B,cAAc,GAAG/I,MAAM,CAAC+I,cAAc;EAC1C,IAAIC,SAAS,GAAGhJ,MAAM,CAACgJ,SAAS;EAEhC,IAAIC,KAAK,GAAG,EAAE;EAEd,IAAIC,kBAAkB,GAAG,IAAI7B,cAAY,EAAE;EAC3C,IAAI8B,UAAU,GAAG,IAAIN,GAAG,EAAE;;EAE1B;EACA;EACA;EACA;EACA;EACA;EACA;EACAI,KAAK,CAACG,cAAc,GAAG,UAAU3G,MAAM,EAAE4G,kBAAkB,EAAErF,MAAM,EAAE;IACnE,IAAIV,KAAK,GAAGb,MAAM,CAACa,KAAK;IACxB,IAAIoB,MAAM,GAAGpB,KAAK,CAACoB,MAAM;IAEzB,IAAIpB,KAAK,CAACgG,IAAI,KAAKN,SAAS,CAACO,QAAQ,EAAE;MACrC,OAAO5G,SAAS;;IAGlB,IAAI,CAACV,SAAO,CAAC+B,MAAM,CAAC,EAAE;MACpBA,MAAM,GAAG,IAAI8E,UAAU,EAAE;;;;;;IAM3B,IAAI7G,SAAO,CAACQ,MAAM,CAACqF,aAAa,CAAC,EAAE;MACjC9D,MAAM,GAAGvB,MAAM,CAACqF,aAAa,CAAC0B,QAAQ,CAACC,QAAQ,CAAChH,MAAM,CAACiH,KAAK,CAACC,WAAW,EAAE3F,MAAM,CAAC;KAClF,MAAM;MACLmF,UAAU,CAACS,MAAM,GAAGlF,MAAM,CAACmF,UAAU;MACrCV,UAAU,CAACW,SAAS,GAAGpF,MAAM,CAACqF,WAAW;MACzC/F,MAAM,GAAGV,KAAK,CAACuB,KAAK,CAACE,IAAI,CAACoE,UAAU,EAAE7F,KAAK,EAAEU,MAAM,CAAC;;IAGtD,IAAI,CAAC/B,SAAO,CAAC+B,MAAM,CAAC,EAAE;MACpB,OAAOrB,SAAS;;IAGlB,IAAIW,KAAK,CAACgG,IAAI,KAAKN,SAAS,CAACgB,OAAO,IAAI1G,KAAK,CAACgG,IAAI,KAAKN,SAAS,CAACiB,aAAa,EAAE;MAC9EjG,MAAM,GAAGU,MAAM,CAACwF,6BAA6B,CAAClG,MAAM,EAAEA,MAAM,CAAC;MAE7D,IAAIqF,kBAAkB,EAAE;QACtBrF,MAAM,GAAGV,KAAK,CAACuB,KAAK,CAACK,SAAS,CAACgD,uBAAuB,CAAC5E,KAAK,CAAC6G,aAAa,CAACC,SAAS,CAACpG,MAAM,EAAEkF,kBAAkB,CAAC,EAAElF,MAAM,CAAC;;KAE5H,MAAM;MACL,IAAI,CAACqF,kBAAkB,EAAE;QACvBrF,MAAM,GAAGU,MAAM,CAACwF,6BAA6B,CAAClG,MAAM,EAAEA,MAAM,CAAC;;;IAIjE,OAAOA,MAAM;EACf,CAAC;;EC3DD,IAAI/B,SAAO,GAAGjC,MAAM,CAACiC,OAAO;EAC5B,IAAI4G,KAAG,GAAG7I,MAAM,CAAC6I,GAAG;EACpB,IAAIwB,iBAAiB,GAAGrK,MAAM,CAACqK,iBAAiB;EAChD,IAAIvB,YAAU,GAAG9I,MAAM,CAAC8I,UAAU;EAClC,IAAIE,WAAS,GAAGhJ,MAAM,CAACgJ,SAAS;;EAEhC;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA,IAAIsB,qBAAqB,GAAG,SAAxBA,qBAAqB,CAAa7H,MAAM,EAAE8H,MAAM,EAAE;IACpDvD,iBAAiB,CAACC,KAAK,CAAC,IAAI,EAAEC,SAAS,CAAC;;;EAG1C;EACA;EACA;EACA;IACE,IAAI,CAACb,IAAI,GAAG,OAAO,IAAIkE,MAAM,GAAG,IAAI,GAAG,KAAK,CAAC;;;EAG/C;EACA;EACA;EACA;EACA;IACE,IAAI,CAACjE,IAAI,GAAGiE,MAAM,GAAG,GAAG,GAAG,GAAG;;;EAGhC;EACA;EACA;IACE,IAAI,CAAC7D,QAAQ,GAAG,+BAA+B,IAAI6D,MAAM,GAAG,IAAI,GAAG,KAAK,CAAC;IAEzE,IAAI,CAACC,cAAc,GAAG,CAAC;IAEvB,IAAID,MAAM,EAAE;;;MAGV,IAAI,CAACC,cAAc,GAAG,CAAC,GAAG,IAAI,CAACA,cAAc;;EAEjD,CAAC;EAEDF,qBAAqB,CAAC5G,SAAS,CAAC8G,cAAc,GAAG,CAAC;EAElDF,qBAAqB,CAAC5G,SAAS,GAAGkD,MAAM,CAAC7C,MAAM,CAACiD,iBAAiB,CAACtD,SAAS,CAAC;;EAE5E;EACA;EACA;EACA;EACA;EACA;EACA4G,qBAAqB,CAAC5G,SAAS,CAACqD,QAAQ,GAAG,YAAY;IACrD,IAAI,CAAC0D,IAAI,CAAC,IAAI,CAACD,cAAc,CAAC;EAChC,CAAC;EAED,IAAIE,iBAAiB,GAAG,IAAI5B,YAAU,EAAE;EAExCwB,qBAAqB,CAAC5G,SAAS,CAAC+G,IAAI,GAAG,UAAUD,cAAc,EAAE;;;IAG/D,IAAI,CAAC7D,QAAQ,GAAG,IAAI;IAEpB,IAAI1E,SAAO,CAAC,IAAI,CAACQ,MAAM,CAAC,EAAE;MACxB,IAAIa,KAAK,GAAG,IAAI,CAACb,MAAM,CAACa,KAAK;MAE7B,IAAIqE,IAAI,GAAGrE,KAAK,CAACsE,2BAA2B;;MAE5C,IAAI,CAACD,IAAI,CAACE,YAAY,IAAI,CAACF,IAAI,CAACgD,UAAU,EAAE;QAC1C;;;;;;;MAOF,IAAIjG,MAAM,GAAGpB,KAAK,CAACoB,MAAM;MACzB,IAAI0D,WAAW;MAEf,QAAQ9E,KAAK,CAACgG,IAAI;QAChB,KAAKN,WAAS,CAACO,QAAQ;UACrB;QACF,KAAKP,WAAS,CAACgB,OAAO;UACpBtF,MAAM,CAAC6F,MAAM,CAAC7F,MAAM,CAACkG,oBAAoB,CAACrG,MAAM,IAAI,CAAC,GAAG,IAAI,CAACiG,cAAc,CAAC,CAAC;UAC7E;QACF;UACE,IAAIK,KAAK;UAET,IAAI5I,SAAO,CAAC,IAAI,CAACQ,MAAM,CAACqF,aAAa,CAAC,EAAE;YACtC+C,KAAK,GAAG,IAAI/B,YAAU,EAAE;WACzB,MAAM;YACL+B,KAAK,GAAG5B,KAAK,CAACG,cAAc,CAAC,IAAI,CAAC3G,MAAM,EAAE,KAAK,CAAC;;UAGlD,IAAI,CAACR,SAAO,CAAC4I,KAAK,CAAC,EAAE;;;YAGnB,IAAIC,GAAG,GAAG,IAAIjC,KAAG,CAACnE,MAAM,CAACwF,6BAA6B,CAAC5G,KAAK,CAACuB,KAAK,CAACK,SAAS,CAACgD,uBAAuB,CAACxD,MAAM,CAACkG,oBAAoB,CAAC,CAAC,EAAElG,MAAM,CAACqF,WAAW,CAAC;YACvJc,KAAK,GAAGR,iBAAiB,CAACU,uBAAuB,CAACD,GAAG,EAAExH,KAAK,CAACuB,KAAK,CAACK,SAAS,CAAC;YAE7EkD,WAAW,GAAG;cACZC,OAAO,EAAE3D,MAAM,CAAC2D,OAAO;cACvB2C,KAAK,EAAEtG,MAAM,CAACsG,KAAK;cACnBC,IAAI,EAAEvG,MAAM,CAACuG;aACd;WACF,MAAM;YACL7C,WAAW,GAAG;cACZ0B,SAAS,EAAEpF,MAAM,CAACoF,SAAS;cAC3BoB,EAAE,EAAExG,MAAM,CAACwG;aACZ;;UAGH,IAAIpB,SAAS,GAAGhB,YAAU,CAACqC,QAAQ,CAACzG,MAAM,CAAC8E,QAAQ,EAAEqB,KAAK,EAAEH,iBAAiB,CAAC;UAC9E,IAAIU,cAAc,GAAGtC,YAAU,CAACuC,gBAAgB,CAACvB,SAAS,EAAEU,cAAc,EAAEV,SAAS,CAAC;UACtF,IAAIwB,WAAW,GAAGxC,YAAU,CAAC5F,GAAG,CAAC2H,KAAK,EAAEO,cAAc,EAAEP,KAAK,CAAC;UAE9D,IAAI5I,SAAO,CAAC,IAAI,CAACQ,MAAM,CAACqF,aAAa,CAAC,IAAIxE,KAAK,CAACgG,IAAI,KAAKN,WAAS,CAACiB,aAAa,EAAE;;;YAGhFvF,MAAM,CAAC8E,QAAQ,GAAG8B,WAAW;WAC9B,MAAM;YACL5G,MAAM,CAACsD,KAAK,CAAC;cACXC,WAAW,EAAEqD,WAAW;cACxBlD,WAAW,EAAEA,WAAW;cACxBmD,QAAQ,EAAE,GAAG;cACbC,OAAO,EAAE;aACV,CAAC;;;;;;IAMV,IAAI,CAAC7E,QAAQ,GAAG,KAAK;EACvB,CAAC;;EC9ID,IAAI8E,mBAAmB,GAAG,+nDAA+nD;;ECAzpD,IAAIC,cAAc,GAAG,upMAAupM;;ECD5qM,IAAIC,wBAAwB,GAAG,2OAA2O;;ECQ1Q,IAAI1J,SAAO,GAAGjC,MAAM,CAACiC,OAAO;EAC5B,IAAI2J,UAAU,GAAG5L,MAAM,CAACsI,IAAI;EAC5B,IAAIjG,cAAY,GAAGrC,MAAM,CAACqC,YAAY;EACtC,IAAIC,aAAW,GAAGtC,MAAM,CAACsC,WAAW;EACpC,IAAIuJ,UAAU,GAAG7L,MAAM,CAAC6L,UAAU;EAClC,IAAI7C,WAAS,GAAGhJ,MAAM,CAACgJ,SAAS;EAChC,IAAI5G,YAAU,GAAGpC,MAAM,CAACoC,UAAU;EAClC,IAAI0G,YAAU,GAAG9I,MAAM,CAAC8I,UAAU;EAClC,IAAIgD,OAAO,GAAG9L,MAAM,CAAC8L,OAAO;EAC5B,IAAIC,cAAc,GAAG/L,MAAM,CAAC+L,cAAc;EAC1C,IAAIC,iBAAiB,GAAGhM,MAAM,CAACgM,iBAAiB;EAChD,IAAI5K,UAAQ,GAAGpB,MAAM,CAACqB,QAAQ;EAE9B,IAAI4K,mBAAmB,GAAG,SAAtBA,mBAAmB,CAAazJ,OAAO,EAAE;IAC3C,IAAI,CAACC,MAAM,GAAGD,OAAO,CAACC,MAAM;IAC5B,IAAI,CAACI,WAAW,GAAG,IAAIP,aAAW,EAAE;IACpC,IAAI,CAAC4J,kBAAkB,GAAIjK,SAAO,CAACO,OAAO,CAAC0J,kBAAkB,CAAC,GAAI1J,OAAO,CAAC0J,kBAAkB,GAAG,IAAI;IACnG,IAAI,CAACC,aAAa,GAAIlK,SAAO,CAACO,OAAO,CAAC2J,aAAa,CAAC,GAAI3J,OAAO,CAAC2J,aAAa,GAAG,IAAI;IACpF,IAAI,CAAC5E,gBAAgB,GAAG,KAAK;;;;IAI7B,IAAI,CAAC6E,QAAQ,GAAG5J,OAAO,CAAC4J,QAAQ;IAChC,IAAI,CAACnK,SAAO,CAAC,IAAI,CAACmK,QAAQ,CAAC,EAAE;MAC3B,IAAI,CAACA,QAAQ,GAAG,CACd,IAAI9B,qBAAqB,CAAC,IAAI,CAAC7H,MAAM,EAAE,IAAI,CAAC,EAC5C,IAAI6E,0BAA0B,CAAC,IAAI,CAAC7E,MAAM,CAAC,EAC3C,IAAI6H,qBAAqB,CAAC,IAAI,CAAC7H,MAAM,EAAE,KAAK,CAAC,CAC9C;;;;IAIH,IAAI,CAACgJ,mBAAmB,GAAGA,mBAAmB;IAC9C,IAAI,CAACC,cAAc,GAAGA,cAAc;IACpC,IAAI,CAACC,wBAAwB,GAAGA,wBAAwB;IAExD,IAAI,CAACU,WAAW,GAAGpK,SAAO,CAAC,IAAI,CAACQ,MAAM,CAAC,IAAI,IAAI,CAAC0J,aAAa;IAC7D,IAAI,CAAC9D,OAAO,GAAG,IAAI,CAACgE,WAAW,GAAG,IAAI,CAAC5J,MAAM,CAACa,KAAK,CAACoB,MAAM,CAAC2D,OAAO,GAAG,GAAG;IAExE,IAAI,CAACiE,UAAU,GAAG,KAAK;IACvB,IAAI,CAACC,gBAAgB,GAAG,CAAC;IACzB,IAAI,CAACC,kBAAkB,GAAG,GAAG;IAC7B,IAAI,CAACC,kBAAkB,GAAG,CAAC;IAC3B,IAAI,CAACC,UAAU,GAAG/J,SAAS;IAC3B,IAAI,CAACgK,WAAW,GAAG,KAAK;IACxB,IAAI,CAACC,sBAAsB,GAAGjK,SAAS;IACvC,IAAI,CAACkK,oBAAoB,GAAGlK,SAAS;IAErC,IAAI,CAACmK,UAAU,GAAG,KAAK;IACvB,IAAI,CAACC,wBAAwB,GAAGpK,SAAS;IACzC,IAAI,CAACqK,WAAW,GAAGrK,SAAS;IAC5B,IAAI,CAACsK,YAAY,GAAG,KAAK;IACzB,IAAI,CAACC,uBAAuB,GAAGvK,SAAS;IACxC,IAAI,CAACwK,qBAAqB,GAAGxK,SAAS;IAEtC,IAAI,CAACyK,yBAAyB,GAAGzK,SAAS;IAE1CvB,UAAQ,CAAC6B,KAAK,CAAC,IAAI,EAAE,CAAC,UAAU,EAAE,aAAa,EAAE,SAAS,EAAE,YAAY,EAAE,kBAAkB,EAAE,YAAY,CAAC,CAAC;IAE5G,IAAIG,IAAI,GAAG,IAAI;IAEf6I,mBAAmB,CAACvI,SAAS,CAAC8D,mBAAmB,GAAG,UAAUC,MAAM,EAAE;MACpE,IAAI,CAACF,gBAAgB,GAAGE,MAAM;MAC9B,IAAI,IAAI,CAAC2E,QAAQ,IAAI,IAAI,CAACA,QAAQ,CAACxK,MAAM,GAAG,CAAC,EAAE;QAC7C,IAAI,CAACwK,QAAQ,CAAC,CAAC,CAAC,CAAC5E,mBAAmB,CAAC,IAAI,CAACD,gBAAgB,CAAC;;KAE9D;IAED,SAAS8F,YAAY,GAAI;MACvB,IAAIpL,SAAO,CAACmB,IAAI,CAACX,MAAM,CAAC,EAAE;QACxB,IAAIW,IAAI,CAACgK,yBAAyB,EAAE;UAClChK,IAAI,CAACgK,yBAAyB,EAAE;UAChChK,IAAI,CAACgK,yBAAyB,GAAGzK,SAAS;;QAG5CS,IAAI,CAACiJ,WAAW,GAAG,CAAQjJ,IAAI,CAAC+I,aAAa;QAE7C/I,IAAI,CAACgK,yBAAyB,GAAGhK,IAAI,CAACX,MAAM,CAACa,KAAK,CAACC,UAAU,CAACC,gBAAgB,CAAC,YAAY;UACzFJ,IAAI,CAACiF,OAAO,GAAGjF,IAAI,CAACX,MAAM,CAACa,KAAK,CAACoB,MAAM,CAAC2D,OAAO;SAChD,CAAC;OACH,MAAM;QACL,IAAIjF,IAAI,CAACgK,yBAAyB,EAAE;UAClChK,IAAI,CAACgK,yBAAyB,EAAE;UAChChK,IAAI,CAACgK,yBAAyB,GAAGzK,SAAS;;QAE5CS,IAAI,CAACiJ,WAAW,GAAG,KAAK;;;IAI5B,IAAI,CAACxJ,WAAW,CAACK,GAAG,CAAC,IAAI,CAACT,MAAM,CAACU,kBAAkB,EAAEkK,YAAY,EAAE,IAAI,CAAC;;;IAGxEA,YAAY,EAAE;EAChB,CAAC;EAEDpB,mBAAmB,CAACvI,SAAS,CAACC,OAAO,GAAG,YAAY;IAClD,IAAI,CAACd,WAAW,CAACe,SAAS,EAAE;;;EAG9B,CAAC;;EAEDqI,mBAAmB,CAACvI,SAAS,CAACG,IAAI,GAAG,UAAUtC,SAAS,EAAE;IACxD,IAAIuC,OAAO;IACX,IAAI,IAAI,CAACoI,kBAAkB,IAAI,IAAI,CAACC,aAAa,EAAE;MACjDrI,OAAO,GAAG,qIAAqI,GAC7I,mDAAmD,GACnD,4TAA4T,GAC5T,uPAAuP,GACvP,8CAA8C,GAC9C,8JAA8J,GAC9J,QAAQ,GACR,mCAAmC,GACnC,+BAA+B,GAC/B,yJAAyJ,GACzJ,kCAAkC,GAClC,2IAA2I,GAC3I,iBAAiB,GACjB,oCAAoC,GACpC,gNAAgN,GAChN,gBAAgB,GAChB,SAAS,GACT,eAAe,GACf,QAAQ;KACX,MAAM,IAAI,CAAC,IAAI,CAACoI,kBAAkB,IAAI,IAAI,CAACC,aAAa,EAAE;MACzDrI,OAAO,GAAG,qIAAqI,GAC7I,mDAAmD,GACnD,4TAA4T,GAC5T,uPAAuP,GACvP,8CAA8C,GAC9C,8JAA8J,GAC9J,QAAQ,GACR,4DAA4D,GAC5D,+BAA+B,GAC/B,yJAAyJ,GACzJ,kCAAkC,GAClC,2IAA2I,GAC3I,iBAAiB,GACjB,oCAAoC,GACpC,gNAAgN,GAChN,gBAAgB,GAChB,SAAS,GACT,eAAe,GACf,QAAQ;KACX,MAAM,IAAI,IAAI,CAACoI,kBAAkB,IAAI,CAAC,IAAI,CAACC,aAAa,EAAE;MACzDrI,OAAO,GAAG,6JAA6J,GACrK,mDAAmD,GACnD,4TAA4T,GAC5T,uPAAuP,GACvP,8CAA8C,GAC9C,8JAA8J,GAC9J,QAAQ,GACR,uCAAuC,GACvC,+BAA+B,GAC/B,yJAAyJ,GACzJ,kCAAkC,GAClC,2IAA2I,GAC3I,iBAAiB,GACjB,oCAAoC,GACpC,gNAAgN,GAChN,gBAAgB,GAChB,SAAS,GACT,eAAe,GACf,QAAQ;KACX,MAAM,IAAI,CAAC,IAAI,CAACoI,kBAAkB,IAAI,CAAC,IAAI,CAACC,aAAa,EAAE;MAC1DrI,OAAO,GAAG,6JAA6J,GACrK,mDAAmD,GACnD,4TAA4T,GAC5T,uPAAuP,GACvP,8CAA8C,GAC9C,8JAA8J,GAC9J,QAAQ,GACR,6DAA6D,GAC7D,+BAA+B,GAC/B,yJAAyJ,GACzJ,kCAAkC,GAClC,2IAA2I,GAC3I,iBAAiB,GACjB,oCAAoC,GACpC,gNAAgN,GAChN,gBAAgB,GAChB,SAAS,GACT,eAAe,GACf,QAAQ;;IAEZxC,QAAQ,CAACwC,OAAO,EAAEvC,SAAS,EAAE,IAAI,CAAC;;;EAGpC,CAAC;;EAED;EACA;EACA;EACA;EACA0K,mBAAmB,CAACvI,SAAS,CAACR,GAAG,GAAG,UAAUoK,OAAO,EAAE;IACrD,IAAI,CAAClB,QAAQ,CAACvK,IAAI,CAACyL,OAAO,CAAC;EAC7B,CAAC;;EAED;EACA;EACA;EACA;EACArB,mBAAmB,CAACvI,SAAS,CAAC6J,MAAM,GAAG,UAAUD,OAAO,EAAE;IACxD,IAAI,CAAClB,QAAQ,CAACmB,MAAM,CAACD,OAAO,CAAC;EAC/B,CAAC;;EAED;EACA;EACA;EACA;EACArB,mBAAmB,CAACvI,SAAS,CAAC8J,aAAa,GAAG,UAAUF,OAAO,EAAE;IAC/D,OAAQA,OAAO,KAAK,IAAI,CAAClB,QAAQ,CAAC,IAAI,CAACA,QAAQ,CAACxK,MAAM,GAAG,CAAC,CAAC;EAC7D,CAAC;EAED,IAAI6L,aAAa,GAAG,IAAIrL,YAAU,EAAE;EAEpC6J,mBAAmB,CAACvI,SAAS,CAACgK,eAAe,GAAG,UAAUlM,SAAS,EAAEgH,CAAC,EAAE;IACtE,IAAIlF,KAAK,GAAG,IAAI,CAACb,MAAM,CAACa,KAAK;IAC7B,IAAIA,KAAK,CAACgG,IAAI,KAAKN,WAAS,CAACO,QAAQ,EAAE;MACrC,OAAO,IAAI;;IAEb,IAAI/H,SAAS,CAAC+F,gBAAgB,EAAE;MAC9B,OAAO,IAAI;;IAGb,IAAIoG,cAAc,GAAGnF,CAAC,CAACoF,aAAa;IACpC,IAAIC,gBAAgB,GAAGrF,CAAC,CAACoF,aAAa,CAACE,qBAAqB,EAAE;IAC9D,IAAIC,WAAW,GAAGF,gBAAgB,CAACzJ,KAAK,GAAG,GAAG;IAC9C,IAAI4J,MAAM,GAAG,IAAI5L,YAAU,CAAC,CAACyL,gBAAgB,CAACjJ,KAAK,GAAGiJ,gBAAgB,CAACpJ,IAAI,IAAI,GAAG,EAAE,CAACoJ,gBAAgB,CAACI,MAAM,GAAGJ,gBAAgB,CAACK,GAAG,IAAI,GAAG,CAAC;IAC3I,IAAIC,aAAa,GAAG,IAAI/L,YAAU,CAACoG,CAAC,CAAC4F,OAAO,GAAGP,gBAAgB,CAACpJ,IAAI,EAAE+D,CAAC,CAAC6F,OAAO,GAAGR,gBAAgB,CAACK,GAAG,CAAC;IACvG,IAAII,MAAM,GAAGlM,YAAU,CAAC+I,QAAQ,CAACgD,aAAa,EAAEH,MAAM,EAAEP,aAAa,CAAC;IACtE,IAAIc,kBAAkB,GAAGnM,YAAU,CAACoM,SAAS,CAACF,MAAM,CAAC;IAErD,IAAIG,gBAAgB,GAAGF,kBAAkB,GAAGR,WAAW;IAEvD,IAAIW,kBAAkB,GAAG,GAAG;IAC5B,IAAIC,kBAAkB,GAAG,EAAE;IAE3B,IAAIF,gBAAgB,GAAGE,kBAAkB,GAAGD,kBAAkB,EAAE;MAC9DE,KAAK,CAAC,IAAI,EAAEjB,cAAc,EAAEW,MAAM,CAAC;;KAEpC,MAAM,IAAIG,gBAAgB,GAAG,GAAG,EAAE;MACjCI,MAAM,CAAC,IAAI,EAAElB,cAAc,EAAEW,MAAM,CAAC;;KAErC,MAAM;MACL,OAAO,IAAI;;EAEf,CAAC;EAED,IAAIQ,mBAAmB,GAAG,IAAIhD,OAAO,EAAE;EACvC,IAAIiD,mBAAmB,GAAG,IAAIjD,OAAO,EAAE;EACvC,IAAIkD,aAAa,GAAG,IAAIlG,YAAU,EAAE;EAEpCmD,mBAAmB,CAACvI,SAAS,CAACuL,iBAAiB,GAAG,UAAUzN,SAAS,EAAEgH,CAAC,EAAE;IACxE,IAAIlF,KAAK,GAAG9B,SAAS,CAACiB,MAAM,CAACa,KAAK;IAClC,IAAIoB,MAAM,GAAGpB,KAAK,CAACoB,MAAM;IAEzB,IAAIiD,IAAI,GAAGrE,KAAK,CAACsE,2BAA2B;IAE5C,IAAItE,KAAK,CAACgG,IAAI,KAAKN,WAAS,CAACO,QAAQ,IAAI,CAAC5B,IAAI,CAACE,YAAY,EAAE;MAC3D,OAAO,IAAI;;IAEb,IAAIrG,SAAS,CAAC+F,gBAAgB,EAAE;MAC9B,OAAO,IAAI;;IAEb,IAAIjE,KAAK,CAACgG,IAAI,KAAKN,WAAS,CAACiB,aAAa,IAAI,CAACtC,IAAI,CAACuH,eAAe,EAAE;MACnE;;IAEF,IAAI5L,KAAK,CAACgG,IAAI,KAAKN,WAAS,CAACmG,OAAO,IAAI7L,KAAK,CAACgG,IAAI,KAAKN,WAAS,CAACiB,aAAa,EAAE;MAC9E,IAAI,CAACtC,IAAI,CAACyH,UAAU,EAAE;QACpB;;MAGF,IAAI9L,KAAK,CAACgG,IAAI,KAAKN,WAAS,CAACmG,OAAO,EAAE;QACpC,IAAI,CAACxH,IAAI,CAAC0H,YAAY,EAAE;UACtB;;;;IAKN,IAAIrB,MAAM,GAAG/E,KAAK,CAACG,cAAc,CAAC5H,SAAS,CAACiB,MAAM,EAAE,IAAI,EAAEuM,aAAa,CAAC;IAExE,IAAI,CAAC/M,SAAO,CAAC+L,MAAM,CAAC,EAAE;;;MAGpB,IAAI,CAAC5B,QAAQ,CAAC,CAAC,CAAC,CAAC1E,SAAS,EAAE;MAC5B;;IAGF,IAAI4H,cAAc,GAAGhM,KAAK,CAACuB,KAAK,CAACK,SAAS,CAACgD,uBAAuB,CAACxD,MAAM,CAACkG,oBAAoB,EAAE,IAAI9B,YAAU,EAAE,CAAC;IAEjH,IAAIyG,aAAa,GAAGjM,KAAK,CAACuB,KAAK,CAACK,SAAS,CAACsK,qBAAqB,CAACxB,MAAM,CAAC;IAEvE,IAAIyB,mBAAmB,GAAG,IAAI1D,cAAc,CAACiC,MAAM,EAAE,CAAC,CAAC;IAEvDtJ,MAAM,CAACgL,mBAAmB,CAACD,mBAAmB,EAAE;MAC9CE,MAAM,EAAE,IAAI3D,iBAAiB,CAAC,CAAC;;MAE7BJ,UAAU,CAACgE,WAAW,GAAG9G,YAAU,CAAC+G,YAAY,CAC9CN,aAAa,EACb7K,MAAM,CAACqF,WAAW,CACnB;;;;MAIDjB,YAAU,CAACrD,QAAQ,CAAC6J,cAAc,EAAEtB,MAAM,CAAC,CAC5C;MACDzC,QAAQ,EAAE;KACX,CAAC;EACJ,CAAC;EAEDU,mBAAmB,CAAClI,MAAM,GAAG,UAAUvB,OAAO,EAAE;;;IAG9C,IAAIwB,MAAM,GAAG,IAAIiI,mBAAmB,CAACzJ,OAAO,CAAC;IAC7CwB,MAAM,CAACH,IAAI,CAACrB,OAAO,CAACjB,SAAS,CAAC;IAC9B,OAAOyC,MAAM;EACf,CAAC;EAED,SAAS4K,KAAK,CAAEpN,SAAS,EAAEmM,cAAc,EAAEmC,YAAY,EAAE;IACvD,IAAIxM,KAAK,GAAG9B,SAAS,CAACiB,MAAM,CAACa,KAAK;IAElC,IAAIqE,IAAI,GAAGrE,KAAK,CAACsE,2BAA2B;;;IAG5C,IAAItE,KAAK,CAACgG,IAAI,KAAKN,WAAS,CAACO,QAAQ,IAAI,CAAC5B,IAAI,CAACE,YAAY,EAAE;MAC3D;;IAEF,IAAIrG,SAAS,CAAC+F,gBAAgB,EAAE;MAC9B,OAAO,IAAI;;IAGb,QAAQjE,KAAK,CAACgG,IAAI;MAChB,KAAKN,WAAS,CAACiB,aAAa;QAC1B,IAAItC,IAAI,CAACyH,UAAU,EAAE;UACnB;;QAGF,IAAI,CAACzH,IAAI,CAACuH,eAAe,IAAI,CAACvH,IAAI,CAACoI,UAAU,EAAE;UAC7C;;QAEF;MACF,KAAK/G,WAAS,CAACmG,OAAO;QACpB,IAAIxH,IAAI,CAACyH,UAAU,EAAE;UACnB;;QAGF,IAAI,CAACzH,IAAI,CAACoI,UAAU,IAAI,CAACpI,IAAI,CAAC0H,YAAY,EAAE;UAC1C;;QAEF;MACF,KAAKrG,WAAS,CAACgB,OAAO;QACpB,IAAI,CAACrC,IAAI,CAACuH,eAAe,EAAE;UACzB;;QAEF;;;;IAIJ9O,QAAQ,CAAC4P,mBAAmB,CAAC,WAAW,EAAExO,SAAS,CAACoL,sBAAsB,EAAE,KAAK,CAAC;IAClFxM,QAAQ,CAAC4P,mBAAmB,CAAC,SAAS,EAAExO,SAAS,CAACqL,oBAAoB,EAAE,KAAK,CAAC;IAE9E,IAAI5K,SAAO,CAACT,SAAS,CAACyO,iBAAiB,CAAC,EAAE;MACxCzO,SAAS,CAACiB,MAAM,CAACiH,KAAK,CAACwG,MAAM,CAACF,mBAAmB,CAACxO,SAAS,CAACyO,iBAAiB,CAAC;;IAGhFzO,SAAS,CAACoL,sBAAsB,GAAGjK,SAAS;IAC5CnB,SAAS,CAACqL,oBAAoB,GAAGlK,SAAS;IAC1CnB,SAAS,CAACyO,iBAAiB,GAAGtN,SAAS;IAEvCnB,SAAS,CAAC8K,UAAU,GAAG,IAAI;IAC3B9K,SAAS,CAACiL,kBAAkB,GAAGpK,cAAY,EAAE;IAE7C,IAAIqC,MAAM,GAAGpB,KAAK,CAACoB,MAAM;IAEzB,IAAIzC,SAAO,CAACT,SAAS,CAACiB,MAAM,CAACqF,aAAa,CAAC,EAAE;;MAE3CtG,SAAS,CAACkL,UAAU,GAAG/J,SAAS;MAChCnB,SAAS,CAACmL,WAAW,GAAG,KAAK;KAC9B,MAAM;MACL,IAAIqB,MAAM,GAAG/E,KAAK,CAACG,cAAc,CAAC5H,SAAS,CAACiB,MAAM,EAAE,IAAI,EAAEuM,aAAa,CAAC;MAExE,IAAI,CAAC/M,SAAO,CAAC+L,MAAM,CAAC,EAAE;QACpBxM,SAAS,CAACkL,UAAU,GAAGb,UAAU,CAACsE,uBAAuB,CAACzL,MAAM,CAACmF,UAAU,EAAEvG,KAAK,CAACuB,KAAK,CAACK,SAAS,EAAE6J,mBAAmB,CAAC;QACxHvN,SAAS,CAACmL,WAAW,GAAG,IAAI;OAC7B,MAAM;QACLnL,SAAS,CAACkL,UAAU,GAAGb,UAAU,CAACsE,uBAAuB,CAACnC,MAAM,EAAE1K,KAAK,CAACuB,KAAK,CAACK,SAAS,EAAE6J,mBAAmB,CAAC;QAC7GvN,SAAS,CAACmL,WAAW,GAAG,KAAK;;;IAIjCnL,SAAS,CAACyO,iBAAiB,GAAG,UAAUzH,CAAC,EAAE;MACzC,IAAI4H,SAAS,GAAG/N,cAAY,EAAE;MAC9B,IAAIgO,MAAM,GAAGD,SAAS,GAAG5O,SAAS,CAACiL,kBAAkB;MACrD,IAAI6D,IAAI,GAAG,CAAC9O,SAAS,CAACgL,kBAAkB,GAAG,GAAG,IAAI,GAAG,GAAG,IAAI;MAC5D,IAAI/G,QAAQ,GAAG4K,MAAM,GAAGC,IAAI;MAE5B,IAAIC,KAAK,GAAG/O,SAAS,CAAC+K,gBAAgB,GAAGX,UAAU,CAACgE,WAAW;MAC/D,IAAIY,CAAC,GAAGlI,IAAI,CAACmI,GAAG,CAACF,KAAK,CAAC,GAAG9K,QAAQ;MAClC,IAAIiL,CAAC,GAAGpI,IAAI,CAACqI,GAAG,CAACJ,KAAK,CAAC,GAAG9K,QAAQ;MAElC,IAAImL,YAAY;MAEhB,IAAIpP,SAAS,CAAC+F,gBAAgB,EAAE;QAC9B,OAAO,IAAI;;MAGb,IAAItF,SAAO,CAACT,SAAS,CAACkL,UAAU,CAAC,EAAE;QACjCkE,YAAY,GAAG9E,OAAO,CAAC+E,KAAK,CAACnM,MAAM,CAACoM,SAAS,EAAEhC,mBAAmB,CAAC;QAEnEpK,MAAM,CAACqM,eAAe,CAACvP,SAAS,CAACkL,UAAU,CAAC;;;;MAI9C,IAAIpJ,KAAK,CAACgG,IAAI,KAAKN,WAAS,CAACgB,OAAO,EAAE;QACpCtF,MAAM,CAACsM,IAAI,CAAC,IAAIlI,YAAU,CAAC0H,CAAC,EAAEE,CAAC,EAAE,CAAC,CAAC,EAAEpI,IAAI,CAAC2I,GAAG,CAAC3N,KAAK,CAACe,MAAM,CAACC,WAAW,EAAEhB,KAAK,CAACe,MAAM,CAACG,YAAY,CAAC,GAAG,GAAG,GAAGE,MAAM,CAACkG,oBAAoB,CAACrG,MAAM,GAAGkB,QAAQ,CAAC;OAC1J,MAAM;QACL,IAAIjE,SAAS,CAACmL,WAAW,EAAE;UACzBjI,MAAM,CAACwM,IAAI,CAACpI,YAAU,CAACqI,MAAM,EAAE,CAACX,CAAC,CAAC;UAClC9L,MAAM,CAACwM,IAAI,CAACxM,MAAM,CAACE,KAAK,EAAE,CAAC8L,CAAC,CAAC;SAC9B,MAAM;UACLhM,MAAM,CAAC0M,UAAU,CAACZ,CAAC,CAAC;UACpB9L,MAAM,CAAC2M,QAAQ,CAACX,CAAC,CAAC;;;MAItB,IAAIzO,SAAO,CAACT,SAAS,CAACkL,UAAU,CAAC,EAAE;QACjChI,MAAM,CAACqM,eAAe,CAACH,YAAY,CAAC;;;;;MAKtCpP,SAAS,CAACiL,kBAAkB,GAAG2D,SAAS;KACzC;IAED,SAASkB,qBAAqB,CAAEhD,MAAM,EAAEiD,YAAY,EAAE;MACpD,IAAIhB,KAAK,GAAGjI,IAAI,CAACkJ,KAAK,CAAC,CAAClD,MAAM,CAACoC,CAAC,EAAEpC,MAAM,CAACkC,CAAC,CAAC;MAC3ChP,SAAS,CAAC+K,gBAAgB,GAAGX,UAAU,CAAC6F,WAAW,CAAClB,KAAK,GAAG3E,UAAU,CAACgE,WAAW,CAAC;MAEnF,IAAInK,QAAQ,GAAGrD,YAAU,CAACoM,SAAS,CAACF,MAAM,CAAC;MAC3C,IAAIP,WAAW,GAAGwD,YAAY,GAAG,GAAG;MACpC,IAAI9C,gBAAgB,GAAGnG,IAAI,CAAC1C,GAAG,CAACH,QAAQ,GAAGsI,WAAW,EAAE,GAAG,CAAC;MAC5D,IAAI2D,YAAY,GAAG,GAAG,GAAGjD,gBAAgB,GAAGA,gBAAgB,GAAG,GAAG;MAClEjN,SAAS,CAACgL,kBAAkB,GAAGkF,YAAY;;;;;IAK7ClQ,SAAS,CAACoL,sBAAsB,GAAG,UAAUpE,CAAC,EAAE;MAC9C,IAAIqF,gBAAgB,GAAGF,cAAc,CAACG,qBAAqB,EAAE;MAC7D,IAAIE,MAAM,GAAG,IAAI5L,YAAU,CAAC,CAACyL,gBAAgB,CAACjJ,KAAK,GAAGiJ,gBAAgB,CAACpJ,IAAI,IAAI,GAAG,EAAE,CAACoJ,gBAAgB,CAACI,MAAM,GAAGJ,gBAAgB,CAACK,GAAG,IAAI,GAAG,CAAC;MAC3I,IAAIC,aAAa,GAAG,IAAI/L,YAAU,CAACoG,CAAC,CAAC4F,OAAO,GAAGP,gBAAgB,CAACpJ,IAAI,EAAE+D,CAAC,CAAC6F,OAAO,GAAGR,gBAAgB,CAACK,GAAG,CAAC;MACvG,IAAII,MAAM,GAAGlM,YAAU,CAAC+I,QAAQ,CAACgD,aAAa,EAAEH,MAAM,EAAEP,aAAa,CAAC;MACtE6D,qBAAqB,CAAChD,MAAM,EAAET,gBAAgB,CAACzJ,KAAK,CAAC;KACtD;IAED5C,SAAS,CAACqL,oBAAoB,GAAG,UAAUrE,CAAC,EAAE;;;MAG5ChH,SAAS,CAAC8K,UAAU,GAAG,KAAK;MAC5BlM,QAAQ,CAAC4P,mBAAmB,CAAC,WAAW,EAAExO,SAAS,CAACoL,sBAAsB,EAAE,KAAK,CAAC;MAClFxM,QAAQ,CAAC4P,mBAAmB,CAAC,SAAS,EAAExO,SAAS,CAACqL,oBAAoB,EAAE,KAAK,CAAC;MAE9E,IAAI5K,SAAO,CAACT,SAAS,CAACyO,iBAAiB,CAAC,EAAE;QACxCzO,SAAS,CAACiB,MAAM,CAACiH,KAAK,CAACwG,MAAM,CAACF,mBAAmB,CAACxO,SAAS,CAACyO,iBAAiB,CAAC;;MAGhFzO,SAAS,CAACoL,sBAAsB,GAAGjK,SAAS;MAC5CnB,SAAS,CAACqL,oBAAoB,GAAGlK,SAAS;MAC1CnB,SAAS,CAACyO,iBAAiB,GAAGtN,SAAS;KACxC;IAEDvC,QAAQ,CAACoD,gBAAgB,CAAC,WAAW,EAAEhC,SAAS,CAACoL,sBAAsB,EAAE,KAAK,CAAC;IAC/ExM,QAAQ,CAACoD,gBAAgB,CAAC,SAAS,EAAEhC,SAAS,CAACqL,oBAAoB,EAAE,KAAK,CAAC;IAC3ErL,SAAS,CAACiB,MAAM,CAACiH,KAAK,CAACwG,MAAM,CAAC1M,gBAAgB,CAAChC,SAAS,CAACyO,iBAAiB,CAAC;IAE3EqB,qBAAqB,CAACxB,YAAY,EAAEnC,cAAc,CAACG,qBAAqB,EAAE,CAAC1J,KAAK,CAAC;EACnF;EAEA,SAASyK,MAAM,CAAErN,SAAS,EAAEmM,cAAc,EAAEmC,YAAY,EAAE;IACxD,IAAIxM,KAAK,GAAG9B,SAAS,CAACiB,MAAM,CAACa,KAAK;IAClC,IAAIoB,MAAM,GAAGpB,KAAK,CAACoB,MAAM;IAEzB,IAAIiD,IAAI,GAAGrE,KAAK,CAACsE,2BAA2B;;IAE5C,IAAItE,KAAK,CAACgG,IAAI,KAAKN,WAAS,CAACO,QAAQ,IAAIjG,KAAK,CAACgG,IAAI,KAAKN,WAAS,CAACgB,OAAO,IAAI,CAACrC,IAAI,CAACE,YAAY,EAAE;MAC/F;;IAEF,IAAIrG,SAAS,CAAC+F,gBAAgB,EAAE;MAC9B,OAAO,IAAI;;IAGb,IAAI,CAACI,IAAI,CAACyH,UAAU,KAAK9L,KAAK,CAACgG,IAAI,KAAKN,WAAS,CAACiB,aAAa,IAAK3G,KAAK,CAACgG,IAAI,KAAKN,WAAS,CAACmG,OAAO,IAAI,CAACxH,IAAI,CAAC0H,YAAa,CAAC,EAAE;MAC5H;;;;IAIFjP,QAAQ,CAAC4P,mBAAmB,CAAC,WAAW,EAAExO,SAAS,CAAC0L,uBAAuB,EAAE,KAAK,CAAC;IACnF9M,QAAQ,CAAC4P,mBAAmB,CAAC,SAAS,EAAExO,SAAS,CAAC2L,qBAAqB,EAAE,KAAK,CAAC;IAE/E3L,SAAS,CAAC0L,uBAAuB,GAAGvK,SAAS;IAC7CnB,SAAS,CAAC2L,qBAAqB,GAAGxK,SAAS;IAE3CnB,SAAS,CAACsL,UAAU,GAAG,IAAI;IAC3BtL,SAAS,CAACuL,wBAAwB,GAAGzE,IAAI,CAACkJ,KAAK,CAAC,CAAC1B,YAAY,CAACY,CAAC,EAAEZ,YAAY,CAACU,CAAC,CAAC;IAEhF,IAAIvO,SAAO,CAACT,SAAS,CAACiB,MAAM,CAACqF,aAAa,CAAC,EAAE;;MAE3CtG,SAAS,CAACwL,WAAW,GAAGrK,SAAS;MACjCnB,SAAS,CAACyL,YAAY,GAAG,KAAK;KAC/B,MAAM;MACL,IAAI0E,UAAU,GAAG1I,KAAK,CAACG,cAAc,CAAC5H,SAAS,CAACiB,MAAM,EAAE,IAAI,EAAEuM,aAAa,CAAC;MAE5E,IAAI,CAAC/M,SAAO,CAAC0P,UAAU,CAAC,IAAKrO,KAAK,CAACgG,IAAI,KAAKN,WAAS,CAACiB,aAAa,IAAI,CAACtC,IAAI,CAACyH,UAAU,IAAI,CAACzH,IAAI,CAACuH,eAAgB,EAAE;QACjH1N,SAAS,CAACwL,WAAW,GAAGnB,UAAU,CAACsE,uBAAuB,CAACzL,MAAM,CAACmF,UAAU,EAAEvG,KAAK,CAACuB,KAAK,CAACK,SAAS,EAAE6J,mBAAmB,CAAC;QACzHvN,SAAS,CAACyL,YAAY,GAAG,IAAI;OAC9B,MAAM;QACLzL,SAAS,CAACwL,WAAW,GAAGnB,UAAU,CAACsE,uBAAuB,CAACwB,UAAU,EAAErO,KAAK,CAACuB,KAAK,CAACK,SAAS,EAAE6J,mBAAmB,CAAC;QAClHvN,SAAS,CAACyL,YAAY,GAAG,KAAK;;;IAIlC,IAAI2D,YAAY;IAChB,IAAI3O,SAAO,CAACT,SAAS,CAACwL,WAAW,CAAC,EAAE;MAClC4D,YAAY,GAAG9E,OAAO,CAAC+E,KAAK,CAACnM,MAAM,CAACoM,SAAS,EAAEhC,mBAAmB,CAAC;MACnEpK,MAAM,CAACqM,eAAe,CAACvP,SAAS,CAACwL,WAAW,CAAC;;IAG/CxL,SAAS,CAACoQ,wBAAwB,GAAG,CAAClN,MAAM,CAAC2D,OAAO;IAEpD,IAAIpG,SAAO,CAACT,SAAS,CAACwL,WAAW,CAAC,EAAE;MAClCtI,MAAM,CAACqM,eAAe,CAACH,YAAY,CAAC;;IAGtCpP,SAAS,CAAC0L,uBAAuB,GAAG,UAAU1E,CAAC,EAAE;MAC/C,IAAIqF,gBAAgB,GAAGF,cAAc,CAACG,qBAAqB,EAAE;MAC7D,IAAIE,MAAM,GAAG,IAAI5L,YAAU,CAAC,CAACyL,gBAAgB,CAACjJ,KAAK,GAAGiJ,gBAAgB,CAACpJ,IAAI,IAAI,GAAG,EAAE,CAACoJ,gBAAgB,CAACI,MAAM,GAAGJ,gBAAgB,CAACK,GAAG,IAAI,GAAG,CAAC;MAC3I,IAAIC,aAAa,GAAG,IAAI/L,YAAU,CAACoG,CAAC,CAAC4F,OAAO,GAAGP,gBAAgB,CAACpJ,IAAI,EAAE+D,CAAC,CAAC6F,OAAO,GAAGR,gBAAgB,CAACK,GAAG,CAAC;MACvG,IAAII,MAAM,GAAGlM,YAAU,CAAC+I,QAAQ,CAACgD,aAAa,EAAEH,MAAM,EAAEP,aAAa,CAAC;MACtE,IAAI8C,KAAK,GAAGjI,IAAI,CAACkJ,KAAK,CAAC,CAAClD,MAAM,CAACoC,CAAC,EAAEpC,MAAM,CAACkC,CAAC,CAAC;MAE3C,IAAIqB,eAAe,GAAGtB,KAAK,GAAG/O,SAAS,CAACuL,wBAAwB;MAChE,IAAI+E,cAAc,GAAGlG,UAAU,CAAC6F,WAAW,CAACjQ,SAAS,CAACoQ,wBAAwB,GAAGC,eAAe,CAAC;MAEjG,IAAInN,MAAM,GAAGlD,SAAS,CAACiB,MAAM,CAACa,KAAK,CAACoB,MAAM;MAE1C,IAAIkM,YAAY;MAChB,IAAI3O,SAAO,CAACT,SAAS,CAACwL,WAAW,CAAC,EAAE;QAClC4D,YAAY,GAAG9E,OAAO,CAAC+E,KAAK,CAACnM,MAAM,CAACoM,SAAS,EAAEhC,mBAAmB,CAAC;QACnEpK,MAAM,CAACqM,eAAe,CAACvP,SAAS,CAACwL,WAAW,CAAC;;MAG/C,IAAI+E,kBAAkB,GAAG,CAACrN,MAAM,CAAC2D,OAAO;MACxC3D,MAAM,CAACsN,WAAW,CAACF,cAAc,GAAGC,kBAAkB,CAAC;MAEvD,IAAI9P,SAAO,CAACT,SAAS,CAACwL,WAAW,CAAC,EAAE;QAClCtI,MAAM,CAACqM,eAAe,CAACH,YAAY,CAAC;;;;KAIvC;;IAEDpP,SAAS,CAAC2L,qBAAqB,GAAG,UAAU3E,CAAC,EAAE;MAC7ChH,SAAS,CAACsL,UAAU,GAAG,KAAK;MAC5B1M,QAAQ,CAAC4P,mBAAmB,CAAC,WAAW,EAAExO,SAAS,CAAC0L,uBAAuB,EAAE,KAAK,CAAC;MACnF9M,QAAQ,CAAC4P,mBAAmB,CAAC,SAAS,EAAExO,SAAS,CAAC2L,qBAAqB,EAAE,KAAK,CAAC;MAE/E3L,SAAS,CAAC0L,uBAAuB,GAAGvK,SAAS;MAC7CnB,SAAS,CAAC2L,qBAAqB,GAAGxK,SAAS;KAC5C;IAEDvC,QAAQ,CAACoD,gBAAgB,CAAC,WAAW,EAAEhC,SAAS,CAAC0L,uBAAuB,EAAE,KAAK,CAAC;IAChF9M,QAAQ,CAACoD,gBAAgB,CAAC,SAAS,EAAEhC,SAAS,CAAC2L,qBAAqB,EAAE,KAAK,CAAC;EAC9E;;ECpkBA;AACA,EAKA,IAAIlL,SAAO,GAAGjC,MAAM,CAACiC,OAAO;EAC5B,IAAIgQ,iBAAiB,GAAGjS,MAAM,CAACkG,gBAAgB;EAC/C,IAAIgM,WAAW,GAAGlS,MAAM,CAACmS,KAAK;EAC9B,IAAI/Q,UAAQ,GAAGpB,MAAM,CAACqB,QAAQ;EAC9B,IAAIa,gBAAc,GAAGlC,MAAM,CAACkC,cAAc;EAC1C;EACA;EACA;EACA;EACA;EACA;EACA,IAAIkQ,gBAAgB,GAAG,SAAnBA,gBAAgB,CAAaC,kBAAkB,EAAE;IACnDC,UAAU,CAACrL,KAAK,CAAC,IAAI,EAAEC,SAAS,CAAC;IAEjC,IAAI,CAACqL,mBAAmB,GAAG,EAAE;EAC/B,CAAC;EAEDH,gBAAgB,CAAC1O,SAAS,CAAC8O,uBAAuB,GAAG7P,SAAS;EAC9DyP,gBAAgB,CAAC1O,SAAS,CAAC+O,mBAAmB,GAAG9P,SAAS;EAC1DyP,gBAAgB,CAAC1O,SAAS,CAACgP,aAAa,GAAG/P,SAAS;EACpDyP,gBAAgB,CAAC1O,SAAS,CAACiP,iBAAiB,GAAGhQ,SAAS;EACxDyP,gBAAgB,CAAC1O,SAAS,CAACjB,MAAM,GAAGE,SAAS;EAC7CyP,gBAAgB,CAAC1O,SAAS,CAACnC,SAAS,GAAGoB,SAAS;EAChDyP,gBAAgB,CAAC1O,SAAS,CAAC6O,mBAAmB,GAAG5P,SAAS;EAC1DyP,gBAAgB,CAAC1O,SAAS,CAACkP,iBAAiB,GAAG,KAAK;EAEpDR,gBAAgB,CAAC1O,SAAS,CAAC8D,mBAAmB,GAAG,UAAUC,MAAM,EAAE;IACjE,IAAI,CAACmL,iBAAiB,GAAGnL,MAAM;IAC/B,IAAI,CAACgL,mBAAmB,CAACjL,mBAAmB,CAAC,IAAI,CAACoL,iBAAiB,CAAC;EACtE,CAAC;EAEDR,gBAAgB,CAAC1O,SAAS,CAACmP,mBAAmB,GAAG,YAAY;IAC3D,OAAO,IAAI,CAACD,iBAAiB;EAC/B,CAAC;EAEDR,gBAAgB,CAAC1O,SAAS,CAACC,OAAO,GAAG,YAAY;IAC/C,IAAI1B,SAAO,CAAC,IAAI,CAACwQ,mBAAmB,CAAC,EAAE;MACrC,IAAI,CAACA,mBAAmB,CAAC9O,OAAO,EAAE;;IAEpC,IAAI1B,SAAO,CAAC,IAAI,CAACuQ,uBAAuB,CAAC,EAAE;MACzC,IAAI,CAACA,uBAAuB,CAAC7O,OAAO,EAAE;;IAGxC,IAAI1B,SAAO,CAAC,IAAI,CAACyQ,aAAa,CAAC,EAAE;MAC/B,IAAI,CAACA,aAAa,CAACI,UAAU,CAACC,WAAW,CAAC,IAAI,CAACL,aAAa,CAAC;;IAE/D,OAAO,IAAI,CAACA,aAAa;IAEzB,IAAIzQ,SAAO,CAAC,IAAI,CAAC0Q,iBAAiB,CAAC,EAAE;MACnC,IAAI,CAACA,iBAAiB,CAACG,UAAU,CAACC,WAAW,CAAC,IAAI,CAACJ,iBAAiB,CAAC;;IAEvE,OAAO,IAAI,CAACA,iBAAiB;IAE7B,IAAI1Q,SAAO,CAAC,IAAI,CAACV,SAAS,CAAC,EAAE;MAC3B,IAAI,CAACA,SAAS,CAACuR,UAAU,CAACC,WAAW,CAAC,IAAI,CAACxR,SAAS,CAAC;;IAEvD,OAAO,IAAI,CAACA,SAAS;IAErB,KAAK,IAAIG,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAAC6Q,mBAAmB,CAAC3Q,MAAM,EAAEF,CAAC,EAAE,EAAE;MACxD,IAAI,CAAC6Q,mBAAmB,CAAC7Q,CAAC,CAAC,EAAE;;EAEjC,CAAC;EAED0Q,gBAAgB,CAAC1O,SAAS,CAACsP,oBAAoB,GAAG,UAAUC,QAAQ,EAAE;IACpE,IAAI,OAAOA,QAAQ,KAAK,UAAU,EAAE;MAClC,IAAI,CAACV,mBAAmB,CAAC1Q,IAAI,CAACoR,QAAQ,CAAC;;EAE3C,CAAC;;EAED;EACA;EACA;EACA;EACA,SAASX,UAAU,CAAED,kBAAkB,EAAE7P,OAAO,EAAE;IAChD,IAAI,CAACP,SAAO,CAACoQ,kBAAkB,CAAC,EAAE;MAChC,MAAM,IAAInQ,gBAAc,CAAC,qCAAqC,CAAC;;;;;IAKjE,IAAIgR,YAAY,GAAGjR,SAAO,CAACoQ,kBAAkB,CAACa,YAAY,CAAC,GAAGb,kBAAkB,CAACa,YAAY,GAAGb,kBAAkB;IAElH,IAAI9Q,SAAS,GAAGnB,QAAQ,CAACS,aAAa,CAAC,KAAK,CAAC;IAC7CU,SAAS,CAAC4R,SAAS,GAAG,yCAAyC;IAC/DD,YAAY,CAAC3R,SAAS,CAACL,WAAW,CAACK,SAAS,CAAC;IAE7C,IAAI,CAACkB,MAAM,GAAG4P,kBAAkB;IAChC,IAAI,CAAC5P,MAAM,CAACD,OAAO,GAAIP,SAAO,CAACO,OAAO,CAAC,GAAIA,OAAO,GAAG,EAAE;IACvD,IAAI,CAACC,MAAM,CAACU,kBAAkB,GAAG,IAAI+O,WAAW,EAAE;IAClD,IAAI,CAACzP,MAAM,CAAC2Q,mBAAmB,GAAG,IAAIlB,WAAW,EAAE;IACnD,IAAI,CAAC3Q,SAAS,GAAGA,SAAS;;;;;;;IAO1B,IAAI,CAACU,SAAO,CAAC,IAAI,CAACQ,MAAM,CAACD,OAAO,CAACQ,oBAAoB,CAAC,IAAI,IAAI,CAACP,MAAM,CAACD,OAAO,CAACQ,oBAAoB,EAAE;MAClG,IAAI,CAAC2P,iBAAiB,GAAGvS,QAAQ,CAACS,aAAa,CAAC,KAAK,CAAC;MACtDU,SAAS,CAACL,WAAW,CAAC,IAAI,CAACyR,iBAAiB,CAAC;MAC7C,IAAI,CAACA,iBAAiB,CAACU,YAAY,CAAC,IAAI,EAAE,mBAAmB,CAAC;MAC9D,IAAI,CAACb,uBAAuB,GAAGjQ,uBAAuB,CAACwB,MAAM,CAAC;QAC5DxC,SAAS,EAAE,IAAI,CAACoR,iBAAiB;QACjClQ,MAAM,EAAE,IAAI,CAACA,MAAM;QACnB6Q,UAAU,EAAE/R,SAAS;QACrByB,oBAAoB,EAAE;OACvB,CAAC;;IAGJ,IAAI,CAAC,CAACf,SAAO,CAAC,IAAI,CAACQ,MAAM,CAACD,OAAO,CAAC0J,kBAAkB,CAAC,IAAI,IAAI,CAACzJ,MAAM,CAACD,OAAO,CAAC0J,kBAAkB,MAAM,CAACjK,SAAO,CAAC,IAAI,CAACQ,MAAM,CAACD,OAAO,CAAC2J,aAAa,CAAC,IAAI,IAAI,CAAC1J,MAAM,CAACD,OAAO,CAAC2J,aAAa,CAAC,EAAE;MACtL,IAAI,CAACuG,aAAa,GAAGtS,QAAQ,CAACS,aAAa,CAAC,KAAK,CAAC;MAClD,IAAI,CAAC6R,aAAa,CAACW,YAAY,CAAC,IAAI,EAAE,eAAe,CAAC;MACtD9R,SAAS,CAACL,WAAW,CAAC,IAAI,CAACwR,aAAa,CAAC;;MAEzC,IAAI,CAACD,mBAAmB,GAAGxG,mBAAmB,CAAClI,MAAM,CAAC;QACpDxC,SAAS,EAAE,IAAI,CAACmR,aAAa;QAC7BjQ,MAAM,EAAE,IAAI,CAACA,MAAM;QACnByJ,kBAAkB,EAAE,IAAI;QACxBC,aAAa,EAAE;OAChB,CAAC;KACH,MAAM,IAAKlK,SAAO,CAAC,IAAI,CAACQ,MAAM,CAACD,OAAO,CAAC0J,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAACzJ,MAAM,CAACD,OAAO,CAAC0J,kBAAkB,KAAM,CAACjK,SAAO,CAAC,IAAI,CAACQ,MAAM,CAACD,OAAO,CAAC2J,aAAa,CAAC,IAAI,IAAI,CAAC1J,MAAM,CAACD,OAAO,CAAC2J,aAAa,CAAC,EAAE;MAC7L,IAAI,CAACuG,aAAa,GAAGtS,QAAQ,CAACS,aAAa,CAAC,KAAK,CAAC;MAClD,IAAI,CAAC6R,aAAa,CAACW,YAAY,CAAC,IAAI,EAAE,eAAe,CAAC;MACtD9R,SAAS,CAACL,WAAW,CAAC,IAAI,CAACwR,aAAa,CAAC;;MAEzC,IAAI,CAACD,mBAAmB,GAAGxG,mBAAmB,CAAClI,MAAM,CAAC;QACpDxC,SAAS,EAAE,IAAI,CAACmR,aAAa;QAC7BjQ,MAAM,EAAE,IAAI,CAACA,MAAM;QACnByJ,kBAAkB,EAAE,KAAK;QACzBC,aAAa,EAAE;OAChB,CAAC;KACH,MAAM,IAAI,CAAC,CAAClK,SAAO,CAAC,IAAI,CAACQ,MAAM,CAACD,OAAO,CAAC0J,kBAAkB,CAAC,IAAI,IAAI,CAACzJ,MAAM,CAACD,OAAO,CAAC0J,kBAAkB,KAAMjK,SAAO,CAAC,IAAI,CAACQ,MAAM,CAACD,OAAO,CAAC2J,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC1J,MAAM,CAACD,OAAO,CAAC2J,aAAc,EAAE;MAC7L,IAAI,CAACuG,aAAa,GAAGtS,QAAQ,CAACS,aAAa,CAAC,KAAK,CAAC;MAClD,IAAI,CAAC6R,aAAa,CAACW,YAAY,CAAC,IAAI,EAAE,eAAe,CAAC;MACtD9R,SAAS,CAACL,WAAW,CAAC,IAAI,CAACwR,aAAa,CAAC;;MAEzC,IAAI,CAACD,mBAAmB,GAAGxG,mBAAmB,CAAClI,MAAM,CAAC;QACpDxC,SAAS,EAAE,IAAI,CAACmR,aAAa;QAC7BjQ,MAAM,EAAE,IAAI,CAACA,MAAM;QACnByJ,kBAAkB,EAAE,IAAI;QACxBC,aAAa,EAAE;OAChB,CAAC;KACH,MAAM,IAAKlK,SAAO,CAAC,IAAI,CAACQ,MAAM,CAACD,OAAO,CAAC0J,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAACzJ,MAAM,CAACD,OAAO,CAAC0J,kBAAkB,IAAMjK,SAAO,CAAC,IAAI,CAACQ,MAAM,CAACD,OAAO,CAAC2J,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC1J,MAAM,CAACD,OAAO,CAAC2J,aAAc,EAAE;EAWjM;;;;;;;;"}